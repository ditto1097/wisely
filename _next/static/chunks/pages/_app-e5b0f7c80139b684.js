(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{4444:(e,t,r)=>{"use strict";r.d(t,{BH:()=>w,G6:()=>k,L:()=>u,LL:()=>O,L_:()=>_,P0:()=>m,Pz:()=>v,Sg:()=>b,ZR:()=>R,aH:()=>y,b$:()=>T,eu:()=>A,hl:()=>C,m9:()=>B,ne:()=>F,pd:()=>j,q4:()=>g,ru:()=>E,tV:()=>c,uI:()=>S,vZ:()=>function e(t,r){if(t===r)return!0;let n=Object.keys(t),i=Object.keys(r);for(let s of n){if(!i.includes(s))return!1;let n=t[s],o=r[s];if(D(n)&&D(o)){if(!e(n,o))return!1}else if(n!==o)return!1}for(let e of i)if(!n.includes(e))return!1;return!0},w1:()=>x,xO:()=>L,xb:()=>P,z$:()=>I,zd:()=>M});var n=r(3454);let i=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},s=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{let s=e[r++],o=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4,h=(15&o)<<2|l>>6,f=63&l;a||(f=64,s||(h=64)),n.push(r[u],r[c],r[h],r[f])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,o=++t<e.length?r[e.charAt(t)]:64,l=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==l)throw new a;let u=i<<2|s>>4;if(n.push(u),64!==o){let e=s<<4&240|o>>2;if(n.push(e),64!==l){let e=o<<6&192|l;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let l=function(e){let t=i(e);return o.encodeByteArray(t,!0)},u=function(e){return l(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},h=()=>(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,f=()=>{if(void 0===n||void 0===n.env)return;let e=n.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},d=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&c(e[1]);return t&&JSON.parse(t)},p=()=>{try{return h()||f()||d()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},g=e=>{var t,r;return null===(r=null===(t=p())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},m=e=>{let t=g(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},y=()=>{var e;return null===(e=p())||void 0===e?void 0:e.config},v=e=>{var t;return null===(t=p())||void 0===t?void 0:t[`_${e}`]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function b(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}function I(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function S(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())}function _(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function E(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function T(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function x(){let e=I();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function k(){return!function(){var e;let t=null===(e=p())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(r.g.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){try{return"object"==typeof indexedDB}catch(e){return!1}}function A(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}class R extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,R.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?i.replace(N,(e,t)=>{let n=r[t];return null!=n?String(n):`<${t}?>`}):"Error",o=`${this.serviceName}: ${s} (${n}).`;return new R(n,o,r)}}let N=/\{\$([^}]+)}/g;function P(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function D(e){return null!==e&&"object"==typeof e}function L(e){let t=[];for(let[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function M(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}),t}function j(e){let t=e.indexOf("?");if(!t)return"";let r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function F(e,t){let r=new V(e,t);return r.subscribe.bind(r)}class V{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw Error("Missing Observer.");void 0===(n=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:r}:e).next&&(n.next=U),void 0===n.error&&(n.error=U),void 0===n.complete&&(n.complete=U);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U(){}function B(e){return e&&e._delegate?e._delegate:e}},8679:(e,t,r)=>{"use strict";var n=r(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?o:a[e.$$typeof]||i}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(p){var i=d(r);i&&i!==p&&e(t,i,n)}var o=c(r);h&&(o=o.concat(h(r)));for(var a=l(t),g=l(r),m=0;m<o.length;++m){var y=o[m];if(!s[y]&&!(n&&n[y])&&!(g&&g[y])&&!(a&&a[y])){var v=f(r,y);try{u(t,y,v)}catch(e){}}}}return t}},5477:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=/[A-Z]/g,i=/^ms-/,s={};function o(e){return"-"+e.toLowerCase()}let a=function(e){if(s.hasOwnProperty(e))return s[e];var t=e.replace(n,o);return s[e]=i.test(t)?"-"+t:t}},1118:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(540)}])},8199:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION_HMR_REFRESH:function(){return u},ACTION_NAVIGATE:function(){return s},ACTION_PREFETCH:function(){return l},ACTION_REFRESH:function(){return i},ACTION_RESTORE:function(){return o},ACTION_SERVER_ACTION:function(){return c},ACTION_SERVER_PATCH:function(){return a},PrefetchCacheEntryStatus:function(){return n},PrefetchKind:function(){return r}});let i="refresh",s="navigate",o="restore",a="server-patch",l="prefetch",u="hmr-refresh",c="server-action";!function(e){e.AUTO="auto",e.FULL="full",e.TEMPORARY="temporary"}(r||(r={})),function(e){e.fresh="fresh",e.reusable="reusable",e.expired="expired",e.stale="stale"}(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7195:(e,t,r)=>{"use strict";function n(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),r(8337),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return I}});let n=r(8754),i=r(5893),s=n._(r(7294)),o=r(6075),a=r(3955),l=r(8041),u=r(9903),c=r(5490),h=r(1928),f=r(257),d=r(4229),p=r(7195),g=r(9470),m=r(8199),y=r(2145),v=new Set;function w(e,t,r,n,i,s){if(s||(0,a.isLocalURL)(t)){if(!n.bypassPrefetchedCheck&&!s){let i=t+"%"+r+"%"+(void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0);if(v.has(i))return;v.add(i)}(async()=>s?e.prefetch(t,i):e.prefetch(t,r,n))().catch(e=>{})}}function b(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}let I=s.default.forwardRef(function(e,t){let r,n;let{href:l,as:v,children:I,prefetch:S=null,passHref:_,replace:E,shallow:T,scroll:x,locale:k,onClick:C,onMouseEnter:A,onTouchStart:R,legacyBehavior:O=!1,...N}=e;r=I,O&&("string"==typeof r||"number"==typeof r)&&(r=(0,i.jsx)("a",{children:r}));let P=s.default.useContext(h.RouterContext),D=s.default.useContext(f.AppRouterContext),L=null!=P?P:D,M=!P,j=!1!==S,F=null===S?m.PrefetchKind.AUTO:m.PrefetchKind.FULL,{href:V,as:U}=s.default.useMemo(()=>{if(!P){let e=b(l);return{href:e,as:v?b(v):e}}let[e,t]=(0,o.resolveHref)(P,l,!0);return{href:e,as:v?(0,o.resolveHref)(P,v):t||e}},[P,l,v]),B=s.default.useRef(V),z=s.default.useRef(U);O&&(n=s.default.Children.only(r));let $=O?n&&"object"==typeof n&&n.ref:t,[q,K,G]=(0,d.useIntersection)({rootMargin:"200px"}),H=s.default.useCallback(e=>{(z.current!==U||B.current!==V)&&(G(),z.current=U,B.current=V),q(e)},[U,V,G,q]),W=(0,y.useMergedRef)(H,$);s.default.useEffect(()=>{L&&K&&j&&w(L,V,U,{locale:k},{kind:F},M)},[U,V,K,k,j,null==P?void 0:P.locale,L,M,F]);let Q={ref:W,onClick(e){O||"function"!=typeof C||C(e),O&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),L&&!e.defaultPrevented&&function(e,t,r,n,i,o,l,u,c){let{nodeName:h}=e.currentTarget;if("A"===h.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!c&&!(0,a.isLocalURL)(r)))return;e.preventDefault();let f=()=>{let e=null==l||l;"beforePopState"in t?t[i?"replace":"push"](r,n,{shallow:o,locale:u,scroll:e}):t[i?"replace":"push"](n||r,{scroll:e})};c?s.default.startTransition(f):f()}(e,L,V,U,E,T,x,k,M)},onMouseEnter(e){O||"function"!=typeof A||A(e),O&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),L&&(j||!M)&&w(L,V,U,{locale:k,priority:!0,bypassPrefetchedCheck:!0},{kind:F},M)},onTouchStart:function(e){O||"function"!=typeof R||R(e),O&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),L&&(j||!M)&&w(L,V,U,{locale:k,priority:!0,bypassPrefetchedCheck:!0},{kind:F},M)}};if((0,u.isAbsoluteUrl)(U))Q.href=U;else if(!O||_||"a"===n.type&&!("href"in n.props)){let e=void 0!==k?k:null==P?void 0:P.locale,t=(null==P?void 0:P.isLocaleDomain)&&(0,p.getDomainLocale)(U,e,null==P?void 0:P.locales,null==P?void 0:P.domainLocales);Q.href=t||(0,g.addBasePath)((0,c.addLocale)(U,e,null==P?void 0:P.defaultLocale))}return O?s.default.cloneElement(n,Q):(0,i.jsx)("a",{...N,...Q,children:r})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let n=r(7294),i=r(4474),s="function"==typeof IntersectionObserver,o=new Map,a=[];function l(e){let{rootRef:t,rootMargin:r,disabled:l}=e,u=l||!s,[c,h]=(0,n.useState)(!1),f=(0,n.useRef)(null),d=(0,n.useCallback)(e=>{f.current=e},[]);return(0,n.useEffect)(()=>{if(s){if(u||c)return;let e=f.current;if(e&&e.tagName)return function(e,t,r){let{id:n,observer:i,elements:s}=function(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},n=a.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=o.get(n)))return t;let i=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:i},a.push(r),o.set(r,t),t}(r);return s.set(e,t),i.observe(e),function(){if(s.delete(e),i.unobserve(e),0===s.size){i.disconnect(),o.delete(n);let e=a.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&a.splice(e,1)}}}(e,e=>e&&h(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!c){let e=(0,i.requestIdleCallback)(()=>h(!0));return()=>(0,i.cancelIdleCallback)(e)}},[u,r,t,c,f.current]),[d,c,(0,n.useCallback)(()=>{h(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=r(7294);function i(e,t){let r=(0,n.useRef)(()=>{}),i=(0,n.useRef)(()=>{});return(0,n.useMemo)(()=>e&&t?n=>{null===n?(r.current(),i.current()):(r.current=s(e,n),i.current=s(t,n))}:e||t,[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1876:e=>{!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=l(e),o=s[0],a=s[1],u=new i((o+a)*3/4-a),c=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(function(e,t,n){for(var i,s=[],o=t;o<n;o+=3)s.push(r[(i=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},72:function(e,t,r){"use strict";var n=r(675),i=r(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|d(e,t),n=o(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(A(e,SharedArrayBuffer)||e&&A(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);var i=function(e){if(a.isBuffer(e)){var t,r=0|f(e.length),n=o(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|f(e))}function h(e){for(var t=e.length<0?0:0|f(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function d(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(i)return n?-1:T(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var i,s,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=R[e[s]];return i}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=t,s=r,0===i&&s===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r=+r)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var s,o=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*o}else -1!==c&&(s-=s-c),c=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var h=!0,f=0;f<l;f++)if(u(e,s+f)!==u(t,f)){h=!1;break}if(h)return s}return -1}function v(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,l,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:(192&(s=e[i+1]))==128&&(l=(31&u)<<6|63&s)>127&&(c=l);break;case 3:s=e[i+1],o=e[i+2],(192&s)==128&&(192&o)==128&&(l=(15&u)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function b(e,t,r,n,i,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function I(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function S(e,t,r,n,s){return t=+t,r>>>=0,s||I(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function _(e,t,r,n,s){return t=+t,r>>>=0,s||I(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(u(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(A(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(A(s,Uint8Array)&&(s=a.from(s)),!a.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,i){if(A(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,o=r-t,l=Math.min(s,o),u=this.slice(n,i),c=e.slice(t,r),h=0;h<l;++h)if(u[h]!==c[h]){s=u[h],o=c[h];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,s,o,a,l,u,c,h,f,d,p,g,m=this.length-t;if((void 0===r||r>m)&&(r=m),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var y=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(a!=a)break;e[r+o]=a}return o}(this,e,t,r);case"utf8":case"utf-8":return l=t,u=r,C(T(e,this.length-l),this,l,u);case"ascii":return c=t,h=r,C(x(e),this,c,h);case"latin1":case"binary":return i=this,s=e,o=t,a=r,C(x(s),i,o,a);case"base64":return f=t,d=r,C(k(e),this,f,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,g=r,C(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-p),this,p,g);default:if(y)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),y=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;b(this,e,t,r,i,0)}var s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;b(this,e,t,r,i,0)}var s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);b(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);b(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return S(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return S(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return _(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return _(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=i-1;s>=0;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=a.isBuffer(e)?e:a.from(e,n),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%l]}return this};var E=/[^+/0-9A-Za-z-_]/g;function T(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function x(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function k(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var R=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},783:function(e,t){t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+e[t+h],h+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=u}return(d?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,f=23===i?5960464477539062e-23:0,d=n?0:s-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=f/l:t+=f*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(t*l-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[r+d]=255&o,d+=p,o/=256,u-=8);e[r+d-p]|=128*g}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}},o=!0;try{t[e](s,s.exports,n),o=!1}finally{o&&delete r[e]}return s.exports}n.ab="//";var i=n(72);e.exports=i}()},5060:()=>{},9008:(e,t,r)=>{e.exports=r(3867)},1664:(e,t,r)=>{e.exports=r(8342)},1163:(e,t,r)=>{e.exports=r(3079)},9921:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function I(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case h:case s:case a:case o:case d:return e;default:switch(e=e&&e.$$typeof){case u:case f:case m:case g:case l:return e;default:return t}}case i:return t}}}function S(e){return I(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=n,t.ForwardRef=f,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return S(e)||I(e)===c},t.isConcurrentMode=S,t.isContextConsumer=function(e){return I(e)===u},t.isContextProvider=function(e){return I(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return I(e)===f},t.isFragment=function(e){return I(e)===s},t.isLazy=function(e){return I(e)===m},t.isMemo=function(e){return I(e)===g},t.isPortal=function(e){return I(e)===i},t.isProfiler=function(e){return I(e)===a},t.isStrictMode=function(e){return I(e)===o},t.isSuspense=function(e){return I(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===a||e===o||e===d||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===f||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=I},9864:(e,t,r)=>{"use strict";e.exports=r(9921)},6774:e=>{e.exports=function(e,t,r,n){var i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var u=s[l];if(!a(u))return!1;var c=e[u],h=t[u];if(!1===(i=r?r.call(n,c,h,u):void 0)||void 0===i&&c!==h)return!1}return!0}},1686:(e,t,r)=>{"use strict";r.d(t,{zo:()=>th});var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var s=r(7294),o=r(6774),a=r.n(o),l="-ms-",u="-moz-",c="-webkit-",h="comm",f="rule",d="decl",p="@keyframes",g=Math.abs,m=String.fromCharCode,y=Object.assign;function v(e,t){return(e=t.exec(e))?e[0]:e}function w(e,t,r){return e.replace(t,r)}function b(e,t,r){return e.indexOf(t,r)}function I(e,t){return 0|e.charCodeAt(t)}function S(e,t,r){return e.slice(t,r)}function _(e){return e.length}function E(e,t){return t.push(e),e}function T(e,t){return e.filter(function(e){return!v(e,t)})}var x=1,k=1,C=0,A=0,R=0,O="";function N(e,t,r,n,i,s,o,a){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:x,column:k,length:o,return:"",siblings:a}}function P(e,t){return y(N("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function D(e){for(;e.root;)e=P(e.root,{children:[e]});E(e,e.siblings)}function L(){return R=A<C?I(O,A++):0,k++,10===R&&(k=1,x++),R}function M(){return I(O,A)}function j(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function F(e){var t,r;return(t=A-1,r=function e(t){for(;L();)switch(R){case t:return A;case 34:case 39:34!==t&&39!==t&&e(R);break;case 40:41===t&&e(t);break;case 92:L()}return A}(91===e?e+2:40===e?e+1:e),S(O,t,r)).trim()}function V(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function U(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case d:return e.return=e.return||e.value;case h:return"";case p:return e.return=e.value+"{"+V(e.children,n)+"}";case f:if(!_(e.value=e.props.join(",")))return""}return _(r=V(e.children,n))?e.return=e.value+"{"+r+"}":""}function B(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case d:e.return=function e(t,r,n){var i;switch(i=r,45^I(t,0)?(((i<<2^I(t,0))<<2^I(t,1))<<2^I(t,2))<<2^I(t,3):0){case 5103:return c+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return c+t+t;case 4789:return u+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return c+t+u+t+l+t+t;case 5936:switch(I(t,r+11)){case 114:return c+t+l+w(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return c+t+l+w(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return c+t+l+w(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return c+t+l+t+t;case 6165:return c+t+l+"flex-"+t+t;case 5187:return c+t+w(t,/(\w+).+(:[^]+)/,c+"box-$1$2"+l+"flex-$1$2")+t;case 5443:return c+t+l+"flex-item-"+w(t,/flex-|-self/g,"")+(v(t,/flex-|baseline/)?"":l+"grid-row-"+w(t,/flex-|-self/g,""))+t;case 4675:return c+t+l+"flex-line-pack"+w(t,/align-content|flex-|-self/g,"")+t;case 5548:return c+t+l+w(t,"shrink","negative")+t;case 5292:return c+t+l+w(t,"basis","preferred-size")+t;case 6060:return c+"box-"+w(t,"-grow","")+c+t+l+w(t,"grow","positive")+t;case 4554:return c+w(t,/([^-])(transform)/g,"$1"+c+"$2")+t;case 6187:return w(w(w(t,/(zoom-|grab)/,c+"$1"),/(image-set)/,c+"$1"),t,"")+t;case 5495:case 3959:return w(t,/(image-set\([^]*)/,c+"$1$`$1");case 4968:return w(w(t,/(.+:)(flex-)?(.*)/,c+"box-pack:$3"+l+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+c+t+t;case 4200:if(!v(t,/flex-|baseline/))return l+"grid-column-align"+S(t,r)+t;break;case 2592:case 3360:return l+w(t,"template-","")+t;case 4384:case 3616:if(n&&n.some(function(e,t){return r=t,v(e.props,/grid-\w+-end/)}))return~b(t+(n=n[r].value),"span",0)?t:l+w(t,"-start","")+t+l+"grid-row-span:"+(~b(n,"span",0)?v(n,/\d+/):+v(n,/\d+/)-+v(t,/\d+/))+";";return l+w(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(e){return v(e.props,/grid-\w+-start/)})?t:l+w(w(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return w(t,/(.+)-inline(.+)/,c+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_(t)-1-r>6)switch(I(t,r+1)){case 109:if(45!==I(t,r+4))break;case 102:return w(t,/(.+:)(.+)-([^]+)/,"$1"+c+"$2-$3$1"+u+(108==I(t,r+3)?"$3":"$2-$3"))+t;case 115:return~b(t,"stretch",0)?e(w(t,"stretch","fill-available"),r,n)+t:t}break;case 5152:case 5920:return w(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(e,r,n,i,s,o,a){return l+r+":"+n+a+(i?l+r+"-span:"+(s?o:+o-+n)+a:"")+t});case 4949:if(121===I(t,r+6))return w(t,":",":"+c)+t;break;case 6444:switch(I(t,45===I(t,14)?18:11)){case 120:return w(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+c+(45===I(t,14)?"inline-":"")+"box$3$1"+c+"$2$3$1"+l+"$2box$3")+t;case 100:return w(t,":",":"+l)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return w(t,"scroll-","scroll-snap-")+t}return t}(e.value,e.length,r);return;case p:return V([P(e,{value:w(e.value,"@","@"+c)})],n);case f:if(e.length){var i,s;return i=r=e.props,s=function(t){switch(v(t,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":D(P(e,{props:[w(t,/:(read-\w+)/,":"+u+"$1")]})),D(P(e,{props:[t]})),y(e,{props:T(r,n)});break;case"::placeholder":D(P(e,{props:[w(t,/:(plac\w+)/,":"+c+"input-$1")]})),D(P(e,{props:[w(t,/:(plac\w+)/,":"+u+"$1")]})),D(P(e,{props:[w(t,/:(plac\w+)/,l+"input-$1")]})),D(P(e,{props:[t]})),y(e,{props:T(r,n)})}return""},i.map(s).join("")}}}function z(e,t,r,n,i,s,o,a,l,u,c,h){for(var d=i-1,p=0===i?s:[""],m=p.length,y=0,v=0,b=0;y<n;++y)for(var I=0,_=S(e,d+1,d=g(v=o[y])),E=e;I<m;++I)(E=(v>0?p[I]+" "+_:w(_,/&\f/g,p[I])).trim())&&(l[b++]=E);return N(e,t,r,0===i?f:a,l,u,c,h)}function $(e,t,r,n,i){return N(e,t,r,d,S(e,0,n),S(e,n+1,-1),n,i)}var q={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},K=r(3454),G=void 0!==K&&void 0!==K.env&&(K.env.REACT_APP_SC_ATTR||K.env.SC_ATTR)||"data-styled",H="active",W="data-styled-version",Q="6.1.13",J="/*!sc*/\n",Y="undefined"!=typeof window&&"HTMLElement"in window,X=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:void 0!==K&&void 0!==K.env&&void 0!==K.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==K.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==K.env.REACT_APP_SC_DISABLE_SPEEDY&&K.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==K&&void 0!==K.env&&void 0!==K.env.SC_DISABLE_SPEEDY&&""!==K.env.SC_DISABLE_SPEEDY&&"false"!==K.env.SC_DISABLE_SPEEDY&&K.env.SC_DISABLE_SPEEDY),Z=Object.freeze([]),ee=Object.freeze({}),et=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),er=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,en=/(^-|-$)/g;function ei(e){return e.replace(er,"-").replace(en,"")}var es=/(a)(d)/gi,eo=function(e){return String.fromCharCode(e+(e>25?39:97))};function ea(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=eo(t%52)+r;return(eo(t%52)+r).replace(es,"$1-$2")}var el,eu=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},ec=function(e){return eu(5381,e)};function eh(e){return"string"==typeof e}var ef="function"==typeof Symbol&&Symbol.for,ed=ef?Symbol.for("react.memo"):60115,ep=ef?Symbol.for("react.forward_ref"):60112,eg={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},em={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ey={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ev=((el={})[ep]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},el[ed]=ey,el);function ew(e){return("type"in e&&e.type.$$typeof)===ed?ey:"$$typeof"in e?ev[e.$$typeof]:eg}var eb=Object.defineProperty,eI=Object.getOwnPropertyNames,eS=Object.getOwnPropertySymbols,e_=Object.getOwnPropertyDescriptor,eE=Object.getPrototypeOf,eT=Object.prototype;function ex(e){return"function"==typeof e}function ek(e){return"object"==typeof e&&"styledComponentId"in e}function eC(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function eA(e,t){if(0===e.length)return"";for(var r=e[0],n=1;n<e.length;n++)r+=t?t+e[n]:e[n];return r}function eR(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function eO(e,t){Object.defineProperty(e,"toString",{value:t})}function eN(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var eP=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,i=n;e>=i;)if((i<<=1)<0)throw eN(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var s=n;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),n=r+t;this.groupSizes[e]=0;for(var i=r;i<n;i++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var r=this.groupSizes[e],n=this.indexOfGroup(e),i=n+r,s=n;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(J);return t},e}(),eD=new Map,eL=new Map,eM=1,ej=function(e){if(eD.has(e))return eD.get(e);for(;eL.has(eM);)eM++;var t=eM++;return eD.set(e,t),eL.set(t,e),t},eF=function(e,t){eM=t+1,eD.set(e,t),eL.set(t,e)},eV="style[".concat(G,"][").concat(W,'="').concat(Q,'"]'),eU=new RegExp("^".concat(G,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),eB=function(e,t,r){for(var n,i=r.split(","),s=0,o=i.length;s<o;s++)(n=i[s])&&e.registerName(t,n)},ez=function(e,t){for(var r,n=(null!==(r=t.textContent)&&void 0!==r?r:"").split(J),i=[],s=0,o=n.length;s<o;s++){var a=n[s].trim();if(a){var l=a.match(eU);if(l){var u=0|parseInt(l[1],10),c=l[2];0!==u&&(eF(c,u),eB(e,c,l[3]),e.getTag().insertRules(u,i)),i.length=0}else i.push(a)}}},e$=function(e){for(var t=document.querySelectorAll(eV),r=0,n=t.length;r<n;r++){var i=t[r];i&&i.getAttribute(G)!==H&&(ez(e,i),i.parentNode&&i.parentNode.removeChild(i))}},eq=function(e){var t,n=document.head,i=e||n,s=document.createElement("style"),o=(t=Array.from(i.querySelectorAll("style[".concat(G,"]"))))[t.length-1],a=void 0!==o?o.nextSibling:null;s.setAttribute(G,H),s.setAttribute(W,Q);var l=r.nc;return l&&s.setAttribute("nonce",l),i.insertBefore(s,a),s},eK=function(){function e(e){this.element=eq(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,r=0,n=t.length;r<n;r++){var i=t[r];if(i.ownerNode===e)return i}throw eN(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),eG=function(){function e(e){this.element=eq(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),eH=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),eW=Y,eQ={isServer:!Y,useCSSOMInjection:!X},eJ=function(){function e(e,t,r){void 0===e&&(e=ee),void 0===t&&(t={});var i=this;this.options=n(n({},eQ),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Y&&eW&&(eW=!1,e$(this)),eO(this,function(){return function(e){for(var t=e.getTag(),r=t.length,n="",i=0;i<r;i++)(function(r){var i=eL.get(r);if(void 0!==i){var s=e.names.get(i),o=t.getGroup(r);if(void 0!==s&&s.size&&0!==o.length){var a="".concat(G,".g").concat(r,'[id="').concat(i,'"]'),l="";void 0!==s&&s.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),n+="".concat(o).concat(a,'{content:"').concat(l,'"}').concat(J)}}})(i);return n}(i)})}return e.registerId=function(e){return ej(e)},e.prototype.rehydrate=function(){!this.server&&Y&&e$(this)},e.prototype.reconstructWithOptions=function(t,r){return void 0===r&&(r=!0),new e(n(n({},this.options),t),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){var e,t,r;return this.tag||(this.tag=(t=(e=this.options).useCSSOMInjection,r=e.target,new eP(e.isServer?new eH(r):t?new eK(r):new eG(r))))},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(ej(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},e.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(ej(e),r)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(ej(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),eY=/&/g,eX=/^\s*\/\/.*$/gm;function eZ(e){var t,r,n,i=void 0===e?ee:e,s=i.options,o=void 0===s?ee:s,a=i.plugins,l=void 0===a?Z:a,u=function(e,n,i){return i.startsWith(r)&&i.endsWith(r)&&i.replaceAll(r,"").length>0?".".concat(t):e},c=l.slice();c.push(function(e){e.type===f&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(eY,r).replace(n,u))}),o.prefix&&c.push(B),c.push(U);var d=function(e,i,s,a){void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a="&"),t=a,r=i,n=RegExp("\\".concat(r,"\\b"),"g");var l,u,f,d,p,y,v=e.replace(eX,""),T=(p=function e(t,r,n,i,s,o,a,l,u){for(var c,f=0,d=0,p=a,y=0,v=0,T=0,C=1,P=1,D=1,V=0,U="",B=s,q=o,K=i,G=U;P;)switch(T=V,V=L()){case 40:if(108!=T&&58==I(G,p-1)){-1!=b(G+=w(F(V),"&","&\f"),"&\f",g(f?l[f-1]:0))&&(D=-1);break}case 34:case 39:case 91:G+=F(V);break;case 9:case 10:case 13:case 32:G+=function(e){for(;R=M();)if(R<33)L();else break;return j(e)>2||j(R)>3?"":" "}(T);break;case 92:G+=function(e,t){for(var r;--t&&L()&&!(R<48)&&!(R>102)&&(!(R>57)||!(R<65))&&(!(R>70)||!(R<97)););return r=A+(t<6&&32==M()&&32==L()),S(O,e,r)}(A-1,7);continue;case 47:switch(M()){case 42:case 47:E(N(c=function(e,t){for(;L();)if(e+R===57)break;else if(e+R===84&&47===M())break;return"/*"+S(O,t,A-1)+"*"+m(47===e?e:L())}(L(),A),r,n,h,m(R),S(c,2,-2),0,u),u);break;default:G+="/"}break;case 123*C:l[f++]=_(G)*D;case 125*C:case 59:case 0:switch(V){case 0:case 125:P=0;case 59+d:-1==D&&(G=w(G,/\f/g,"")),v>0&&_(G)-p&&E(v>32?$(G+";",i,n,p-1,u):$(w(G," ","")+";",i,n,p-2,u),u);break;case 59:G+=";";default:if(E(K=z(G,r,n,f,d,s,l,U,B=[],q=[],p,o),o),123===V){if(0===d)e(G,r,K,K,B,o,p,l,q);else switch(99===y&&110===I(G,3)?100:y){case 100:case 108:case 109:case 115:e(t,K,K,i&&E(z(t,K,K,0,0,s,l,U,s,B=[],p,q),q),s,q,p,l,i?B:q);break;default:e(G,K,K,K,[""],q,0,l,q)}}}f=d=v=0,C=D=1,U=G="",p=a;break;case 58:p=1+_(G),v=T;default:if(C<1){if(123==V)--C;else if(125==V&&0==C++&&125==(R=A>0?I(O,--A):0,k--,10===R&&(k=1,x--),R))continue}switch(G+=m(V),V*C){case 38:D=d>0?1:(G+="\f",-1);break;case 44:l[f++]=(_(G)-1)*D,D=1;break;case 64:45===M()&&(G+=F(L())),y=M(),d=p=_(U=G+=function(e){for(;!j(M());)L();return S(O,e,A)}(A)),V++;break;case 45:45===T&&2==_(G)&&(C=0)}}return o}("",null,null,null,[""],(f=d=s||i?"".concat(s," ").concat(i," { ").concat(v," }"):v,x=k=1,C=_(O=f),A=0,d=[]),0,[0],d),O="",p);o.namespace&&(T=function e(t,r){return t.map(function(t){return"rule"===t.type&&(t.value="".concat(r," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(r," ")),t.props=t.props.map(function(e){return"".concat(r," ").concat(e)})),Array.isArray(t.children)&&"@keyframes"!==t.type&&(t.children=e(t.children,r)),t})}(T,o.namespace));var P=[];return V(T,(u=(l=c.concat((y=function(e){return P.push(e)},function(e){!e.root&&(e=e.return)&&y(e)}))).length,function(e,t,r,n){for(var i="",s=0;s<u;s++)i+=l[s](e,t,r,n)||"";return i})),P};return d.hash=l.length?l.reduce(function(e,t){return t.name||eN(15),eu(e,t.name)},5381).toString():"",d}var e0=new eJ,e1=eZ(),e2=s.createContext({shouldForwardProp:void 0,styleSheet:e0,stylis:e1}),e5=(e2.Consumer,s.createContext(void 0));function e3(){return(0,s.useContext)(e2)}function e6(e){var t=(0,s.useState)(e.stylisPlugins),r=t[0],n=t[1],i=e3().styleSheet,o=(0,s.useMemo)(function(){var t=i;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,i]),l=(0,s.useMemo)(function(){return eZ({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})},[e.enableVendorPrefixes,e.namespace,r]);(0,s.useEffect)(function(){a()(r,e.stylisPlugins)||n(e.stylisPlugins)},[e.stylisPlugins]);var u=(0,s.useMemo)(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:o,stylis:l}},[e.shouldForwardProp,o,l]);return s.createElement(e2.Provider,{value:u},s.createElement(e5.Provider,{value:l},e.children))}var e4=function(){function e(e,t){var r=this;this.inject=function(e,t){void 0===t&&(t=e1);var n=r.name+t.hash;e.hasNameForId(r.id,n)||e.insertRules(r.id,n,t(r.rules,n,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,eO(this,function(){throw eN(12,String(r.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=e1),this.name+e.hash},e}();function e8(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(1===r&&"-"===n&&"-"===e[0])return e;n>="A"&&n<="Z"?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var e7=function(e){return null==e||!1===e||""===e},e9=function(e){var t=[];for(var r in e){var n=e[r];e.hasOwnProperty(r)&&!e7(n)&&(Array.isArray(n)&&n.isCss||ex(n)?t.push("".concat(e8(r),":"),n,";"):eR(n)?t.push.apply(t,i(i(["".concat(r," {")],e9(n),!1),["}"],!1)):t.push("".concat(e8(r),": ").concat(null==n||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||r in q||r.startsWith("--")?String(n).trim():"".concat(n,"px"),";")))}return t};function te(e,t,r,n){return e7(e)?[]:ek(e)?[".".concat(e.styledComponentId)]:ex(e)?!ex(e)||e.prototype&&e.prototype.isReactComponent||!t?[e]:te(e(t),t,r,n):e instanceof e4?r?(e.inject(r,n),[e.getName(n)]):[e]:eR(e)?e9(e):Array.isArray(e)?Array.prototype.concat.apply(Z,e.map(function(e){return te(e,t,r,n)})):[e.toString()]}function tt(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(ex(r)&&!ek(r))return!1}return!0}var tr=ec(Q),tn=function(){function e(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&tt(e),this.componentId=t,this.baseHash=eu(tr,t),this.baseStyle=r,eJ.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,r){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash){if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))n=eC(n,this.staticRulesId);else{var i=eA(te(this.rules,e,t,r)),s=ea(eu(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var o=r(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,o)}n=eC(n,s),this.staticRulesId=s}}else{for(var a=eu(this.baseHash,r.hash),l="",u=0;u<this.rules.length;u++){var c=this.rules[u];if("string"==typeof c)l+=c;else if(c){var h=eA(te(c,e,t,r));a=eu(a,h+u),l+=h}}if(l){var f=ea(a>>>0);t.hasNameForId(this.componentId,f)||t.insertRules(this.componentId,f,r(l,".".concat(f),void 0,this.componentId)),n=eC(n,f)}}return n},e}(),ti=s.createContext(void 0);ti.Consumer;var ts={};function to(e,t,r){var i,o,a,l,u=ek(e),c=!eh(e),h=t.attrs,f=void 0===h?Z:h,d=t.componentId,p=void 0===d?(i=t.displayName,o=t.parentComponentId,ts[a="string"!=typeof i?"sc":ei(i)]=(ts[a]||0)+1,l="".concat(a,"-").concat(ea(ec(Q+a+ts[a])>>>0)),o?"".concat(o,"-").concat(l):l):d,g=t.displayName,m=void 0===g?eh(e)?"styled.".concat(e):"Styled(".concat(e.displayName||e.name||"Component",")"):g,y=t.displayName&&t.componentId?"".concat(ei(t.displayName),"-").concat(t.componentId):t.componentId||p,v=u&&e.attrs?e.attrs.concat(f).filter(Boolean):f,w=t.shouldForwardProp;if(u&&e.shouldForwardProp){var b=e.shouldForwardProp;if(t.shouldForwardProp){var I=t.shouldForwardProp;w=function(e,t){return b(e,t)&&I(e,t)}}else w=b}var S=new tn(r,y,u?e.componentStyle:void 0);function _(e,t){return function(e,t,r){var i,o,a=e.attrs,l=e.componentStyle,u=e.defaultProps,c=e.foldedComponentIds,h=e.styledComponentId,f=e.target,d=s.useContext(ti),p=e3(),g=e.shouldForwardProp||p.shouldForwardProp,m=(void 0===(i=u)&&(i=ee),t.theme!==i.theme&&t.theme||d||i.theme||ee),y=function(e,t,r){for(var i,s=n(n({},t),{className:void 0,theme:r}),o=0;o<e.length;o+=1){var a=ex(i=e[o])?i(s):i;for(var l in a)s[l]="className"===l?eC(s[l],a[l]):"style"===l?n(n({},s[l]),a[l]):a[l]}return t.className&&(s.className=eC(s.className,t.className)),s}(a,t,m),v=y.as||f,w={};for(var b in y)void 0===y[b]||"$"===b[0]||"as"===b||"theme"===b&&y.theme===m||("forwardedAs"===b?w.as=y.forwardedAs:g&&!g(b,v)||(w[b]=y[b]));var I=(o=e3(),l.generateAndInjectStyles(y,o.styleSheet,o.stylis)),S=eC(c,h);return I&&(S+=" "+I),y.className&&(S+=" "+y.className),w[eh(v)&&!et.has(v)?"class":"className"]=S,w.ref=r,(0,s.createElement)(v,w)}(E,e,t)}_.displayName=m;var E=s.forwardRef(_);return E.attrs=v,E.componentStyle=S,E.displayName=m,E.shouldForwardProp=w,E.foldedComponentIds=u?eC(e.foldedComponentIds,e.styledComponentId):"",E.styledComponentId=y,E.target=u?e.target:e,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=u?function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++)(function e(t,r,n){if(void 0===n&&(n=!1),!n&&!eR(t)&&!Array.isArray(t))return r;if(Array.isArray(r))for(var i=0;i<r.length;i++)t[i]=e(t[i],r[i]);else if(eR(r))for(var i in r)t[i]=e(t[i],r[i]);return t})(e,t[n],!0);return e}({},e.defaultProps,t):t}}),eO(E,function(){return".".concat(E.styledComponentId)}),c&&function e(t,r,n){if("string"!=typeof r){if(eT){var i=eE(r);i&&i!==eT&&e(t,i,n)}var s=eI(r);eS&&(s=s.concat(eS(r)));for(var o=ew(t),a=ew(r),l=0;l<s.length;++l){var u=s[l];if(!(u in em||n&&n[u]||a&&u in a||o&&u in o)){var c=e_(r,u);try{eb(t,u,c)}catch(e){}}}}return t}(E,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function ta(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r}var tl=function(e){return Object.assign(e,{isCss:!0})};function tu(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return ex(e)||eR(e)?tl(te(ta(Z,i([e],t,!0)))):0===t.length&&1===e.length&&"string"==typeof e[0]?te(e):tl(te(ta(e,t)))}var tc=function(e){return function e(t,r,s){if(void 0===s&&(s=ee),!r)throw eN(1,r);var o=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t(r,s,tu.apply(void 0,i([e],n,!1)))};return o.attrs=function(i){return e(t,r,n(n({},s),{attrs:Array.prototype.concat(s.attrs,i).filter(Boolean)}))},o.withConfig=function(i){return e(t,r,n(n({},s),i))},o}(to,e)},th=tc;et.forEach(function(e){th[e]=tc(e)}),function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=tt(e),eJ.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,r,n){var i=n(eA(te(this.rules,t,r,n)),""),s=this.componentId+e;r.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,r,n){e>2&&eJ.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,n)}}(),function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=r.nc,i=eA([n&&'nonce="'.concat(n,'"'),"".concat(G,'="true"'),"".concat(W,'="').concat(Q,'"')].filter(Boolean)," ");return"<style ".concat(i,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw eN(2);return e._emitSheetCSS()},this.getStyleElement=function(){if(e.sealed)throw eN(2);var t,i=e.instance.toString();if(!i)return[];var o=((t={})[G]="",t[W]=Q,t.dangerouslySetInnerHTML={__html:i},t),a=r.nc;return a&&(o.nonce=a),[s.createElement("style",n({},o,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new eJ({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw eN(2);return s.createElement(e6,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw eN(3)}}()},5816:(e,t,r)=>{"use strict";let n,i;r.d(t,{Jn:()=>M,qX:()=>N,rh:()=>P,Xd:()=>O,Mq:()=>F,ZF:()=>j,KN:()=>V});var s=r(8463),o=r(3333),a=r(4444);let l=(e,t)=>t.some(t=>e instanceof t),u=new WeakMap,c=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,p={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return g(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(g(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&u.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(f.has(e))return f.get(e);let r="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(m(this),e),g(u.get(this))}:function(...e){return g(t.apply(m(this),e))}:function(e,...r){let n=t.call(m(this),e,...r);return h.set(n,e.sort?e.sort():[e]),g(n)}:(t instanceof IDBTransaction&&function(e){if(c.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});c.set(e,t)}(t),l(t,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,p):t;return r!==e&&(f.set(e,r),d.set(r,e)),r}let m=e=>d.get(e),y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],w=new Map;function b(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(w.get(t))return w.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=v.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||y.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),o=s.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),i&&s.done]))[0]};return w.set(t,s),s}p=(e=>({...e,get:(t,r,n)=>b(t,r)||e.get(t,r,n),has:(t,r)=>!!b(t,r)||e.has(t,r)}))(p);class I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let S="@firebase/app",_="0.10.15",E=new o.Yd("@firebase/app"),T="[DEFAULT]",x={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},k=new Map,C=new Map,A=new Map;function R(e,t){try{e.container.addComponent(t)}catch(r){E.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function O(e){let t=e.name;if(A.has(t))return E.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(A.set(t,e),k.values()))R(r,e);for(let t of C.values())R(t,e);return!0}function N(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function P(e){return void 0!==e.settings}let D=new a.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class L{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new s.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw D.create("app-deleted",{appName:this._name})}}let M="11.0.1";function j(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:T,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw D.create("bad-app-name",{appName:String(i)});if(r||(r=(0,a.aH)()),!r)throw D.create("no-options");let o=k.get(i);if(o){if((0,a.vZ)(r,o.options)&&(0,a.vZ)(n,o.config))return o;throw D.create("duplicate-app",{appName:i})}let l=new s.H0(i);for(let e of A.values())l.addComponent(e);let u=new L(r,n,l);return k.set(i,u),u}function F(e=T){let t=k.get(e);if(!t&&e===T&&(0,a.aH)())return j();if(!t)throw D.create("no-app",{appName:e});return t}function V(e,t,r){var n;let i=null!==(n=x[e])&&void 0!==n?n:e;r&&(i+=`-${r}`);let o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){let e=[`Unable to register library "${i}" with version "${t}":`];o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),E.warn(e.join(" "));return}O(new s.wA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}let U="firebase-heartbeat-store",B=null;function z(){return B||(B=(function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let o=indexedDB.open(e,1),a=g(o);return n&&o.addEventListener("upgradeneeded",e=>{n(g(o.result),e.oldVersion,e.newVersion,g(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(U)}catch(e){console.warn(e)}}}).catch(e=>{throw D.create("idb-open",{originalErrorMessage:e.message})})),B}async function $(e){try{let t=(await z()).transaction(U),r=await t.objectStore(U).get(K(e));return await t.done,r}catch(e){if(e instanceof a.ZR)E.warn(e.message);else{let t=D.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});E.warn(t.message)}}}async function q(e,t){try{let r=(await z()).transaction(U,"readwrite"),n=r.objectStore(U);await n.put(t,K(e)),await r.done}catch(e){if(e instanceof a.ZR)E.warn(e.message);else{let t=D.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});E.warn(t.message)}}}function K(e){return`${e.name}!${e.options.appId}`}class G{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new W(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=H();if((null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(e){E.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=H(),{heartbeatsToSend:r,unsentEntries:n}=function(e,t=1024){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Q(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Q(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),i=(0,a.L)(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return E.warn(e),""}}}function H(){return new Date().toISOString().substring(0,10)}class W{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.hl)()&&(0,a.eu)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await $(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return q(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return q(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function Q(e){return(0,a.L)(JSON.stringify({version:2,heartbeats:e})).length}O(new s.wA("platform-logger",e=>new I(e),"PRIVATE")),O(new s.wA("heartbeat",e=>new G(e),"PRIVATE")),V(S,_,""),V(S,_,"esm2017"),V("fire-js","")},8463:(e,t,r)=>{"use strict";r.d(t,{H0:()=>a,wA:()=>i});var n=r(4444);class i{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new n.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e===s?void 0:e,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3333:(e,t,r)=>{"use strict";var n;r.d(t,{Yd:()=>u,in:()=>n});let i=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(n||(n={}));let s={debug:n.DEBUG,verbose:n.VERBOSE,info:n.INFO,warn:n.WARN,error:n.ERROR,silent:n.SILENT},o=n.INFO,a={[n.DEBUG]:"log",[n.VERBOSE]:"log",[n.INFO]:"info",[n.WARN]:"warn",[n.ERROR]:"error"},l=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=a[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in n))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,n.DEBUG,...e),this._logHandler(this,n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,n.VERBOSE,...e),this._logHandler(this,n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,n.INFO,...e),this._logHandler(this,n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,n.WARN,...e),this._logHandler(this,n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,n.ERROR,...e),this._logHandler(this,n.ERROR,...e)}}},4055:(e,t,r)=>{"use strict";r.d(t,{Xb:()=>ti,v0:()=>r_,Aj:()=>tu,e5:()=>ts,w7:()=>tc,ck:()=>ta});var n=r(5816),i=r(4444),s=r(3333);function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var a=r(8463);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let u=new i.LL("auth","Firebase",l()),c=new s.Yd("@firebase/auth");function h(e,...t){c.logLevel<=s.in.ERROR&&c.error(`Auth (${n.Jn}): ${e}`,...t)}function f(e,...t){throw m(e,...t)}function d(e,...t){return m(e,...t)}function p(e,t,r){let n=Object.assign(Object.assign({},l()),{[t]:r});return new i.LL("auth","Firebase",n).create(t,{appName:e.name})}function g(e){return p(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function m(e,...t){if("string"!=typeof e){let r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return u.create(e,...t)}function y(e,t,...r){if(!e)throw m(t,...r)}function v(e){let t="INTERNAL ASSERTION FAILED: "+e;throw h(t),Error(t)}function w(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function b(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class I{constructor(e,t){var r;this.shortDelay=e,this.longDelay=t,r="Short delay should be less than long delay!",t>e||v(r),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===b()||"https:"===b()||(0,i.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function S(e,t){var r,n;r=e.emulator,n="Emulator should always be set here",r||v(n);let{url:i}=e.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class _{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void v("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void v("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void v("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let E={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},T=new I(3e4,6e4);function x(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function k(e,t,r,n,s={}){return C(e,s,async()=>{let s={},o={};n&&("GET"===t?o=n:s={body:JSON.stringify(n)});let a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);let u=Object.assign({method:t,headers:l},s);return(0,i.L_)()||(u.referrerPolicy="no-referrer"),_.fetch()(R(e,e.config.apiHost,r,a),u)})}async function C(e,t,r){e._canInitEmulator=!1;let n=Object.assign(Object.assign({},E),t);try{let t=new O(e),i=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();let s=await i.json();if("needConfirmation"in s)throw N(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{let[t,r]=(i.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw N(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw N(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw N(e,"user-disabled",s);let o=n[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(r)throw p(e,o,r);f(e,o)}}catch(t){if(t instanceof i.ZR)throw t;f(e,"network-request-failed",{message:String(t)})}}async function A(e,t,r,n,i={}){let s=await k(e,t,r,n,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{_serverResponse:s}),s}function R(e,t,r,n){let i=`${t}${r}?${n}`;return e.config.emulator?S(e.config,i):`${e.config.apiScheme}://${i}`}class O{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(d(this.auth,"network-request-failed")),T.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function N(e,t,r){let n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);let i=d(e,t,n);return i.customData._tokenResponse=r,i}function P(e){return void 0!==e&&void 0!==e.enterprise}class D{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return function(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function L(e,t){return k(e,"GET","/v2/recaptchaConfig",x(e,t))}async function M(e,t){return k(e,"POST","/v1/accounts:delete",t)}async function j(e,t){return k(e,"POST","/v1/accounts:lookup",t)}function F(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function V(e,t=!1){let r=(0,i.m9)(e),n=await r.getIdToken(t),s=B(n);y(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");let o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:n,authTime:F(U(s.auth_time)),issuedAtTime:F(U(s.iat)),expirationTime:F(U(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function U(e){return 1e3*Number(e)}function B(e){let[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return h("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,i.tV)(r);if(!e)return h("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return h("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function z(e){let t=B(e);return y(t,"internal-error"),y(void 0!==t.exp,"internal-error"),y(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function $(e,t,r=!1){if(r)return t;try{return await t}catch(t){throw t instanceof i.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class q{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(!e)return this.errorBackoff=3e4,Math.max(0,(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class K{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=F(this.lastLoginAt),this.creationTime=F(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function G(e){var t;let r=e.auth,n=await e.getIdToken(),i=await $(e,j(r,{idToken:n}));y(null==i?void 0:i.users.length,r,"internal-error");let s=i.users[0];e._notifyReloadListener(s);let o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?W(s.providerUserInfo):[],a=[...e.providerData.filter(e=>!o.some(t=>t.providerId===e.providerId)),...o],l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(null==a?void 0:a.length);Object.assign(e,{uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new K(s.createdAt,s.lastLoginAt),isAnonymous:!!l&&u})}async function H(e){let t=(0,i.m9)(e);await G(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function W(e){return e.map(e=>{var{providerId:t}=e,r=o(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Q(e,t){let r=await C(e,{},async()=>{let r=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:s}=e.config,o=R(e,n,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function J(e,t){return k(e,"POST","/v2/accounts:revokeToken",x(e,t))}class Y{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y(void 0!==e.idToken,"internal-error"),y(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):z(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");let t=z(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:n,expiresIn:i}=await Q(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){let{refreshToken:r,accessToken:n,expirationTime:i}=t,s=new Y;return r&&(y("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),n&&(y("string"==typeof n,"internal-error",{appName:e}),s.accessToken=n),i&&(y("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Y,this.toJSON())}_performRefresh(){return v("not implemented")}}function X(e,t){y("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Z{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new q(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new K(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await $(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return V(this,e)}reload(){return H(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new Z(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await G(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,n.rh)(this.auth.app))return Promise.reject(g(this.auth));let e=await this.getIdToken();return await $(this,M(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,s,o,a,l,u;let c=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(n=t.email)&&void 0!==n?n:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,d=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:I,providerData:S,stsTokenManager:_}=t;y(w&&_,e,"internal-error");let E=Y.fromJSON(this.name,_);y("string"==typeof w,e,"internal-error"),X(c,e.name),X(h,e.name),y("boolean"==typeof b,e,"internal-error"),y("boolean"==typeof I,e,"internal-error"),X(f,e.name),X(d,e.name),X(p,e.name),X(g,e.name),X(m,e.name),X(v,e.name);let T=new Z({uid:w,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:I,photoURL:d,phoneNumber:f,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:v});return S&&Array.isArray(S)&&(T.providerData=S.map(e=>Object.assign({},e))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t,r=!1){let n=new Y;n.updateFromServerResponse(t);let i=new Z({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await G(i),i}static async _fromGetAccountInfoResponse(e,t,r){let n=t.users[0];y(void 0!==n.localId,"internal-error");let i=void 0!==n.providerUserInfo?W(n.providerUserInfo):[],s=!(n.email&&n.passwordHash)&&!(null==i?void 0:i.length),o=new Y;o.updateFromIdToken(r);let a=new Z({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return Object.assign(a,{uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new K(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(null==i?void 0:i.length)}),a}}let ee=new Map;function et(e){var t,r;t="Expected a class definition",e instanceof Function||v(t);let n=ee.get(e);return n?(r="Instance stored in cache mismatched with class",n instanceof e||v(r)):(n=new e,ee.set(e,n)),n}class er{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function en(e,t,r){return`firebase:${e}:${t}:${r}`}er.type="NONE";class ei{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:n,name:i}=this.auth;this.fullUserKey=en(this.userKey,n.apiKey,i),this.fullPersistenceKey=en("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?Z._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ei(et(er),e,r);let n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),i=n[0]||et(er),s=en(r,e.config.apiKey,e.name),o=null;for(let r of t)try{let t=await r._get(s);if(t){let n=Z._fromJSON(e,t);r!==i&&(o=n),i=r;break}}catch(e){}let a=n.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length&&(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new ei(i,e,r)}}function es(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eu(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";{if(t.includes("edge/"))return"Edge";if(eo(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(eh(t))return"Blackberry";if(ef(t))return"Webos";if(ea(t))return"Safari";if((t.includes("chrome/")||el(t))&&!t.includes("edge/"))return"Chrome";if(ec(t))return"Android";let r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==r?void 0:r.length)===2)return r[1]}return"Other"}function eo(e=(0,i.z$)()){return/firefox\//i.test(e)}function ea(e=(0,i.z$)()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function el(e=(0,i.z$)()){return/crios\//i.test(e)}function eu(e=(0,i.z$)()){return/iemobile/i.test(e)}function ec(e=(0,i.z$)()){return/android/i.test(e)}function eh(e=(0,i.z$)()){return/blackberry/i.test(e)}function ef(e=(0,i.z$)()){return/webos/i.test(e)}function ed(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ep(e=(0,i.z$)()){return ed(e)||ec(e)||ef(e)||eh(e)||/windows phone/i.test(e)||eu(e)}function eg(e,t=[]){let r;switch(e){case"Browser":r=es((0,i.z$)());break;case"Worker":r=`${es((0,i.z$)())}-${e}`;break;default:r=e}let s=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${n.Jn}/${s}`}class em{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=t=>new Promise((r,n)=>{try{let n=e(t);r(n)}catch(e){n(e)}});r.onAbort=t,this.queue.push(r);let n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}async function ey(e,t={}){return k(e,"GET","/v2/passwordPolicy",x(e,t))}class ev{constructor(e){var t,r,n,i;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,i,s,o;let a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(r=a.meetsMaxPasswordLength)||void 0===r||r),a.isValid&&(a.isValid=null===(n=a.containsLowercaseLetter)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ew{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eI(this),this.idTokenSubscription=new eI(this),this.beforeStateQueue=new em(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=et(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await ei.create(this,e),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await j(this,{idToken:e}),r=await Z._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,n.rh)(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,n=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);(!r||r===n)&&(null==o?void 0:o.user)&&(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return(y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await G(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,n.rh)(this.app))return Promise.reject(g(this));let t=e?(0,i.m9)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,n.rh)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,n.rh)(this.app)?Promise.reject(g(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(et(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new ev(await ey(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await J(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&et(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await ei.create(this,[et(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return(this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};let i="function"==typeof t?t:t.next.bind(t),s=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"==typeof t){let i=e.addObserver(t,r,n);return()=>{s=!0,i()}}{let r=e.addObserver(t);return()=>{s=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;let t=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){c.logLevel<=s.in.WARN&&c.warn(`Auth (${n.Jn}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function eb(e){return(0,i.m9)(e)}class eI{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eS={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e_(e){return`__${e}${Math.floor(1e6*Math.random())}`}class eE{constructor(){this.enterprise=new eT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}let ex="NO_RECAPTCHA";class ek{constructor(e){this.type="recaptcha-enterprise",this.auth=eb(e)}async verify(e="verify",t=!1){async function r(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,r)=>{L(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0===n.recaptchaKey)r(Error("recaptcha Enterprise site key undefined"));else{let r=new D(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}}).catch(e=>{r(e)})})}function n(t,r,n){let i=window.grecaptcha;P(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{r(e)}).catch(()=>{r(ex)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eE().execute("siteKey",{action:"verify"}):new Promise((e,i)=>{r(this.auth).then(r=>{if(!t&&P(window.grecaptcha))n(r,e,i);else{var s;if("undefined"==typeof window){i(Error("RecaptchaVerifier is only supported in browser"));return}let t=eS.recaptchaEnterpriseScript;0!==t.length&&(t+=r),(s=t,eS.loadJS(s)).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function eC(e,t,r,n=!1,i=!1){let s;let o=new ek(e);if(i)s=ex;else try{s=await o.verify(r)}catch(e){s=await o.verify(r,!0)}let a=Object.assign({},t);if("mfaSmsEnrollment"===r||"mfaSmsSignIn"===r){if("phoneEnrollmentInfo"in a){let e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function eA(e,t,r,n,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s||!s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return n(e,t).catch(async i=>{if("auth/missing-recaptcha-token"!==i.code)return Promise.reject(i);{console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let i=await eC(e,t,r,"getOobCode"===r);return n(e,i)}});{let i=await eC(e,t,r,"getOobCode"===r);return n(e,i)}}if("PHONE_PROVIDER"!==i)return Promise.reject(i+" provider is not supported.");if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){let i=await eC(e,t,r);return n(e,i).catch(async i=>{var s;if((null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);let i=await eC(e,t,r,!1,!0);return n(e,i)}return Promise.reject(i)})}{let i=await eC(e,t,r,!1,!0);return n(e,i)}}async function eR(e){let t=eb(e),r=new D(await L(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new ek(t).verify()}function eO(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eN(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class eP{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return v("not implemented")}_getIdTokenResponse(e){return v("not implemented")}_linkToIdToken(e,t){return v("not implemented")}_getReauthenticationResolver(e){return v("not implemented")}}async function eD(e,t){return k(e,"POST","/v1/accounts:signUp",t)}async function eL(e,t){return A(e,"POST","/v1/accounts:signInWithPassword",x(e,t))}async function eM(e,t){return A(e,"POST","/v1/accounts:signInWithEmailLink",x(e,t))}async function ej(e,t){return A(e,"POST","/v1/accounts:signInWithEmailLink",x(e,t))}class eF extends eP{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new eF(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new eF(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return eA(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",eL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return eM(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return eA(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ej(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function eV(e,t){return A(e,"POST","/v1/accounts:signInWithIdp",x(e,t))}class eU extends eP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new eU(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,i=o(t,["providerId","signInMethod"]);if(!r||!n)return null;let s=new eU(r,n);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return eV(e,this.buildRequest())}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,eV(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,eV(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}async function eB(e,t){return k(e,"POST","/v1/accounts:sendVerificationCode",x(e,t))}async function ez(e,t){return A(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,t))}async function e$(e,t){let r=await A(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,t));if(r.temporaryProof)throw N(e,"account-exists-with-different-credential",r);return r}let eq={USER_NOT_FOUND:"user-not-found"};async function eK(e,t){return A(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),eq)}class eG extends eP{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eG({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eG({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return ez(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return e$(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return eK(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return r||t||n||i?new eG({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}):null}}class eH{constructor(e){var t,r,n,s,o,a;let l=(0,i.zd)((0,i.pd)(e)),u=null!==(t=l.apiKey)&&void 0!==t?t:null,c=null!==(r=l.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(n=l.mode)&&void 0!==n?n:null);y(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){let t=function(e){let t=(0,i.zd)((0,i.pd)(e)).link,r=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,n=(0,i.zd)((0,i.pd)(e)).deep_link_id;return(n?(0,i.zd)((0,i.pd)(n)).link:null)||n||r||t||e}(e);try{return new eH(t)}catch(e){return null}}}class eW{constructor(){this.providerId=eW.PROVIDER_ID}static credential(e,t){return eF._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=eH.parseLink(t);return y(r,"argument-error"),eF._fromEmailAndCode(e,r.code,r.tenantId)}}eW.PROVIDER_ID="password",eW.EMAIL_PASSWORD_SIGN_IN_METHOD="password",eW.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class eQ{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class eJ extends eQ{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class eY extends eJ{constructor(){super("facebook.com")}static credential(e){return eU._fromParams({providerId:eY.PROVIDER_ID,signInMethod:eY.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eY.credentialFromTaggedObject(e)}static credentialFromError(e){return eY.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eY.credential(e.oauthAccessToken)}catch(e){return null}}}eY.FACEBOOK_SIGN_IN_METHOD="facebook.com",eY.PROVIDER_ID="facebook.com";class eX extends eJ{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eU._fromParams({providerId:eX.PROVIDER_ID,signInMethod:eX.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return eX.credentialFromTaggedObject(e)}static credentialFromError(e){return eX.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return eX.credential(t,r)}catch(e){return null}}}eX.GOOGLE_SIGN_IN_METHOD="google.com",eX.PROVIDER_ID="google.com";class eZ extends eJ{constructor(){super("github.com")}static credential(e){return eU._fromParams({providerId:eZ.PROVIDER_ID,signInMethod:eZ.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eZ.credentialFromTaggedObject(e)}static credentialFromError(e){return eZ.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eZ.credential(e.oauthAccessToken)}catch(e){return null}}}eZ.GITHUB_SIGN_IN_METHOD="github.com",eZ.PROVIDER_ID="github.com";class e0 extends eJ{constructor(){super("twitter.com")}static credential(e,t){return eU._fromParams({providerId:e0.PROVIDER_ID,signInMethod:e0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return e0.credentialFromTaggedObject(e)}static credentialFromError(e){return e0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return e0.credential(t,r)}catch(e){return null}}}async function e1(e,t){return A(e,"POST","/v1/accounts:signUp",x(e,t))}e0.TWITTER_SIGN_IN_METHOD="twitter.com",e0.PROVIDER_ID="twitter.com";class e2{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){return new e2({user:await Z._fromIdTokenResponse(e,r,n),providerId:e5(r),_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){return await e._updateTokensIfNecessary(r,!0),new e2({user:e,providerId:e5(r),_tokenResponse:r,operationType:t})}}function e5(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class e3 extends i.ZR{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,e3.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new e3(e,t,r,n)}}function e6(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw e3._fromErrorAndOperation(e,r,t,n);throw r})}async function e4(e,t,r=!1){let n=await $(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return e2._forOperation(e,"link",n)}async function e8(e,t,r=!1){let{auth:i}=e;if((0,n.rh)(i.app))return Promise.reject(g(i));let s="reauthenticate";try{let n=await $(e,e6(i,s,t,e),r);y(n.idToken,i,"internal-error");let o=B(n.idToken);y(o,i,"internal-error");let{sub:a}=o;return y(e.uid===a,i,"user-mismatch"),e2._forOperation(e,s,n)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&f(i,"user-mismatch"),e}}async function e7(e,t,r=!1){if((0,n.rh)(e.app))return Promise.reject(g(e));let i="signIn",s=await e6(e,i,t),o=await e2._fromIdTokenResponse(e,i,s);return r||await e._updateCurrentUser(o.user),o}async function e9(e,t){return e7(eb(e),t)}class te{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?tt._fromServerResponse(e,t):"totpInfo"in t?tr._fromServerResponse(e,t):f(e,"internal-error")}}class tt extends te{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new tt(t)}}class tr extends te{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new tr(t)}}async function tn(e){let t=eb(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ti(e,t,r){if((0,n.rh)(e.app))return Promise.reject(g(e));let i=eb(e),s=eA(i,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e1,"EMAIL_PASSWORD_PROVIDER"),o=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tn(e),t}),a=await e2._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function ts(e,t,r){return(0,n.rh)(e.app)?Promise.reject(g(e)):e9((0,i.m9)(e),eW.credential(t,r)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tn(e),t})}async function to(e,t){return k(e,"POST","/v1/accounts:update",t)}async function ta(e,{displayName:t,photoURL:r}){if(void 0===t&&void 0===r)return;let n=(0,i.m9)(e),s=await n.getIdToken(),o=await $(n,to(n.auth,{idToken:s,displayName:t,photoUrl:r,returnSecureToken:!0}));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;let a=n.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=n.displayName,a.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}class tl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}function tu(e,t,r,n){return(0,i.m9)(e).onAuthStateChanged(t,r,n)}function tc(e){return(0,i.m9)(e).signOut()}class th{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new th("enroll",e,t)}static _fromMfaPendingCredential(e){return new th("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return th._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(r=e.multiFactorSession)||void 0===r?void 0:r.idToken)return th._fromIdtoken(e.multiFactorSession.idToken)}return null}}class tf{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){let r=eb(e),n=t.customData._serverResponse,i=(n.mfaInfo||[]).map(e=>te._fromServerResponse(r,e));y(n.mfaPendingCredential,r,"internal-error");let s=th._fromMfaPendingCredential(n.mfaPendingCredential);return new tf(s,i,async e=>{let i=await e._process(r,s);delete n.mfaInfo,delete n.mfaPendingCredential;let o=Object.assign(Object.assign({},n),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":let a=await e2._fromIdTokenResponse(r,t.operationType,o);return await r._updateCurrentUser(a.user),a;case"reauthenticate":return y(t.user,r,"internal-error"),e2._forOperation(t.user,t.operationType,o);default:f(r,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}function td(e,t){return k(e,"POST","/v2/accounts/mfaEnrollment:start",x(e,t))}class tp{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>te._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new tp(e)}async getSession(){return th._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){let r=await this.getSession(),n=await $(this.user,e._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(n),this.user.reload()}async unenroll(e){let t="string"==typeof e?e:e.uid,r=await this.user.getIdToken();try{var n,i;let e=await $(this.user,(n=this.user.auth,i={idToken:r,mfaEnrollmentId:t},k(n,"POST","/v2/accounts/mfaEnrollment:withdraw",x(n,i))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}new WeakMap;let tg="__sak";class tm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(tg,"1"),this.storage.removeItem(tg),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ty extends tm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ep(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});return}let r=e.key;t?this.detachListener():this.stopPolling();let n=()=>{let e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},s=this.storage.getItem(r);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ty.type="LOCAL";class tv extends tm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tv.type="SESSION";class tw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let r=new tw(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:r,data:n}=e.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:r});let s=Array.from(i).map(async t=>t(e.origin,n)),o=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function tb(e="",t=10){let r="";for(let e=0;e<t;e++)r+=Math.floor(10*Math.random());return e+r}tw.receivers=[];class tI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let n,i;let s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((o,a)=>{let l=tb("",20);s.port1.start();let u=setTimeout(()=>{a(Error("unsupported_event"))},r);i={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),n=setTimeout(()=>{a(Error("timeout"))},3e3);break;case"done":clearTimeout(n),o(e.data.response);break;default:clearTimeout(u),clearTimeout(n),a(Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function tS(){return window}function t_(){return void 0!==tS().WorkerGlobalScope&&"function"==typeof tS().importScripts}async function tE(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}let tT="firebaseLocalStorageDb",tx="firebaseLocalStorage",tk="fbase_key";class tC{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tA(e,t){return e.transaction([tx],t?"readwrite":"readonly").objectStore(tx)}function tR(){let e=indexedDB.open(tT,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(tx,{keyPath:tk})}catch(e){r(e)}}),e.addEventListener("success",async()=>{let r=e.result;r.objectStoreNames.contains(tx)?t(r):(r.close(),await new tC(indexedDB.deleteDatabase(tT)).toPromise(),t(await tR()))})})}async function tO(e,t,r){return new tC(tA(e,!0).put({[tk]:t,value:r})).toPromise()}async function tN(e,t){let r=tA(e,!1).get(t),n=await new tC(r).toPromise();return void 0===n?null:n.value}function tP(e,t){return new tC(tA(e,!0).delete(t)).toPromise()}class tD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await tR()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tw._getInstance(t_()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await tE(),!this.activeServiceWorker)return;this.sender=new tI(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await tR();return await tO(e,tg,"1"),await tP(e,tg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tO(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>tN(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tP(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new tC(tA(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],r=new Set;if(0!==e.length)for(let{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(let e of Object.keys(this.localCache))this.localCache[e]&&!r.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}function tL(e,t){return k(e,"POST","/v2/accounts/mfaSignIn:start",x(e,t))}tD.type="LOCAL",e_("rcb"),new I(3e4,6e4);let tM="recaptcha";async function tj(e,t,r){var n;if(!e._getRecaptchaConfig())try{await eR(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"==typeof t?{phoneNumber:t}:t,"session"in i){let t=i.session;if("phoneNumber"in i){y("enroll"===t.type,e,"internal-error");let n={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===ex){y((null==r?void 0:r.type)===tM,e,"argument-error");let n=await tF(e,t,r);return td(e,n)}return td(e,t)},o=eA(e,n,"mfaSmsEnrollment",s,"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");let s=(null===(n=i.multiFactorHint)||void 0===n?void 0:n.uid)||i.multiFactorUid;y(s,e,"missing-multi-factor-info");let o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===ex){y((null==r?void 0:r.type)===tM,e,"argument-error");let n=await tF(e,t,r);return tL(e,n)}return tL(e,t)},l=eA(e,o,"mfaSmsSignIn",a,"PHONE_PROVIDER");return(await l.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{let t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},n=async(e,t)=>{if(t.captchaResponse===ex){y((null==r?void 0:r.type)===tM,e,"argument-error");let n=await tF(e,t,r);return eB(e,n)}return eB(e,t)},s=eA(e,t,"sendVerificationCode",n,"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{null==r||r._reset()}}async function tF(e,t,r){y(r.type===tM,e,"argument-error");let n=await r.verify();y("string"==typeof n,e,"argument-error");let i=Object.assign({},t);if("phoneEnrollmentInfo"in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,r=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n,captchaResponse:t,clientType:r,recaptchaVersion:s}}),i}if(!("phoneSignInInfo"in i))return Object.assign(i,{recaptchaToken:n}),i;{let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,r=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:e,clientType:t,recaptchaVersion:r}}),i}}class tV{constructor(e){this.providerId=tV.PROVIDER_ID,this.auth=eb(e)}verifyPhoneNumber(e,t){return tj(this.auth,e,(0,i.m9)(t))}static credential(e,t){return eG._fromVerification(e,t)}static credentialFromResult(e){return tV.credentialFromTaggedObject(e)}static credentialFromError(e){return tV.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?eG._fromTokenResponse(t,r):null}}tV.PROVIDER_ID="phone",tV.PHONE_SIGN_IN_METHOD="phone";class tU extends eP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eV(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eV(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eV(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tB(e){return e7(e.auth,new tU(e),e.bypassAuthState)}function tz(e){let{auth:t,user:r}=e;return y(r,t,"internal-error"),e8(r,new tU(e),e.bypassAuthState)}async function t$(e){let{auth:t,user:r}=e;return y(r,t,"internal-error"),e4(r,new tU(e),e.bypassAuthState)}class tq{constructor(e,t,r,n,i=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:n,tenantId:i,error:s,type:o}=e;if(s){this.reject(s);return}let a={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tB;case"linkViaPopup":case"linkViaRedirect":return t$;case"reauthViaPopup":case"reauthViaRedirect":return tz;default:f(this.auth,"internal-error")}}resolve(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||v(r),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||v(r),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let tK=new I(2e3,1e4);class tG extends tq{constructor(e,t,r,n,i){super(e,t,n,i),this.provider=r,this.authWindow=null,this.pollId=null,tG.currentPopupAction&&tG.currentPopupAction.cancel(),tG.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||v(t);let r=tb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],r),this.authWindow.associatedEvent=r,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(d(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(d(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tG.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if(null===(r=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===r?void 0:r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(d(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tK.get())};e()}}tG.currentPopupAction=null;let tH=new Map;class tW extends tq{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=tH.get(this.auth._key());if(!e){try{let t=await tQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}tH.set(this.auth._key(),e)}return this.bypassAuthState||tH.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tQ(e,t){let r=tX(t),n=tY(e);if(!await n._isAvailable())return!1;let i=await n._get(r)==="true";return await n._remove(r),i}function tJ(e,t){tH.set(e._key(),t)}function tY(e){return et(e._redirectPersistence)}function tX(e){return en("pendingRedirect",e.config.apiKey,e.name)}async function tZ(e,t,r=!1){var i,s;if((0,n.rh)(e.app))return Promise.reject(g(e));let o=eb(e),a=(i=o,(s=t)?et(s):(y(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)),l=new tW(o,a,r),u=await l.execute();return u&&!r&&(delete u.user._redirectEventId,await o._persistUserIfCurrent(u.user),await o._setRedirectUser(null,t)),u}class t0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t2(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!t2(e)){let n=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(d(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(t1(e))}saveEventToCache(e){this.cachedEventUids.add(t1(e)),this.lastProcessedEventTime=Date.now()}}function t1(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function t2({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}async function t5(e,t={}){return k(e,"GET","/v1/projects",t)}let t3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t6=/^https?/;async function t4(e){if(e.config.emulator)return;let{authorizedDomains:t}=await t5(e);for(let e of t)try{if(function(e){let t=w(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){let i=new URL(e);return""===i.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===n}if(!t6.test(r))return!1;if(t3.test(e))return n===e;let i=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}(e))return}catch(e){}f(e,"unauthorized-domain")}let t8=new I(3e4,6e4);function t7(){let e=tS().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let t9=null,re=new I(5e3,15e3),rt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function rn(e){let t=await (t9=t9||new Promise((t,r)=>{var n,i,s,o;function a(){t7(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{t7(),r(d(e,"network-request-failed"))},timeout:t8.get()})}if(null===(i=null===(n=tS().gapi)||void 0===n?void 0:n.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else if(null===(s=tS().gapi)||void 0===s?void 0:s.load)a();else{let t=e_("iframefcb");return tS()[t]=()=>{gapi.load?a():r(d(e,"network-request-failed"))},(o=`${eS.gapiScript}?onload=${t}`,eS.loadJS(o)).catch(e=>r(e))}}).catch(e=>{throw t9=null,e})),r=tS().gapi;return y(r,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;y(t.authDomain,e,"auth-domain-config-required");let r=t.emulator?S(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:n.Jn},o=rr.get(e.config.apiHost);o&&(s.eid=o);let a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${r}?${(0,i.xO)(s).slice(1)}`}(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rt,dontclear:!0},t=>new Promise(async(r,n)=>{await t.restyle({setHideOnLeave:!1});let i=d(e,"network-request-failed"),s=tS().setTimeout(()=>{n(i)},re.get());function o(){tS().clearTimeout(s),r(t)}t.ping(o).then(o,()=>{n(i)})}))}let ri={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let ro=encodeURIComponent("fac");async function ra(e,t,r,s,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");let l={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:s,v:n.Jn,eventId:o};if(t instanceof eQ)for(let[r,n]of(t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(a||{})))l[r]=n;if(t instanceof eJ){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}for(let t of(e.tenantId&&(l.tid=e.tenantId),Object.keys(l)))void 0===l[t]&&delete l[t];let u=await e._getAppCheckToken(),c=u?`#${ro}=${encodeURIComponent(u)}`:"";return`${function({config:e}){return e.emulator?S(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(l).slice(1)}${c}`}let rl="webStorageSupport";class ru{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tv,this._completeRedirectFn=tZ,this._overrideRedirectResult=tJ}async _openPopup(e,t,r,n){var s,o,a;o=null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,a="_initialize() not called before _openPopup()",o||v(a);let l=await ra(e,t,r,w(),n);return function(e,t,r,n=500,s=600){let o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString(),l="",u=Object.assign(Object.assign({},ri),{width:n.toString(),height:s.toString(),top:o,left:a}),c=(0,i.z$)().toLowerCase();r&&(l=el(c)?"_blank":r),eo(c)&&(t=t||"http://localhost",u.scrollbars="yes");let h=Object.entries(u).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=(0,i.z$)()){var t;return ed(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==l)return function(e,t){let r=document.createElement("a");r.href=e,r.target=t;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}(t||"",l),new rs(null);let f=window.open(t||"",l,h);y(f,e,"popup-blocked");try{f.focus()}catch(e){}return new rs(f)}(e,l,tb())}async _openRedirect(e,t,r,n){var i;return await this._originValidation(e),i=await ra(e,t,r,w(),n),tS().location.href=i,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var r;let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(r="If manager is not set, promise should be",n||v(r),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await rn(e),r=new t0(e);return t.register("authEvent",t=>(y(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rl,{type:rl},r=>{var n;let i=null===(n=null==r?void 0:r[0])||void 0===n?void 0:n[rl];void 0!==i&&t(!!i),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=t4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ep()||ea()||ed()}}class rc{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return v("unexpected MultiFactorSessionType")}}}class rh extends rc{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new rh(e)}_finalizeEnroll(e,t,r){return k(e,"POST","/v2/accounts/mfaEnrollment:finalize",x(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,t){return k(e,"POST","/v2/accounts/mfaSignIn:finalize",x(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class rf{constructor(){}static assertion(e){return rh._fromCredential(e)}}rf.FACTOR_ID="phone";class rd{static assertionForEnrollment(e,t){return rp._fromSecret(e,t)}static assertionForSignIn(e,t){return rp._fromEnrollmentId(e,t)}static async generateSecret(e){var t,r;y(void 0!==(null===(t=e.user)||void 0===t?void 0:t.auth),"internal-error");let n=await k(r=e.user.auth,"POST","/v2/accounts/mfaEnrollment:start",x(r,{idToken:e.credential,totpEnrollmentInfo:{}}));return rg._fromStartTotpMfaEnrollmentResponse(n,e.user.auth)}}rd.FACTOR_ID="totp";class rp extends rc{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new rp(t,void 0,e)}static _fromEnrollmentId(e,t){return new rp(t,e)}async _finalizeEnroll(e,t,r){return y(void 0!==this.secret,e,"argument-error"),k(e,"POST","/v2/accounts/mfaEnrollment:finalize",x(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,t){y(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let r={verificationCode:this.otp};return k(e,"POST","/v2/accounts/mfaSignIn:finalize",x(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}))}}class rg{constructor(e,t,r,n,i,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=n,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,t){return new rg(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let n=!1;return(rm(e)||rm(t))&&(n=!0),n&&(rm(e)&&(e=(null===(r=this.auth.currentUser)||void 0===r?void 0:r.email)||"unknownuser"),rm(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function rm(e){return void 0===e||(null==e?void 0:e.length)===0}var ry="@firebase/auth",rv="1.8.0";class rw{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let rb=(0,i.Pz)("authIdTokenMaxAge")||300,rI=null,rS=e=>async t=>{let r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>rb)return;let i=null==r?void 0:r.token;rI!==i&&(rI=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function r_(e=(0,n.Mq)()){let t=(0,n.qX)(e,"auth");if(t.isInitialized())return t.getImmediate();let r=function(e,t){let r=(0,n.qX)(e,"auth");if(r.isInitialized()){let e=r.getImmediate(),n=r.getOptions();if((0,i.vZ)(n,null!=t?t:{}))return e;f(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:ru,persistence:[tD,ty,tv]}),s=(0,i.Pz)("authTokenSyncURL");if(s&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(s,location.origin);if(location.origin===e.origin){var o,a;let t=rS(e.toString());o=()=>t(r.currentUser),(0,i.m9)(r).beforeAuthStateChanged(t,o),a=e=>t(e),(0,i.m9)(r).onIdTokenChanged(a,void 0,void 0)}}let l=(0,i.q4)("auth");return l&&function(e,t,r){let n=eb(e);y(n._canInitEmulator,n,"emulator-config-failed"),y(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let i=eO(t),{host:s,port:o}=function(e){let t=eO(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};let n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){let e=i[1];return{host:e,port:eN(n.substr(e.length+1))}}{let[e,t]=n.split(":");return{host:e,port:eN(t)}}}(t),a=null===o?"":`:${o}`;n.config.emulator={url:`${i}//${s}${a}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(r,`http://${l}`),r}eS={loadJS:e=>new Promise((t,r)=>{let n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=e=>{let t=d("internal-error");t.customData=e,r(t)},n.type="text/javascript",n.charset="UTF-8",(function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document})().appendChild(n)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},function(e){(0,n.Xd)(new a.wA("auth",(t,{options:r})=>{let n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;y(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});let l=new ew(n,i,s,{apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eg(e)});return function(e,t){let r=(null==t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(et);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null==t?void 0:t.popupRedirectResolver)}(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,n.Xd)(new a.wA("auth-internal",e=>new rw(eb(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,n.KN)(ry,rv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(e)),(0,n.KN)(ry,rv,"esm2017")}("Browser")},109:(e,t,r)=>{"use strict";r.d(t,{ET:()=>a9,hJ:()=>ad,ad:()=>am});var n,i,s,o,a,l,u,c,h,f,d,p,g,m,y=r(5816),v=r(8463),w=r(3333),b=r(4444),I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},S={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function t(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^r&(i^s))+n[0]+0xd76aa478&0xffffffff;o=s+(i^(t=r+(o<<7&0xffffffff|o>>>25))&(r^i))+n[1]+0xe8c7b756&0xffffffff,o=i+(r^(s=t+(o<<12&0xffffffff|o>>>20))&(t^r))+n[2]+0x242070db&0xffffffff,o=r+(t^(i=s+(o<<17&0xffffffff|o>>>15))&(s^t))+n[3]+0xc1bdceee&0xffffffff,o=t+(s^(r=i+(o<<22&0xffffffff|o>>>10))&(i^s))+n[4]+0xf57c0faf&0xffffffff,o=s+(i^(t=r+(o<<7&0xffffffff|o>>>25))&(r^i))+n[5]+0x4787c62a&0xffffffff,o=i+(r^(s=t+(o<<12&0xffffffff|o>>>20))&(t^r))+n[6]+0xa8304613&0xffffffff,o=r+(t^(i=s+(o<<17&0xffffffff|o>>>15))&(s^t))+n[7]+0xfd469501&0xffffffff,o=t+(s^(r=i+(o<<22&0xffffffff|o>>>10))&(i^s))+n[8]+0x698098d8&0xffffffff,o=s+(i^(t=r+(o<<7&0xffffffff|o>>>25))&(r^i))+n[9]+0x8b44f7af&0xffffffff,o=i+(r^(s=t+(o<<12&0xffffffff|o>>>20))&(t^r))+n[10]+0xffff5bb1&0xffffffff,o=r+(t^(i=s+(o<<17&0xffffffff|o>>>15))&(s^t))+n[11]+0x895cd7be&0xffffffff,o=t+(s^(r=i+(o<<22&0xffffffff|o>>>10))&(i^s))+n[12]+0x6b901122&0xffffffff,o=s+(i^(t=r+(o<<7&0xffffffff|o>>>25))&(r^i))+n[13]+0xfd987193&0xffffffff,o=i+(r^(s=t+(o<<12&0xffffffff|o>>>20))&(t^r))+n[14]+0xa679438e&0xffffffff,o=r+(t^(i=s+(o<<17&0xffffffff|o>>>15))&(s^t))+n[15]+0x49b40821&0xffffffff,r=i+(o<<22&0xffffffff|o>>>10),o=t+(i^s&(r^i))+n[1]+0xf61e2562&0xffffffff,t=r+(o<<5&0xffffffff|o>>>27),o=s+(r^i&(t^r))+n[6]+0xc040b340&0xffffffff,s=t+(o<<9&0xffffffff|o>>>23),o=i+(t^r&(s^t))+n[11]+0x265e5a51&0xffffffff,i=s+(o<<14&0xffffffff|o>>>18),o=r+(s^t&(i^s))+n[0]+0xe9b6c7aa&0xffffffff,r=i+(o<<20&0xffffffff|o>>>12),o=t+(i^s&(r^i))+n[5]+0xd62f105d&0xffffffff,t=r+(o<<5&0xffffffff|o>>>27),o=s+(r^i&(t^r))+n[10]+0x2441453&0xffffffff,s=t+(o<<9&0xffffffff|o>>>23),o=i+(t^r&(s^t))+n[15]+0xd8a1e681&0xffffffff,i=s+(o<<14&0xffffffff|o>>>18),o=r+(s^t&(i^s))+n[4]+0xe7d3fbc8&0xffffffff,r=i+(o<<20&0xffffffff|o>>>12),o=t+(i^s&(r^i))+n[9]+0x21e1cde6&0xffffffff,t=r+(o<<5&0xffffffff|o>>>27),o=s+(r^i&(t^r))+n[14]+0xc33707d6&0xffffffff,s=t+(o<<9&0xffffffff|o>>>23),o=i+(t^r&(s^t))+n[3]+0xf4d50d87&0xffffffff,i=s+(o<<14&0xffffffff|o>>>18),o=r+(s^t&(i^s))+n[8]+0x455a14ed&0xffffffff,r=i+(o<<20&0xffffffff|o>>>12),o=t+(i^s&(r^i))+n[13]+0xa9e3e905&0xffffffff,t=r+(o<<5&0xffffffff|o>>>27),o=s+(r^i&(t^r))+n[2]+0xfcefa3f8&0xffffffff,s=t+(o<<9&0xffffffff|o>>>23),o=i+(t^r&(s^t))+n[7]+0x676f02d9&0xffffffff,i=s+(o<<14&0xffffffff|o>>>18),o=r+(s^t&(i^s))+n[12]+0x8d2a4c8a&0xffffffff,o=t+((r=i+(o<<20&0xffffffff|o>>>12))^i^s)+n[5]+0xfffa3942&0xffffffff,o=s+((t=r+(o<<4&0xffffffff|o>>>28))^r^i)+n[8]+0x8771f681&0xffffffff,o=i+((s=t+(o<<11&0xffffffff|o>>>21))^t^r)+n[11]+0x6d9d6122&0xffffffff,o=r+((i=s+(o<<16&0xffffffff|o>>>16))^s^t)+n[14]+0xfde5380c&0xffffffff,o=t+((r=i+(o<<23&0xffffffff|o>>>9))^i^s)+n[1]+0xa4beea44&0xffffffff,o=s+((t=r+(o<<4&0xffffffff|o>>>28))^r^i)+n[4]+0x4bdecfa9&0xffffffff,o=i+((s=t+(o<<11&0xffffffff|o>>>21))^t^r)+n[7]+0xf6bb4b60&0xffffffff,o=r+((i=s+(o<<16&0xffffffff|o>>>16))^s^t)+n[10]+0xbebfbc70&0xffffffff,o=t+((r=i+(o<<23&0xffffffff|o>>>9))^i^s)+n[13]+0x289b7ec6&0xffffffff,o=s+((t=r+(o<<4&0xffffffff|o>>>28))^r^i)+n[0]+0xeaa127fa&0xffffffff,o=i+((s=t+(o<<11&0xffffffff|o>>>21))^t^r)+n[3]+0xd4ef3085&0xffffffff,o=r+((i=s+(o<<16&0xffffffff|o>>>16))^s^t)+n[6]+0x4881d05&0xffffffff,o=t+((r=i+(o<<23&0xffffffff|o>>>9))^i^s)+n[9]+0xd9d4d039&0xffffffff,o=s+((t=r+(o<<4&0xffffffff|o>>>28))^r^i)+n[12]+0xe6db99e5&0xffffffff,o=i+((s=t+(o<<11&0xffffffff|o>>>21))^t^r)+n[15]+0x1fa27cf8&0xffffffff,o=r+((i=s+(o<<16&0xffffffff|o>>>16))^s^t)+n[2]+0xc4ac5665&0xffffffff,r=i+(o<<23&0xffffffff|o>>>9),o=t+(i^(r|~s))+n[0]+0xf4292244&0xffffffff,t=r+(o<<6&0xffffffff|o>>>26),o=s+(r^(t|~i))+n[7]+0x432aff97&0xffffffff,s=t+(o<<10&0xffffffff|o>>>22),o=i+(t^(s|~r))+n[14]+0xab9423a7&0xffffffff,i=s+(o<<15&0xffffffff|o>>>17),o=r+(s^(i|~t))+n[5]+0xfc93a039&0xffffffff,r=i+(o<<21&0xffffffff|o>>>11),o=t+(i^(r|~s))+n[12]+0x655b59c3&0xffffffff,t=r+(o<<6&0xffffffff|o>>>26),o=s+(r^(t|~i))+n[3]+0x8f0ccc92&0xffffffff,s=t+(o<<10&0xffffffff|o>>>22),o=i+(t^(s|~r))+n[10]+0xffeff47d&0xffffffff,i=s+(o<<15&0xffffffff|o>>>17),o=r+(s^(i|~t))+n[1]+0x85845dd1&0xffffffff,r=i+(o<<21&0xffffffff|o>>>11),o=t+(i^(r|~s))+n[8]+0x6fa87e4f&0xffffffff,t=r+(o<<6&0xffffffff|o>>>26),o=s+(r^(t|~i))+n[15]+0xfe2ce6e0&0xffffffff,s=t+(o<<10&0xffffffff|o>>>22),o=i+(t^(s|~r))+n[6]+0xa3014314&0xffffffff,i=s+(o<<15&0xffffffff|o>>>17),o=r+(s^(i|~t))+n[13]+0x4e0811a1&0xffffffff,r=i+(o<<21&0xffffffff|o>>>11),o=t+(i^(r|~s))+n[4]+0xf7537e82&0xffffffff,t=r+(o<<6&0xffffffff|o>>>26),o=s+(r^(t|~i))+n[11]+0xbd3af235&0xffffffff,s=t+(o<<10&0xffffffff|o>>>22),o=i+(t^(s|~r))+n[2]+0x2ad7d2bb&0xffffffff,i=s+(o<<15&0xffffffff|o>>>17),o=r+(s^(i|~t))+n[9]+0xeb86d391&0xffffffff,e.g[0]=e.g[0]+t&0xffffffff,e.g[1]=e.g[1]+(i+(o<<21&0xffffffff|o>>>11))&0xffffffff,e.g[2]=e.g[2]+i&0xffffffff,e.g[3]=e.g[3]+s&0xffffffff}function r(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}!function(e,t){function r(){}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}}(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.u=function(e,r){void 0===r&&(r=e.length);for(var n=r-this.blockSize,i=this.B,s=this.h,o=0;o<r;){if(0==s)for(;o<=n;)t(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<r;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){t(this,i),s=0;break}}else for(;o<r;)if(i[s++]=e[o++],s==this.blockSize){t(this,i),s=0;break}}this.h=s,this.o+=r},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var s,o={};function a(e){var t;return -128<=e&&128>e?(t=function(e){return new r([0|e],0>e?-1:0)},Object.prototype.hasOwnProperty.call(o,e)?o[e]:o[e]=t(e)):new r([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return u;if(0>e)return p(l(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=0x100000000;return new r(t,0)}var u=a(0),c=a(1),h=a(0x1000000);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return -1==e.h}function p(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(c)}function g(e,t){return e.add(p(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function v(e,t){if(f(t))throw Error("division by zero");if(f(e))return new y(u,u);if(d(e))return t=v(p(e),t),new y(p(t.g),p(t.h));if(d(t))return t=v(e,p(t)),new y(p(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var r=c,n=t;0>=n.l(e);)r=w(r),n=w(n);var i=b(r,1),s=b(n,1);for(n=b(n,2),r=b(r,2);!f(n);){var o=s.add(n);0>=o.l(e)&&(i=i.add(r),s=o),n=b(n,1),r=b(r,1)}return t=g(e,i.j(t)),new y(i,t)}for(i=u;0<=e.l(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,n-48),o=(s=l(r)).j(t);d(o)||0<o.l(e);)r-=n,o=(s=l(r)).j(t);f(s)&&(s=c),i=i.add(s),e=g(e,o)}return new y(i,e)}function w(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function b(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(s=r.prototype).m=function(){if(d(this))return-p(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.i(r);e+=(0<=n?n:0x100000000+n)*t,t*=0x100000000}return e},s.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(d(this))return"-"+p(this).toString(e);for(var t=l(Math.pow(e,6)),r=this,n="";;){var i=v(r,t).g,s=((0<(r=g(r,i.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(f(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},s.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},s.l=function(e){return d(e=g(this,e))?-1:f(e)?0:1},s.abs=function(){return d(this)?p(this):this},s.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-0x80000000&n[n.length-1]?-1:0)},s.j=function(e){if(f(this)||f(e))return u;if(d(this))return d(e)?p(this).j(p(e)):p(p(this).j(e));if(d(e))return p(this.j(p(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var o=this.i(i)>>>16,a=65535&this.i(i),c=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=a*g,m(n,2*i+2*s),n[2*i+2*s+1]+=o*g,m(n,2*i+2*s+1),n[2*i+2*s+1]+=a*c,m(n,2*i+2*s+1),n[2*i+2*s+2]+=o*c,m(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},s.A=function(e){return v(this,e).h},s.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},s.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},s.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,i=S.Md5=e,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=l,r.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return p(e(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=l(Math.pow(r,8)),i=u,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),r);8>o?(o=l(Math.pow(r,o)),i=i.j(o).add(l(a))):i=(i=i.j(n)).add(l(a))}return i},n=S.Integer=r}).apply(void 0!==I?I:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},E={};(function(){var e,t,r,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof _&&_];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);!function(e,t){if(t)e:{var r=i;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in r))break e;r=r[o]}(t=t(s=r[e=e[e.length-1]]))!=s&&null!=t&&n(r,e,{configurable:!0,writable:!0,value:t})}}("Array.prototype.values",function(e){return e||function(){var e,t,r,n,i;return e=this,t=function(e,t){return t},e instanceof String&&(e+=""),r=0,n=!1,(i={next:function(){if(!n&&r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}return n=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return i},i}});var d=d||{},p=this||self;function g(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function y(e,t,r){return e.call.apply(e.bind,arguments)}function v(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function w(e,t,r){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function b(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function I(e,t){function r(){}r.prototype=t.prototype,e.aa=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Qb=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}}function S(e){let t=e.length;if(0<t){let r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function T(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(g(r)){let t=e.length||0,n=r.length||0;e.length=t+n;for(let i=0;i<n;i++)e[t+i]=r[i]}else e.push(r)}}class x{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function k(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=p.navigator;return e&&(e=e.userAgent)?e:""}function A(e){return A[" "](e),e}A[" "]=function(){};var R=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function O(e,t,r){for(let n in e)t.call(r,e[n],n,e)}function N(e){let t={};for(let r in e)t[r]=e[r];return t}let P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){let r,n;for(let t=1;t<arguments.length;t++){for(r in n=arguments[t])e[r]=n[r];for(let t=0;t<P.length;t++)r=P[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}class L{constructor(){this.h=this.g=null}add(e,t){let r=M.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var M=new x(()=>new j,e=>e.reset());class j{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let F,V=!1,U=new L,B=()=>{let e=p.Promise.resolve(void 0);F=()=>{e.then(z)}};var z=()=>{let e;for(var t;e=null,U.g&&(e=U.g,U.g=U.g.next,U.g||(U.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){p.setTimeout(()=>{throw e},0)}(e)}M.j(t),100>M.h&&(M.h++,t.next=M.g,M.g=t)}V=!1};function $(){this.s=this.s,this.C=this.C}function q(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},q.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};p.addEventListener("test",e,t),p.removeEventListener("test",e,t)}catch(e){}return e}();function G(e,t){if(q.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(R){e:{try{A(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:H[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&G.aa.h.call(this)}}I(G,q);var H={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),Q=0;function J(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.ha=i,this.key=++Q,this.da=this.fa=!1}function Y(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function Z(e,t){var r=t.type;if(r in e.g){var n,i=e.g[r],s=Array.prototype.indexOf.call(i,t,void 0);(n=0<=s)&&Array.prototype.splice.call(i,s,1),n&&(Y(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function ee(e,t,r,n){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&!!r==s.capture&&s.ha==n)return i}return -1}X.prototype.add=function(e,t,r,n,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ee(e,t,n,i);return -1<o?(t=e[o],r||(t.fa=!1)):((t=new J(t,this.src,s,!!n,i)).fa=r,e.push(t)),t};var et="closure_lm_"+(1e6*Math.random()|0),er={};function en(e,t,r,n,i,s){if(!t)throw Error("Invalid event type");var o=m(i)?!!i.capture:!!i,a=ea(e);if(a||(e[et]=a=new X(e)),(r=a.add(t,r,n,o,s)).proxy)return r;if(n=function e(t){return eo.call(e.src,e.listener,t)},r.proxy=n,n.src=e,n.listener=r,e.addEventListener)K||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(es(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function ei(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[W])Z(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(es(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=ea(t))?(Z(r,e),0==r.h&&(r.src=null,t[et]=null)):Y(e)}}}function es(e){return e in er?er[e]:er[e]="on"+e}function eo(e,t){if(e.da)e=!0;else{t=new G(t,this);var r=e.listener,n=e.ha||e.src;e.fa&&ei(e),e=r.call(n,t)}return e}function ea(e){return(e=e[et])instanceof X?e:null}var el="__closure_events_fn_"+(1e9*Math.random()>>>0);function eu(e){return"function"==typeof e?e:(e[el]||(e[el]=function(t){return e.handleEvent(t)}),e[el])}function ec(){$.call(this),this.i=new X(this),this.M=this,this.F=null}function eh(e,t){var r,n=e.F;if(n)for(r=[];n;n=n.F)r.push(n);if(e=e.M,n=t.type||t,"string"==typeof t)t=new q(t,e);else if(t instanceof q)t.target=t.target||e;else{var i=t;D(t=new q(n,e),i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var o=t.g=r[s];i=ef(o,n,!0,t)&&i}if(i=ef(o=t.g=e,n,!0,t)&&i,i=ef(o,n,!1,t)&&i,r)for(s=0;s<r.length;s++)i=ef(o=t.g=r[s],n,!1,t)&&i}function ef(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==r){var a=o.listener,l=o.ha||o.src;o.fa&&Z(e.i,o),i=!1!==a.call(l,n)&&i}}return i&&!n.defaultPrevented}function ed(e,t,r){if("function"==typeof e)r&&(e=w(e,r));else if(e&&"function"==typeof e.handleEvent)e=w(e.handleEvent,e);else throw Error("Invalid listener argument");return 0x7fffffff<Number(t)?-1:p.setTimeout(e,t||0)}I(ec,$),ec.prototype[W]=!0,ec.prototype.removeEventListener=function(e,t,r,n){!function e(t,r,n,i,s){if(Array.isArray(r))for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);else(i=m(i)?!!i.capture:!!i,n=eu(n),t&&t[W])?(t=t.i,(r=String(r).toString())in t.g&&-1<(n=ee(o=t.g[r],n,i,s))&&(Y(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[r],t.h--))):t&&(t=ea(t))&&(r=t.g[r.toString()],t=-1,r&&(t=ee(r,n,i,s)),(n=-1<t?r[t]:null)&&ei(n))}(this,e,t,r,n)},ec.prototype.N=function(){if(ec.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)Y(r[n]);delete t.g[e],t.h--}}this.F=null},ec.prototype.K=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},ec.prototype.L=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};class ep extends ${constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=ed(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let r=t.h;t.h=null,t.m.apply(null,r)}(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eg(e){$.call(this),this.h=e,this.g={}}I(eg,$);var em=[];function ey(e){O(e.g,function(e,t){this.g.hasOwnProperty(t)&&ei(e)},e),e.g={}}eg.prototype.N=function(){eg.aa.N.call(this),ey(this)},eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ev=p.JSON.stringify,ew=p.JSON.parse,eb=class{stringify(e){return p.JSON.stringify(e,void 0)}parse(e){return p.JSON.parse(e,void 0)}};function eI(){}function eS(e){return e.h||(e.h=e.i())}function e_(){}eI.prototype.h=null;var eE={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eT(){q.call(this,"d")}function ex(){q.call(this,"c")}I(eT,q),I(ex,q);var ek={},eC=null;function eA(){return eC=eC||new ec}function eR(e){q.call(this,ek.La,e)}function eO(e){let t=eA();eh(t,new eR(t))}function eN(e,t){q.call(this,ek.STAT_EVENT,e),this.stat=t}function eP(e){let t=eA();eh(t,new eN(t,e))}function eD(e,t){q.call(this,ek.Ma,e),this.size=t}function eL(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){e()},t)}function eM(){this.g=!0}function ej(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}}return ev(r)}catch(e){return t}}(e,r)+(n?" "+n:"")})}ek.La="serverreachability",I(eR,q),ek.STAT_EVENT="statevent",I(eN,q),ek.Ma="timingevent",I(eD,q),eM.prototype.xa=function(){this.g=!1},eM.prototype.info=function(){};var eF={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eV={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function eU(){}function eB(e,t,r,n){this.j=e,this.i=t,this.l=r,this.R=n||1,this.U=new eg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ez}function ez(){this.i=null,this.g="",this.h=!1}I(eU,eI),eU.prototype.g=function(){return new XMLHttpRequest},eU.prototype.i=function(){return{}},t=new eU;var e$={},eq={};function eK(e,t,r){e.L=1,e.v=to(tt(t)),e.m=r,e.P=!0,eG(e,null)}function eG(e,t){e.F=Date.now(),eW(e),e.A=tt(e.v);var r=e.A,n=e.R;Array.isArray(n)||(n=[String(n)]),tw(r.i,"t",n),e.C=0,r=e.j.J,e.h=new ez,e.g=t6(e.j,r?t:null,!e.m),0<e.O&&(e.M=new ep(w(e.Y,e,e.g),e.O)),t=e.U,r=e.g,n=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(em[0]=i.toString()),i=em);for(var s=0;s<i.length;s++){var o=function e(t,r,n,i,s){if(i&&i.once)return function e(t,r,n,i,s){if(Array.isArray(r)){for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);return null}return n=eu(n),t&&t[W]?t.L(r,n,m(i)?!!i.capture:!!i,s):en(t,r,n,!0,i,s)}(t,r,n,i,s);if(Array.isArray(r)){for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);return null}return n=eu(n),t&&t[W]?t.K(r,n,m(i)?!!i.capture:!!i,s):en(t,r,n,!1,i,s)}(r,i[s],n||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?N(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),eO(),function(e,t,r,n,i,s){e.info(function(){if(e.g){if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null}else o=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+t+"\n"+r+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function eH(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function eW(e){e.S=Date.now()+e.I,eQ(e,e.I)}function eQ(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eL(w(e.ba,e),t)}function eJ(e){e.B&&(p.clearTimeout(e.B),e.B=null)}function eY(e){0==e.j.G||e.J||t0(e.j,e)}function eX(e){eJ(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ey(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function eZ(e,t){try{var r=e.j;if(0!=r.G&&(r.g==e||e3(r.h,e))){if(!e.K&&e3(r.h,e)&&3==r.G){try{var n=r.Da.g.parse(t)}catch(e){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!r.u){if(r.g){if(r.g.F+3e3<e.F)tZ(r),t$(r);else break e}tJ(r),eP(18)}}else r.za=i[1],0<r.za-r.T&&37500>i[2]&&r.F&&0==r.v&&!r.C&&(r.C=eL(w(r.Za,r),6e3));if(1>=e5(r.h)&&r.ca){try{r.ca()}catch(e){}r.ca=void 0}}else t2(r,11)}else if((e.K||r.g==e)&&tZ(r),!k(t))for(i=r.Da.g.parse(t),t=0;t<i.length;t++){let a=i[t];if(r.T=a[0],a=a[1],2==r.G){if("c"==a[0]){r.K=a[1],r.ia=a[2];let t=a[3];null!=t&&(r.la=t,r.j.info("VER="+r.la));let i=a[4];null!=i&&(r.Aa=i,r.j.info("SVER="+r.Aa));let l=a[5];null!=l&&"number"==typeof l&&0<l&&(n=1.5*l,r.L=n,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=n.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(e6(s,s.h),s.h=null))}if(n.D){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.ya=e,ts(n.I,n.D,e))}}if(r.G=3,r.l&&r.l.ua(),r.ba&&(r.R=Date.now()-e.F,r.j.info("Handshake RTT: "+r.R+"ms")),(n=r).qa=t3(n,n.J?n.ia:null,n.W),e.K){e4(n.h,e);var o=n.L;o&&(e.I=o),e.B&&(eJ(e),eW(e)),n.g=e}else tQ(n);0<r.i.length&&tK(r)}else"stop"!=a[0]&&"close"!=a[0]||t2(r,7)}else 3==r.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?t2(r,7):tz(r):"noop"!=a[0]&&r.l&&r.l.ta(a),r.v=0)}}eO(4)}catch(e){}}eB.prototype.ca=function(e){e=e.target;let t=this.M;t&&3==tF(e)?t.j():this.Y(e)},eB.prototype.Y=function(e){try{if(e==this.g)e:{let h=tF(this.g);var t=this.g.Ba();let f=this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||tV(this.g)))){this.J||4!=h||7==t||(8==t||0>=f?eO(3):eO(2)),eJ(this);var r=this.g.Z();this.X=r;t:if(eH(this)){var n=tV(this.g);e="";var i=n.length,s=4==tF(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){eX(this),eY(this);var o="";break t}this.h.i=new p.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:!(s&&t==i-1)});n.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==r,function(e,t,r,n,i,s,o){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+t+"\n"+r+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,r),this.o){if(this.T&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(a)){var u=a;break t}}u=null}if(r=u)ej(this.i,this.l,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eZ(this,r);else{this.o=!1,this.s=3,eP(12),eX(this),eY(this);break e}}if(this.P){let e;for(r=!0;!this.J&&this.C<o.length;)if((e=function(e,t){var r=e.C,n=t.indexOf("\n",r);return -1==n?eq:isNaN(r=Number(t.substring(r,n)))?e$:(n+=1)+r>t.length?eq:(t=t.slice(n,n+r),e.C=n+r,t)}(this,o))==eq){4==h&&(this.s=4,eP(14),r=!1),ej(this.i,this.l,null,"[Incomplete Response]");break}else if(e==e$){this.s=4,eP(15),ej(this.i,this.l,o,"[Invalid Chunk]"),r=!1;break}else ej(this.i,this.l,e,null),eZ(this,e);if(eH(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,eP(16),r=!1),this.o=this.o&&r,r){if(0<o.length&&!this.W){this.W=!0;var c=this.j;c.g==this&&c.ba&&!c.M&&(c.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),tY(c),c.M=!0,eP(11))}}else ej(this.i,this.l,o,"[Invalid Chunked Response]"),eX(this),eY(this)}else ej(this.i,this.l,o,null),eZ(this,o);4==h&&eX(this),this.o&&!this.J&&(4==h?t0(this.j,this):(this.o=!1,eW(this)))}else(function(e){let t={};e=(e.g&&2<=tF(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(k(e[n]))continue;var r=function(e){var t=1;e=e.split(":");let r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}(e[n]);let i=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();let s=t[i]||[];t[i]=s,s.push(r)}!function(e,t){for(let r in e)t.call(void 0,e[r],r,e)}(t,function(e){return e.join(", ")})})(this.g),400==r&&0<o.indexOf("Unknown SID")?(this.s=3,eP(12)):(this.s=0,eP(13)),eX(this),eY(this)}}}catch(e){}finally{}},eB.prototype.cancel=function(){this.J=!0,eX(this)},eB.prototype.ba=function(){this.B=null;let e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(eO(),eP(17)),eX(this),this.s=2,eY(this)):eQ(this,this.S-e)};var e0=class{constructor(e,t){this.g=e,this.map=t}};function e1(e){this.l=e||10,e=p.PerformanceNavigationTiming?0<(e=p.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e2(e){return!!e.h||!!e.g&&e.g.size>=e.j}function e5(e){return e.h?1:e.g?e.g.size:0}function e3(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function e6(e,t){e.g?e.g.add(t):e.h=t}function e4(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function e8(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let r of e.g.values())t=t.concat(r.D);return t}return S(e.i)}function e7(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(g(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(g(e)||"string"==typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}for(let n in t=[],r=0,e)t[r++]=n;return t}}}(e),n=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(g(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),i=n.length,s=0;s<i;s++)t.call(void 0,n[s],r&&r[s],e)}e1.prototype.cancel=function(){if(this.i=e8(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var e9=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function te(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof te){this.h=e.h,tr(this,e.j),this.o=e.o,this.g=e.g,tn(this,e.s),this.l=e.l;var t=e.i,r=new tg;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),ti(this,r),this.m=e.m}else e&&(t=String(e).match(e9))?(this.h=!1,tr(this,t[1]||"",!0),this.o=ta(t[2]||""),this.g=ta(t[3]||"",!0),tn(this,t[4]),this.l=ta(t[5]||"",!0),ti(this,t[6]||"",!0),this.m=ta(t[7]||"")):(this.h=!1,this.i=new tg(null,this.h))}function tt(e){return new te(e)}function tr(e,t,r){e.j=r?ta(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tn(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ti(e,t,r){var n,i;t instanceof tg?(e.i=t,n=e.i,(i=e.h)&&!n.j&&(tm(n),n.i=null,n.g.forEach(function(e,t){var r=t.toLowerCase();t!=r&&(ty(this,t),tw(this,r,e))},n)),n.j=i):(r||(t=tl(t,td)),e.i=new tg(t,e.h))}function ts(e,t,r){e.i.set(t,r)}function to(e){return ts(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function ta(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tl(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,tu),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}te.prototype.toString=function(){var e=[],t=this.j;t&&e.push(tl(t,tc,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(tl(t,tc,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.s)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(tl(r,"/"==r.charAt(0)?tf:th,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.m)&&e.push("#",tl(r,tp)),e.join("")};var tc=/[#\/\?@]/g,th=/[#\?:]/g,tf=/[#\?]/g,td=/[#\?@]/g,tp=/#/g;function tg(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function tm(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),i=null;if(0<=n){var s=e[r].substring(0,n);i=e[r].substring(n+1)}else s=e[r];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function ty(e,t){tm(e),t=tb(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tv(e,t){return tm(e),t=tb(e,t),e.g.has(t)}function tw(e,t,r){ty(e,t),0<r.length&&(e.i=null,e.g.set(tb(e,t),S(r)),e.h+=r.length)}function tb(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function tI(e,t,r,n,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),n(r)}catch(e){}}function tS(){this.g=new eb}function t_(e){this.l=e.Ub||null,this.j=e.eb||!1}function tE(e,t){ec.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function tT(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function tx(e){e.readyState=4,e.l=null,e.j=null,e.v=null,tk(e)}function tk(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tC(e){let t="";return O(e,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}function tA(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=tC(r),"string"==typeof e?null!=r&&encodeURIComponent(String(r)):ts(e,t,r))}function tR(e){ec.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(r=tg.prototype).add=function(e,t){tm(this),this.i=null,e=tb(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},r.forEach=function(e,t){tm(this),this.g.forEach(function(r,n){r.forEach(function(r){e.call(t,r,n,this)},this)},this)},r.na=function(){tm(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){let i=e[n];for(let e=0;e<i.length;e++)r.push(t[n])}return r},r.V=function(e){tm(this);let t=[];if("string"==typeof e)tv(this,e)&&(t=t.concat(this.g.get(tb(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},r.set=function(e,t){return tm(this),this.i=null,tv(this,e=tb(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];let s=encodeURIComponent(String(n)),o=this.V(n);for(n=0;n<o.length;n++){var i=s;""!==o[n]&&(i+="="+encodeURIComponent(String(o[n]))),e.push(i)}}return this.i=e.join("&")},I(t_,eI),t_.prototype.g=function(){return new tE(this.l,this.j)},t_.prototype.i=(e={},function(){return e}),I(tE,ec),(r=tE.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,tk(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||p).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tx(this)),this.readyState=0},r.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tk(this)),this.g&&(this.readyState=3,tk(this),this.g))){if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==p.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tT(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))}},r.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tx(this):tk(this),3==this.readyState&&tT(this)}},r.Ra=function(e){this.g&&(this.response=this.responseText=e,tx(this))},r.Qa=function(e){this.g&&(this.response=e,tx(this))},r.ga=function(){this.g&&tx(this)},r.setRequestHeader=function(e,t){this.u.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)e.push((r=r.value)[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(tE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),I(tR,ec);var tO=/^https?$/i,tN=["POST","PUT"];function tP(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,tD(e),tM(e)}function tD(e){e.A||(e.A=!0,eh(e,"complete"),eh(e,"error"))}function tL(e){if(e.h&&void 0!==d&&(!e.v[1]||4!=tF(e)||2!=e.Z())){if(e.u&&4==tF(e))ed(e.Ea,0,e);else if(eh(e,"readystatechange"),4==tF(e)){e.h=!1;try{let o=e.Z();switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,r,n=!0;break;default:n=!1}if(!(t=n)){if(r=0===o){var i=String(e.D).match(e9)[1]||null;!i&&p.self&&p.self.location&&(i=p.self.location.protocol.slice(0,-1)),r=!tO.test(i?i.toLowerCase():"")}t=r}if(t)eh(e,"complete"),eh(e,"success");else{e.m=6;try{var s=2<tF(e)?e.g.statusText:""}catch(e){s=""}e.l=s+" ["+e.Z()+"]",tD(e)}}finally{tM(e)}}}}function tM(e,t){if(e.g){tj(e);let r=e.g,n=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||eh(e,"ready");try{r.onreadystatechange=n}catch(e){}}}function tj(e){e.I&&(p.clearTimeout(e.I),e.I=null)}function tF(e){return e.g?e.g.readyState:0}function tV(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tU(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function tB(e){this.Aa=0,this.i=[],this.j=new eM,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tU("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tU("baseRetryDelayMs",5e3,e),this.cb=tU("retryDelaySeedMs",1e4,e),this.Wa=tU("forwardChannelMaxRetries",2,e),this.wa=tU("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new e1(e&&e.concurrentRequestLimit),this.Da=new tS,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tz(e){if(tq(e),3==e.G){var t=e.U++,r=tt(e.I);if(ts(r,"SID",e.K),ts(r,"RID",t),ts(r,"TYPE","terminate"),tH(e,r),(t=new eB(e,e.j,t)).L=2,t.v=to(tt(r)),r=!1,p.navigator&&p.navigator.sendBeacon)try{r=p.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!r&&p.Image&&((new Image).src=t.v,r=!0),r||(t.g=t6(t.j,null),t.g.ea(t.v)),t.F=Date.now(),eW(t)}t5(e)}function t$(e){e.g&&(tY(e),e.g.cancel(),e.g=null)}function tq(e){t$(e),e.u&&(p.clearTimeout(e.u),e.u=null),tZ(e),e.h.cancel(),e.s&&("number"==typeof e.s&&p.clearTimeout(e.s),e.s=null)}function tK(e){if(!e2(e.h)&&!e.s){e.s=!0;var t=e.Ga;F||B(),V||(F(),V=!0),U.add(t,e),e.B=0}}function tG(e,t){var r;r=t?t.l:e.U++;let n=tt(e.I);ts(n,"SID",e.K),ts(n,"RID",r),ts(n,"AID",e.T),tH(e,n),e.m&&e.o&&tA(n,e.m,e.o),r=new eB(e,e.j,r,e.B+1),null===e.m&&(r.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tW(e,r,1e3),r.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),e6(e.h,r),eK(r,n,t)}function tH(e,t){e.H&&O(e.H,function(e,r){ts(t,r,e)}),e.l&&e7({},function(e,r){ts(t,r,e)})}function tW(e,t,r){r=Math.min(e.i.length,r);var n=e.l?w(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){let e=["count="+r];-1==t?0<r?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<r;o++){let r=i[o].g,a=i[o].map;if(0>(r-=t))t=Math.max(0,i[o].g-100),s=!1;else try{!function(e,t,r){let n=r||"";try{e7(e,function(e,r){let i=e;m(e)&&(i=ev(e)),t.push(n+r+"="+encodeURIComponent(i))})}catch(e){throw t.push(n+"type="+encodeURIComponent("_badmap")),e}}(a,e,"req"+r+"_")}catch(e){n&&n(a)}}if(s){n=e.join("&");break e}}}return e=e.i.splice(0,r),t.D=e,n}function tQ(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;F||B(),V||(F(),V=!0),U.add(t,e),e.v=0}}function tJ(e){return!e.g&&!e.u&&!(3<=e.v)&&(e.Y++,e.u=eL(w(e.Fa,e),t1(e,e.v)),e.v++,!0)}function tY(e){null!=e.A&&(p.clearTimeout(e.A),e.A=null)}function tX(e){e.g=new eB(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=tt(e.qa);ts(t,"RID","rpc"),ts(t,"SID",e.K),ts(t,"AID",e.T),ts(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ts(t,"TO",e.ja),ts(t,"TYPE","xmlhttp"),tH(e,t),e.m&&e.o&&tA(t,e.m,e.o),e.L&&(e.g.I=e.L);var r=e.g;e=e.ia,r.L=1,r.v=to(tt(t)),r.m=null,r.P=!0,eG(r,e)}function tZ(e){null!=e.C&&(p.clearTimeout(e.C),e.C=null)}function t0(e,t){var r=null;if(e.g==t){tZ(e),tY(e),e.g=null;var n=2}else{if(!e3(e.h,t))return;r=t.D,e4(e.h,t),n=1}if(0!=e.G){if(t.o){if(1==n){r=t.m?t.m.length:0,t=Date.now()-t.F;var i,s=e.B;eh(n=eA(),new eD(n,r)),tK(e)}else tQ(e)}else if(3==(s=t.s)||0==s&&0<t.X||!(1==n&&(i=t,!(e5(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=i.D.concat(e.i),!0):1!=e.G&&2!=e.G&&!(e.B>=(e.Va?0:e.Wa))&&(e.s=eL(w(e.Ga,e,i),t1(e,e.B)),e.B++,!0)))||2==n&&tJ(e)))switch(r&&0<r.length&&((t=e.h).i=t.i.concat(r)),s){case 1:t2(e,5);break;case 4:t2(e,10);break;case 3:t2(e,6);break;default:t2(e,2)}}}function t1(e,t){let r=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(r*=2),r*t}function t2(e,t){if(e.j.info("Error code "+t),2==t){var r=w(e.fb,e),n=e.Xa;let t=!n;n=new te(n||"//www.google.com/images/cleardot.gif"),p.location&&"http"==p.location.protocol||tr(n,"https"),to(n),t?function(e,t){let r=new eM;if(p.Image){let n=new Image;n.onload=b(tI,r,"TestLoadImage: loaded",!0,t,n),n.onerror=b(tI,r,"TestLoadImage: error",!1,t,n),n.onabort=b(tI,r,"TestLoadImage: abort",!1,t,n),n.ontimeout=b(tI,r,"TestLoadImage: timeout",!1,t,n),p.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}(n.toString(),r):function(e,t){let r=new eM,n=new AbortController,i=setTimeout(()=>{n.abort(),tI(r,"TestPingServer: timeout",!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(i),e.ok?tI(r,"TestPingServer: ok",!0,t):tI(r,"TestPingServer: server error",!1,t)}).catch(()=>{clearTimeout(i),tI(r,"TestPingServer: error",!1,t)})}(n.toString(),r)}else eP(2);e.G=0,e.l&&e.l.sa(t),t5(e),tq(e)}function t5(e){if(e.G=0,e.ka=[],e.l){let t=e8(e.h);(0!=t.length||0!=e.i.length)&&(T(e.ka,t),T(e.ka,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.ra()}}function t3(e,t,r){var n=r instanceof te?tt(r):new te(r);if(""!=n.g)t&&(n.g=t+"."+n.g),tn(n,n.s);else{var i=p.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new te(null);n&&tr(s,n),t&&(s.g=t),i&&tn(s,i),r&&(s.l=r),n=s}return r=e.D,t=e.ya,r&&t&&ts(n,r,t),ts(n,"VER",e.la),tH(e,n),n}function t6(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tR(e.Ca&&!e.pa?new t_({eb:r}):e.pa)).Ha(e.J),t}function t4(){}function t8(){}function t7(e,t){ec.call(this),this.g=new tB(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!k(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new rt(this)}function t9(e){eT.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function re(){ex.call(this),this.status=1}function rt(e){this.g=e}(r=tR.prototype).Ha=function(e){this.J=e},r.ea=function(e,r,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);r=r?r.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():t.g(),this.v=this.o?eS(this.o):eS(t),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(r,String(e),!0),this.B=!1}catch(e){tP(this,e);return}if(e=n||"",n=new Map(this.headers),i){if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else if("function"==typeof i.keys&&"function"==typeof i.get)for(let e of i.keys())n.set(e,i.get(e));else throw Error("Unknown input type for opt_headers: "+String(i))}for(let[t,o]of(i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=p.FormData&&e instanceof p.FormData,!(0<=Array.prototype.indexOf.call(tN,r,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n))this.g.setRequestHeader(t,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tj(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){tP(this,e)}},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,eh(this,"complete"),eh(this,"abort"),tM(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tM(this,!0)),tR.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?tL(this):this.bb())},r.bb=function(){tL(this)},r.isActive=function(){return!!this.g},r.Z=function(){try{return 2<tF(this)?this.g.status:-1}catch(e){return -1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ew(t)}},r.Ba=function(){return this.m},r.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(r=tB.prototype).la=8,r.G=1,r.connect=function(e,t,r,n){eP(0),this.W=e,this.H=t||{},r&&void 0!==n&&(this.H.OSID=r,this.H.OAID=n),this.F=this.X,this.I=t3(this,null,this.W),tK(this)},r.Ga=function(e){if(this.s){if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let i=new eB(this,this.j,e),s=this.o;if(this.S&&(s?D(s=N(s),this.S):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,r=0;r<this.i.length;r++){t:{var n=this.i[r];if("__data__"in n.map&&"string"==typeof(n=n.map.__data__)){n=n.length;break t}n=void 0}if(void 0===n)break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=tW(this,i,t),ts(r=tt(this.I),"RID",e),ts(r,"CVER",22),this.D&&ts(r,"X-HTTP-Session-Id",this.D),tH(this,r),s&&(this.O?t="headers="+encodeURIComponent(String(tC(s)))+"&"+t:this.m&&tA(r,this.m,s)),e6(this.h,i),this.Ua&&ts(r,"TYPE","init"),this.P?(ts(r,"$req",t),ts(r,"SID","null"),i.T=!0,eK(i,r,null)):eK(i,r,t),this.G=2}}else 3==this.G&&(e?tG(this,e):0==this.i.length||e2(this.h)||tG(this))}},r.Fa=function(){if(this.u=null,tX(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=eL(w(this.ab,this),e)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,eP(10),t$(this),tX(this))},r.Za=function(){null!=this.C&&(this.C=null,t$(this),tJ(this),eP(19))},r.fb=function(e){e?(this.j.info("Successfully pinged google.com"),eP(2)):(this.j.info("Failed to ping google.com"),eP(1))},r.isActive=function(){return!!this.l&&this.l.isActive(this)},(r=t4.prototype).ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){},t8.prototype.g=function(e,t){return new t7(e,t)},I(t7,ec),t7.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},t7.prototype.close=function(){tz(this.g)},t7.prototype.o=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.u&&((r={}).__data__=ev(e),e=r);t.i.push(new e0(t.Ya++,e)),3==t.G&&tK(t)},t7.prototype.N=function(){this.g.l=null,delete this.j,tz(this.g),delete this.g,t7.aa.N.call(this)},I(t9,eT),I(re,ex),I(rt,t4),rt.prototype.ua=function(){eh(this.g,"a")},rt.prototype.ta=function(e){eh(this.g,new t9(e))},rt.prototype.sa=function(e){eh(this.g,new re)},rt.prototype.ra=function(){eh(this.g,"b")},t8.prototype.createWebChannel=t8.prototype.g,t7.prototype.send=t7.prototype.o,t7.prototype.open=t7.prototype.m,t7.prototype.close=t7.prototype.close,f=E.createWebChannelTransport=function(){return new t8},h=E.getStatEventTarget=function(){return eA()},c=E.Event=ek,u=E.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eF.NO_ERROR=0,eF.TIMEOUT=8,eF.HTTP_ERROR=6,l=E.ErrorCode=eF,eV.COMPLETE="complete",a=E.EventType=eV,e_.EventType=eE,eE.OPEN="a",eE.CLOSE="b",eE.ERROR="c",eE.MESSAGE="d",ec.prototype.listen=ec.prototype.K,o=E.WebChannel=e_,E.FetchXmlHttpFactory=t_,tR.prototype.listenOnce=tR.prototype.L,tR.prototype.getLastError=tR.prototype.Ka,tR.prototype.getLastErrorCode=tR.prototype.Ba,tR.prototype.getStatus=tR.prototype.Z,tR.prototype.getResponseJson=tR.prototype.Oa,tR.prototype.getResponseText=tR.prototype.oa,tR.prototype.send=tR.prototype.ea,tR.prototype.setWithCredentials=tR.prototype.Ha,s=E.XhrIo=tR}).apply(void 0!==_?_:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var T=r(3454),x=r(1876).Buffer;let k="@firebase/firestore";class C{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}C.UNAUTHENTICATED=new C(null),C.GOOGLE_CREDENTIALS=new C("google-credentials-uid"),C.FIRST_PARTY=new C("first-party-uid"),C.MOCK_USER=new C("mock-user");let A="11.0.0",R=new w.Yd("@firebase/firestore");function O(){return R.logLevel}function N(e,...t){if(R.logLevel<=w.in.DEBUG){let r=t.map(L);R.debug(`Firestore (${A}): ${e}`,...r)}}function P(e,...t){if(R.logLevel<=w.in.ERROR){let r=t.map(L);R.error(`Firestore (${A}): ${e}`,...r)}}function D(e,...t){if(R.logLevel<=w.in.WARN){let r=t.map(L);R.warn(`Firestore (${A}): ${e}`,...r)}}function L(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function M(e="Unexpected state"){let t=`FIRESTORE (${A}) INTERNAL ASSERTION FAILED: `+e;throw P(t),Error(t)}let j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends b.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class V{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class U{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(C.UNAUTHENTICATED))}shutdown(){}}class z{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ${constructor(e){this.t=e,this.currentUser=C.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){void 0===this.o||M();let r=this.i,n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve(),i=new V;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new V,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},o=e=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new V)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?("string"==typeof t.accessToken||M(),new U(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||M(),new C(e)}}class q{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=C.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class K{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new q(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(C.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){void 0===this.o||M();let r=e=>{null!=e.error&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.R;return this.R=e.token,N("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.A.getImmediate({optional:!0});e?n(e):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?("string"==typeof e.token||M(),this.R=e.token,new G(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class W{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let n=function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let e=0;e<40;e++)r[e]=Math.floor(256*Math.random());return r}(0);for(let i=0;i<n.length;++i)r.length<20&&n[i]<t&&(r+=e.charAt(n[i]%e.length))}return r}}function Q(e,t){return e<t?-1:e>t?1:0}function J(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}class Y{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new F(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new F(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Y.fromMillis(Date.now())}static fromDate(e){return Y.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Y(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new Y(0,0))}static max(){return new X(new Y(0x3afff4417f,0x3b9ac9ff))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Z{constructor(e,t,r){void 0===t?t=0:t>e.length&&M(),void 0===r?r=e.length-t:r>e.length-t&&M(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Z.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof Z?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.get(n),i=t.get(n);if(r<i)return -1;if(r>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ee extends Z{construct(e,t,r){return new ee(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new ee(t)}static emptyPath(){return new ee([])}}let et=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Z{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return et.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new F(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new F(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new F(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?s=!s:"."!==t||s?r+=t:i(),n++}if(i(),s)throw new F(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class en{constructor(e){this.path=e}static fromPath(e){return new en(ee.fromString(e))}static fromName(e){return new en(ee.fromString(e).popFirst(5))}static empty(){return new en(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ee.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new en(new ee(e.slice()))}}class ei{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function es(e){return e.fields.find(e=>2===e.kind)}function eo(e){return e.fields.filter(e=>2!==e.kind)}ei.UNKNOWN_ID=-1;class ea{constructor(e,t){this.fieldPath=e,this.kind=t}}class el{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new el(0,eh.min())}}function eu(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new eh(X.fromTimestamp(1e9===n?new Y(r+1,0):new Y(r,n)),en.empty(),t)}function ec(e){return new eh(e.readTime,e.key,-1)}class eh{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new eh(X.min(),en.empty(),-1)}static max(){return new eh(X.max(),en.empty(),-1)}}function ef(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r?r:0!==(r=en.comparator(e.documentKey,t.documentKey))?r:Q(e.largestBatchId,t.largestBatchId)}let ed="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ep{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function eg(e){if(e.code!==j.FAILED_PRECONDITION||e.message!==ed)throw e;N("LocalStore","Unexpectedly lost primary lease")}class em{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&M(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new em((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof em?t:em.resolve(t)}catch(e){return em.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):em.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):em.reject(t)}static resolve(e){return new em((t,r)=>{t(e)})}static reject(e){return new em((t,r)=>{r(e)})}static waitFor(e){return new em((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=em.resolve(!1);for(let r of e)t=t.next(e=>e?em.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new em((r,n)=>{let i=e.length,s=Array(i),o=0;for(let a=0;a<i;a++){let l=a;t(e[l]).next(e=>{s[l]=e,++o===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new em((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}class ey{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new V,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new eI(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{let r=ex(t.target.error);this.V.reject(new eI(e,r))}}static open(e,t,r,n){try{return new ey(t,e.transaction(n,r))}catch(e){throw new eI(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(N("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new e_(this.transaction.objectStore(e))}}class ev{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ev.S((0,b.z$)())&&P("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return N("SimpleDb","Removing database:",e),eE(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,b.hl)())return!1;if(ev.v())return!0;let e=(0,b.z$)(),t=ev.S(e),r=ew(e);return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||0<t&&t<10||0<r&&r<4.5)}static v(){var e;return void 0!==T&&"YES"===(null===(e=T.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}async M(e){return this.db||(N("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{let n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{t(e.target.result)},n.onblocked=()=>{r(new eI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{let n=t.target.error;"VersionError"===n.name?r(new F(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new F(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new eI(e,n))},n.onupgradeneeded=e=>{N("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;this.p.O(t,n.transaction,e.oldVersion,this.version).next(()=>{N("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){let i="readonly"===t,s=0;for(;;){++s;try{this.db=await this.M(e);let t=ey.open(this.db,e,i?"readonly":"readwrite",r),s=n(t).next(e=>(t.g(),e)).catch(e=>(t.abort(e),em.reject(e))).toPromise();return s.catch(()=>{}),await t.m,s}catch(t){let e="FirebaseError"!==t.name&&s<3;if(N("SimpleDb","Transaction failed with error:",t.message,"Retrying:",e),this.close(),!e)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ew(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class eb{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return eE(this.B.delete())}}class eI extends F{constructor(e,t){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function eS(e){return"IndexedDbTransactionError"===e.name}class e_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(N("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(N("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eE(r)}add(e){return N("SimpleDb","ADD",this.store.name,e,e),eE(this.store.add(e))}get(e){return eE(this.store.get(e)).next(t=>(void 0===t&&(t=null),N("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return N("SimpleDb","DELETE",this.store.name,e),eE(this.store.delete(e))}count(){return N("SimpleDb","COUNT",this.store.name),eE(this.store.count())}U(e,t){let r=this.options(e,t),n=r.index?this.store.index(r.index):this.store;if("function"==typeof n.getAll){let e=n.getAll(r.range);return new em((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{let e=this.cursor(r),t=[];return this.W(e,(e,r)=>{t.push(r)}).next(()=>t)}}G(e,t){let r=this.store.getAll(e,null===t?void 0:t);return new em((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}})}j(e,t){N("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let n=this.cursor(r);return this.W(n,(e,t,r)=>r.delete())}J(e,t){let r;t?r=e:(r={},t=e);let n=this.cursor(r);return this.W(n,t)}Y(e){let t=this.cursor({});return new em((r,n)=>{t.onerror=e=>{n(ex(e.target.error))},t.onsuccess=t=>{let n=t.target.result;n?e(n.primaryKey,n.value).next(e=>{e?n.continue():r()}):r()}})}W(e,t){let r=[];return new em((n,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void n();let s=new eb(i),o=t(i.primaryKey,i.value,s);if(o instanceof em){let e=o.catch(e=>(s.done(),em.reject(e)));r.push(e)}s.isDone?n():null===s.K?i.continue():i.continue(s.K)}}).next(()=>em.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function eE(e){return new em((t,r)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(ex(e.target.error))}})}let eT=!1;function ex(e){let t=ev.S((0,b.z$)());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eT||(eT=!0,setTimeout(()=>{throw e},0)),e}}return e}class ek{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){N("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{N("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){eS(e)?N("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await eg(e)}await this.X(6e4)})}}class eC{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){let r=new Set,n=t,i=!0;return em.doWhile(()=>!0===i&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!r.has(t))return N("IndexBackfiller",`Processing collection: ${t}`),this.ne(e,t,n).next(e=>{n-=e,r.add(t)});i=!1})).next(()=>t-n)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(n=>this.localStore.localDocuments.getNextDocuments(e,t,n,r).next(r=>{let i=r.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(n,r)).next(r=>(N("IndexBackfiller",`Updating offset: ${r}`),this.localStore.indexManager.updateCollectionGroup(e,t,r))).next(()=>i.size)}))}re(e,t){let r=e;return t.changes.forEach((e,t)=>{let n=ec(t);ef(n,r)>0&&(r=n)}),new eh(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class eA{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}function eR(e){return null==e}function eO(e){return 0===e&&1/e==-1/0}function eN(e){return"number"==typeof e&&Number.isInteger(e)&&!eO(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function eP(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t+="\x01\x01"),t=function(e,t){let r=t,n=e.length;for(let t=0;t<n;t++){let n=e.charAt(t);switch(n){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=n}}return r}(e.get(r),t);return t+"\x01\x01"}function eD(e){let t=e.length;if(t>=2||M(),2===t)return"\x01"===e.charAt(0)&&"\x01"===e.charAt(1)||M(),ee.emptyPath();let r=t-2,n=[],i="";for(let s=0;s<t;){let t=e.indexOf("\x01",s);switch((t<0||t>r)&&M(),e.charAt(t+1)){case"\x01":let o;let a=e.substring(s,t);0===i.length?o=a:(i+=a,o=i,i=""),n.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:M()}s=t+2}return new ee(n)}eA.oe=-1;let eL=["userId","batchId"],eM={},ej=["prefixPath","collectionGroup","readTime","documentId"],eF=["prefixPath","collectionGroup","documentId"],eV=["collectionGroup","readTime","prefixPath","documentId"],eU=["canonicalId","targetId"],eB=["targetId","path"],ez=["path","targetId"],e$=["collectionId","parent"],eq=["indexId","uid"],eK=["uid","sequenceNumber"],eG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eH=["indexId","uid","orderedDocumentKey"],eW=["userId","collectionPath","documentId"],eQ=["userId","collectionPath","largestBatchId"],eJ=["userId","collectionGroup","largestBatchId"],eY=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eX=[...eY,"documentOverlays"],eZ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],e0=[...eZ,"indexConfiguration","indexState","indexEntries"],e1=[...e0,"globals"];class e2 extends ep{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function e5(e,t){return ev.F(e._e,t)}function e3(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function e6(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function e4(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class e8{constructor(e,t){this.comparator=e,this.root=t||e9.EMPTY}insert(e,t){return new e8(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,e9.BLACK,null,null))}remove(e){return new e8(this.comparator,this.root.remove(e,this.comparator).copy(null,null,e9.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new e7(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new e7(this.root,e,this.comparator,!1)}getReverseIterator(){return new e7(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new e7(this.root,e,this.comparator,!0)}}class e7{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class e9{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:e9.RED,this.left=null!=n?n:e9.EMPTY,this.right=null!=i?i:e9.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new e9(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return e9.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return e9.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,e9.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,e9.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw M();let e=this.left.check();if(e!==this.right.check())throw M();return e+(this.isRed()?0:1)}}e9.EMPTY=null,e9.RED=!0,e9.BLACK=!1,e9.EMPTY=new class{constructor(){this.size=0}get key(){throw M()}get value(){throw M()}get color(){throw M()}get left(){throw M()}get right(){throw M()}copy(e,t,r,n,i){return this}insert(e,t,r){return new e9(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class te{constructor(e){this.comparator=e,this.data=new e8(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tt(this.data.getIterator())}getIteratorFrom(e){return new tt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof te)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new te(this.comparator);return t.data=e,t}}class tt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tr(e){return e.hasNext()?e.getNext():void 0}class tn{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new tn([])}unionWith(e){let t=new te(er.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new tn(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return J(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ti extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ts{constructor(e){this.binaryString=e}static fromBase64String(e){return new ts(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ti("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new ts(function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ts.EMPTY_BYTE_STRING=new ts("");let to=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ta(e){if(e||M(),"string"==typeof e){let t=0,r=to.exec(e);if(r||M(),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:tl(e.seconds),nanos:tl(e.nanos)}}function tl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function tu(e){return"string"==typeof e?ts.fromBase64String(e):ts.fromUint8Array(e)}function tc(e){var t,r;return"server_timestamp"===(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function th(e){let t=e.mapValue.fields.__previous_value__;return tc(t)?th(t):t}function tf(e){let t=ta(e.mapValue.fields.__local_write_time__.timestampValue);return new Y(t.seconds,t.nanos)}class td{constructor(e,t,r,n,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class tp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tp&&e.projectId===this.projectId&&e.database===this.database}}let tg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tm={nullValue:"NULL_VALUE"};function ty(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?tc(e)?4:tN(e)?0x1fffffffffffff:tR(e)?10:11:M()}function tv(e,t){if(e===t)return!0;let r=ty(e);if(r!==ty(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tf(e).isEqual(tf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=ta(e.timestampValue),n=ta(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return tu(e.bytesValue).isEqual(tu(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return tl(e.geoPointValue.latitude)===tl(t.geoPointValue.latitude)&&tl(e.geoPointValue.longitude)===tl(t.geoPointValue.longitude);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return tl(e.integerValue)===tl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=tl(e.doubleValue),n=tl(t.doubleValue);return r===n?eO(r)===eO(n):isNaN(r)&&isNaN(n)}return!1}(e,t);case 9:return J(e.arrayValue.values||[],t.arrayValue.values||[],tv);case 10:case 11:return function(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(e3(r)!==e3(n))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===n[e]||!tv(r[e],n[e])))return!1;return!0}(e,t);default:return M()}}function tw(e,t){return void 0!==(e.values||[]).find(e=>tv(e,t))}function tb(e,t){if(e===t)return 0;let r=ty(e),n=ty(t);if(r!==n)return Q(r,n);switch(r){case 0:case 0x1fffffffffffff:return 0;case 1:return Q(e.booleanValue,t.booleanValue);case 2:return function(e,t){let r=tl(e.integerValue||e.doubleValue),n=tl(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}(e,t);case 3:return tI(e.timestampValue,t.timestampValue);case 4:return tI(tf(e),tf(t));case 5:return Q(e.stringValue,t.stringValue);case 6:return function(e,t){let r=tu(e),n=tu(t);return r.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=Q(r[e],n[e]);if(0!==t)return t}return Q(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let r=Q(tl(e.latitude),tl(t.latitude));return 0!==r?r:Q(tl(e.longitude),tl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return tS(e.arrayValue,t.arrayValue);case 10:return function(e,t){var r,n,i,s;let o=e.fields||{},a=t.fields||{},l=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=Q((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:tS(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===tg.mapValue&&t===tg.mapValue)return 0;if(e===tg.mapValue)return 1;if(t===tg.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=Q(n[e],s[e]);if(0!==t)return t;let o=tb(r[n[e]],i[s[e]]);if(0!==o)return o}return Q(n.length,s.length)}(e.mapValue,t.mapValue);default:throw M()}}function tI(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Q(e,t);let r=ta(e),n=ta(t),i=Q(r.seconds,n.seconds);return 0!==i?i:Q(r.nanos,n.nanos)}function tS(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=tb(r[e],n[e]);if(t)return t}return Q(r.length,n.length)}function t_(e){var t,r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let t=ta(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?tu(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,en.fromName(t).toString()):"geoPointValue"in e?(r=e.geoPointValue,`geo(${r.latitude},${r.longitude})`):"arrayValue"in e?function(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=t_(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${t_(e.fields[i])}`;return r+"}"}(e.mapValue):M()}function tE(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function tT(e){return!!e&&"integerValue"in e}function tx(e){return!!e&&"arrayValue"in e}function tk(e){return!!e&&"nullValue"in e}function tC(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function tA(e){return!!e&&"mapValue"in e}function tR(e){var t,r;return"__vector__"===(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function tO(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return e6(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=tO(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=tO(e.arrayValue.values[r]);return t}return Object.assign({},e)}function tN(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}let tP={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function tD(e,t){let r=tb(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function tL(e,t){let r=tb(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class tM{constructor(e){this.value=e}static empty(){return new tM({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!tA(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tO(t)}setAll(e){let t=er.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=tO(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());tA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tv(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];tA(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(e6(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new tM(tO(this.value))}}class tj{constructor(e,t,r,n,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new tj(e,0,X.min(),X.min(),X.min(),tM.empty(),0)}static newFoundDocument(e,t,r,n){return new tj(e,1,t,X.min(),r,n,0)}static newNoDocument(e,t){return new tj(e,2,t,X.min(),X.min(),tM.empty(),0)}static newUnknownDocument(e,t){return new tj(e,3,t,X.min(),X.min(),tM.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(X.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tM.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tM.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tj&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tj(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tF{constructor(e,t){this.position=e,this.inclusive=t}}function tV(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],o=e.position[i];if(n=s.field.isKeyField()?en.comparator(en.fromName(o.referenceValue),r.key):tb(o,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function tU(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!tv(e.position[r],t.position[r]))return!1;return!0}class tB{constructor(e,t="asc"){this.field=e,this.dir=t}}class tz{}class t$ extends tz{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new tJ(e,t,r):"array-contains"===t?new t0(e,r):"in"===t?new t1(e,r):"not-in"===t?new t2(e,r):"array-contains-any"===t?new t5(e,r):new t$(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new tY(e,r):new tX(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(tb(t,this.value)):null!==t&&ty(this.value)===ty(t)&&this.matchesComparison(tb(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return M()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tq extends tz{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new tq(e,t)}matches(e){return tK(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tK(e){return"and"===e.op}function tG(e){return"or"===e.op}function tH(e){return tW(e)&&tK(e)}function tW(e){for(let t of e.filters)if(t instanceof tq)return!1;return!0}function tQ(e,t){let r=e.filters.concat(t);return tq.create(r,e.op)}class tJ extends t${constructor(e,t,r){super(e,t,r),this.key=en.fromName(r.referenceValue)}matches(e){let t=en.comparator(e.key,this.key);return this.matchesComparison(t)}}class tY extends t${constructor(e,t){super(e,"in",t),this.keys=tZ("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tX extends t${constructor(e,t){super(e,"not-in",t),this.keys=tZ("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tZ(e,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(e=>en.fromName(e.referenceValue))}class t0 extends t${constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return tx(t)&&tw(t.arrayValue,this.value)}}class t1 extends t${constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&tw(this.value.arrayValue,t)}}class t2 extends t${constructor(e,t){super(e,"not-in",t)}matches(e){if(tw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!tw(this.value.arrayValue,t)}}class t5 extends t${constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!tx(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>tw(this.value.arrayValue,e))}}class t3{constructor(e,t=null,r=[],n=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function t6(e,t=null,r=[],n=[],i=null,s=null,o=null){return new t3(e,t,r,n,i,s,o)}function t4(e){if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof t$)return t.field.canonicalString()+t.op.toString()+t_(t.value);if(tH(t))return t.filters.map(t=>e(t)).join(",");{let r=t.filters.map(t=>e(t)).join(",");return`${t.op}(${r})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:"+(e.startAt.inclusive?"b:":"a:"),t+=e.startAt.position.map(e=>t_(e)).join(",")),e.endAt&&(t+="|ub:"+(e.endAt.inclusive?"a:":"b:"),t+=e.endAt.position.map(e=>t_(e)).join(",")),e.ue=t}return e.ue}function t8(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++){var r,n;if(r=e.orderBy[i],n=t.orderBy[i],!(r.dir===n.dir&&r.field.isEqual(n.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!function e(t,r){return t instanceof t$?r instanceof t$&&t.op===r.op&&t.field.isEqual(r.field)&&tv(t.value,r.value):t instanceof tq?r instanceof tq&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((t,n,i)=>t&&e(n,r.filters[i]),!0):void M()}(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!tU(e.startAt,t.startAt)&&tU(e.endAt,t.endAt)}function t7(e){return en.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function t9(e,t){return e.filters.filter(e=>e instanceof t$&&e.field.isEqual(t))}function re(e,t,r){let n=tm,i=!0;for(let r of t9(e,t)){let e=tm,t=!0;switch(r.op){case"<":case"<=":var s;e="nullValue"in(s=r.value)?tm:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?tE(tp.empty(),en.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?tR(s)?tP:{mapValue:{}}:M();break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=tm}0>tD({value:n,inclusive:i},{value:e,inclusive:t})&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];0>tD({value:n,inclusive:i},{value:e,inclusive:r.inclusive})&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function rt(e,t,r){let n=tg,i=!0;for(let r of t9(e,t)){let e=tg,t=!0;switch(r.op){case">=":case">":var s;e="nullValue"in(s=r.value)?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?tE(tp.empty(),en.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?tP:"mapValue"in s?tR(s)?{mapValue:{}}:tg:M(),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=tg}tL({value:n,inclusive:i},{value:e,inclusive:t})>0&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];tL({value:n,inclusive:i},{value:e,inclusive:r.inclusive})>0&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}class rr{constructor(e,t=null,r=[],n=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rn(e){return new rr(e)}function ri(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function rs(e){return null!==e.collectionGroup}function ro(e){if(null===e.ce){let t;e.ce=[];let r=new Set;for(let t of e.explicitOrderBy)e.ce.push(t),r.add(t.field.canonicalString());let n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new te(er.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{r.has(t.canonicalString())||t.isKeyField()||e.ce.push(new tB(t,n))}),r.has(er.keyField().canonicalString())||e.ce.push(new tB(er.keyField(),n))}return e.ce}function ra(e){return e.le||(e.le=function(e,t){if("F"===e.limitType)return t6(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new tB(e.field,t)});let r=e.endAt?new tF(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new tF(e.startAt.position,e.startAt.inclusive):null;return t6(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}(e,ro(e))),e.le}function rl(e,t){let r=e.filters.concat([t]);return new rr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function ru(e,t,r){return new rr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function rc(e,t){return t8(ra(e),ra(t))&&e.limitType===t.limitType}function rh(e){return`${t4(ra(e))}|lt:${e.limitType}`}function rf(e){var t;let r;return`Query(target=${r=(t=ra(e)).path.canonicalString(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof t$?`${t.field.canonicalString()} ${t.op} ${t_(t.value)}`:t instanceof tq?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(r+=", startAt: "+(t.startAt.inclusive?"b:":"a:"),r+=t.startAt.position.map(e=>t_(e)).join(",")),t.endAt&&(r+=", endAt: "+(t.endAt.inclusive?"a:":"b:"),r+=t.endAt.position.map(e=>t_(e)).join(",")),`Target(${r})`}; limitType=${e.limitType})`}function rd(e,t){return t.isFoundDocument()&&function(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):en.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(e,t)&&function(e,t){for(let r of ro(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(!e.startAt||!!function(e,t,r){let n=tV(e,t,r);return e.inclusive?n<=0:n<0}(e.startAt,ro(e),t))&&(!e.endAt||!!function(e,t,r){let n=tV(e,t,r);return e.inclusive?n>=0:n>0}(e.endAt,ro(e),t))}function rp(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rg(e){return(t,r)=>{let n=!1;for(let i of ro(e)){let e=function(e,t,r){let n=e.field.isKeyField()?en.comparator(t.key,r.key):function(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?tb(n,i):M()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return M()}}(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}class rm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){e6(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return e4(this.inner)}size(){return this.innerSize}}let ry=new e8(en.comparator),rv=new e8(en.comparator);function rw(...e){let t=rv;for(let r of e)t=t.insert(r.key,r);return t}function rb(e){let t=rv;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function rI(){return new rm(e=>e.toString(),(e,t)=>e.isEqual(t))}let rS=new e8(en.comparator),r_=new te(en.comparator);function rE(...e){let t=r_;for(let r of e)t=t.add(r);return t}let rT=new te(Q);function rx(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eO(t)?"-0":t}}function rk(e){return{integerValue:""+e}}function rC(e,t){return eN(t)?rk(t):rx(e,t)}class rA{constructor(){this._=void 0}}function rR(e,t){return e instanceof rM?tT(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class rO extends rA{}class rN extends rA{constructor(e){super(),this.elements=e}}function rP(e,t){let r=rF(t);for(let t of e.elements)r.some(e=>tv(e,t))||r.push(t);return{arrayValue:{values:r}}}class rD extends rA{constructor(e){super(),this.elements=e}}function rL(e,t){let r=rF(t);for(let t of e.elements)r=r.filter(e=>!tv(e,t));return{arrayValue:{values:r}}}class rM extends rA{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function rj(e){return tl(e.integerValue||e.doubleValue)}function rF(e){return tx(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class rV{constructor(e,t){this.field=e,this.transform=t}}class rU{constructor(e,t){this.version=e,this.transformResults=t}}class rB{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rB}static exists(e){return new rB(void 0,e)}static updateTime(e){return new rB(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rz(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class r${}function rq(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new rX(e.key,rB.none()):new rH(e.key,e.data,rB.none());{let r=e.data,n=tM.empty(),i=new te(er.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new rW(e.key,n,new tn(i.toArray()),rB.none())}}function rK(e,t,r,n){return e instanceof rH?function(e,t,r,n){if(!rz(e.precondition,t))return r;let i=e.value.clone(),s=rY(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,r,n):e instanceof rW?function(e,t,r,n){if(!rz(e.precondition,t))return r;let i=rY(e.fieldTransforms,n,t),s=t.data;return(s.setAll(rQ(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,n):rz(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}function rG(e,t){var r,n;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===r&&void 0===n||!(!r||!n)&&J(r,n,(e,t)=>{var r,n;return e.field.isEqual(t.field)&&(r=e.transform,n=t.transform,r instanceof rN&&n instanceof rN||r instanceof rD&&n instanceof rD?J(r.elements,n.elements,tv):r instanceof rM&&n instanceof rM?tv(r.Pe,n.Pe):r instanceof rO&&n instanceof rO)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class rH extends r${constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class rW extends r${constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function rQ(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function rJ(e,t,r){var n;let i=new Map;e.length===r.length||M();for(let s=0;s<r.length;s++){let o=e[s],a=o.transform,l=t.data.field(o.field);i.set(o.field,(n=r[s],a instanceof rN?rP(a,l):a instanceof rD?rL(a,l):n))}return i}function rY(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,e instanceof rO?function(e,t){let r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&tc(t)&&(t=th(t)),t&&(r.fields.__previous_value__=t),{mapValue:r}}(t,s):e instanceof rN?rP(e,s):e instanceof rD?rL(e,s):function(e,t){let r=rR(e,t),n=rj(r)+rj(e.Pe);return tT(r)&&tT(e.Pe)?rk(n):rx(e.serializer,n)}(e,s))}return n}class rX extends r${constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rZ extends r${constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class r0{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let i=this.mutations[t];if(i.key.isEqual(e.key)){var n;n=r[t],i instanceof rH?function(e,t,r){let n=e.value.clone(),i=rJ(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(i,e,n):i instanceof rW?function(e,t,r){if(!rz(e.precondition,t))return void t.convertToUnknownDocument(r.version);let n=rJ(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(rQ(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}(i,e,n):function(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=rK(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=rK(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=rI();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,o=this.applyToLocalView(s,i.mutatedFields),a=rq(s,o=t.has(n.key)?null:o);null!==a&&r.set(n.key,a),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rE())}isEqual(e){return this.batchId===e.batchId&&J(this.mutations,e.mutations,(e,t)=>rG(e,t))&&J(this.baseMutations,e.baseMutations,(e,t)=>rG(e,t))}}class r1{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){e.mutations.length===r.length||M();let n=rS,i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new r1(e,t,r,n)}}class r2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class r5{constructor(e,t){this.count=e,this.unchangedNames=t}}function r3(e){if(void 0===e)return P("GRPC error has no .code"),j.UNKNOWN;switch(e){case d.OK:return j.OK;case d.CANCELLED:return j.CANCELLED;case d.UNKNOWN:return j.UNKNOWN;case d.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case d.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case d.INTERNAL:return j.INTERNAL;case d.UNAVAILABLE:return j.UNAVAILABLE;case d.UNAUTHENTICATED:return j.UNAUTHENTICATED;case d.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case d.NOT_FOUND:return j.NOT_FOUND;case d.ALREADY_EXISTS:return j.ALREADY_EXISTS;case d.PERMISSION_DENIED:return j.PERMISSION_DENIED;case d.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case d.ABORTED:return j.ABORTED;case d.OUT_OF_RANGE:return j.OUT_OF_RANGE;case d.UNIMPLEMENTED:return j.UNIMPLEMENTED;case d.DATA_LOSS:return j.DATA_LOSS;default:return M()}}(p=d||(d={}))[p.OK=0]="OK",p[p.CANCELLED=1]="CANCELLED",p[p.UNKNOWN=2]="UNKNOWN",p[p.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",p[p.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",p[p.NOT_FOUND=5]="NOT_FOUND",p[p.ALREADY_EXISTS=6]="ALREADY_EXISTS",p[p.PERMISSION_DENIED=7]="PERMISSION_DENIED",p[p.UNAUTHENTICATED=16]="UNAUTHENTICATED",p[p.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",p[p.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",p[p.ABORTED=10]="ABORTED",p[p.OUT_OF_RANGE=11]="OUT_OF_RANGE",p[p.UNIMPLEMENTED=12]="UNIMPLEMENTED",p[p.INTERNAL=13]="INTERNAL",p[p.UNAVAILABLE=14]="UNAVAILABLE",p[p.DATA_LOSS=15]="DATA_LOSS";let r6=new n([0xffffffff,0xffffffff],0);function r4(e){let t=(new TextEncoder).encode(e),r=new i;return r.update(t),new Uint8Array(r.digest())}function r8(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new n([r,i],0),new n([s,o],0)]}class r7{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new r9(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new r9(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new r9(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=n.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(n.fromNumber(r)));return 1===i.compare(r6)&&(i=new n([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;let[t,r]=r8(r4(e));for(let e=0;e<this.hashCount;e++){let n=this.Ee(t,r,e);if(!this.de(n))return!1}return!0}static create(e,t,r){let n=new r7(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,t);return r.forEach(e=>n.insert(e)),n}insert(e){if(0===this.Ie)return;let[t,r]=r8(r4(e));for(let e=0;e<this.hashCount;e++){let n=this.Ee(t,r,e);this.Ae(n)}}Ae(e){let t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class r9 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ne{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,nt.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ne(X.min(),n,new e8(Q),ry,rE())}}class nt{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nt(r,t,rE(),rE(),rE())}}class nr{constructor(e,t,r,n){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=n}}class nn{constructor(e,t){this.targetId=e,this.me=t}}class ni{constructor(e,t,r=ts.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class ns{constructor(){this.fe=0,this.ge=nl(),this.pe=ts.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=rE(),t=rE(),r=rE();return this.ge.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:M()}}),new nt(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=nl()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,this.fe>=0||M()}Ne(){this.we=!0,this.ye=!0}}class no{constructor(e){this.Le=e,this.Be=new Map,this.ke=ry,this.qe=na(),this.Qe=new e8(Q)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:M()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,r=e.me.count,n=this.Je(t);if(n){let i=n.target;if(t7(i)){if(0===r){let e=new en(i.path);this.Ue(t,e,tj.newNoDocument(e,X.min()))}else 1===r||M()}else{let n=this.Ye(t);if(n!==r){let r=this.Ze(e),i=r?this.Xe(r,e,n):1;0!==i&&(this.je(t),this.Qe=this.Qe.insert(t,2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){let t,r;let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;try{t=tu(i).toUint8Array()}catch(e){if(e instanceof ti)return D("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new r7(t,s,o)}catch(e){return D(e instanceof r9?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ie?null:r}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),n=0;return r.forEach(r=>{let i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,r,null),n++)}),n}rt(e){let t=new Map;this.Be.forEach((r,n)=>{let i=this.Je(n);if(i){if(r.current&&t7(i.target)){let t=new en(i.target.path);null!==this.ke.get(t)||this.it(n,t)||this.Ue(n,t,tj.newNoDocument(t,e))}r.be&&(t.set(n,r.ve()),r.Ce())}});let r=rE();this.qe.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.ke.forEach((t,r)=>r.setReadTime(e));let n=new ne(e,t,this.Qe,this.ke,r);return this.ke=ry,this.qe=na(),this.Qe=new e8(Q),n}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let n=this.Ge(e);this.it(e,t)?n.Fe(t,1):n.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ns,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new te(Q),this.qe=this.qe.insert(e,t)),t}ze(e){let t=null!==this.Je(e);return t||N("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ns),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function na(){return new e8(en.comparator)}function nl(){return new e8(en.comparator)}let nu={asc:"ASCENDING",desc:"DESCENDING"},nc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nh={and:"AND",or:"OR"};class nf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nd(e,t){return e.useProto3Json||null==t?t:{value:t}}function np(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ng(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nm(e){return e||M(),X.fromTimestamp(function(e){let t=ta(e);return new Y(t.seconds,t.nanos)}(e))}function ny(e,t){return nv(e,t).canonicalString()}function nv(e,t){let r=new ee(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?r:r.child(t)}function nw(e){let t=ee.fromString(e);return nL(t)||M(),t}function nb(e,t){return ny(e.databaseId,t.path)}function nI(e,t){let r=nw(t);if(r.get(1)!==e.databaseId.projectId)throw new F(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new F(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new en(nT(r))}function nS(e,t){return ny(e.databaseId,t)}function n_(e){let t=nw(e);return 4===t.length?ee.emptyPath():nT(t)}function nE(e){return new ee(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nT(e){return e.length>4&&"documents"===e.get(4)||M(),e.popFirst(5)}function nx(e,t,r){return{name:nb(e,t),fields:r.value.mapValue.fields}}function nk(e,t,r){let n=nI(e,t.name),i=nm(t.updateTime),s=t.createTime?nm(t.createTime):X.min(),o=new tM({mapValue:{fields:t.fields}}),a=tj.newFoundDocument(n,i,s,o);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function nC(e,t){var r;let n;if(t instanceof rH)n={update:nx(e,t.key,t.value)};else if(t instanceof rX)n={delete:nb(e,t.key)};else if(t instanceof rW)n={update:nx(e,t.key,t.data),updateMask:function(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}(t.fieldMask)};else{if(!(t instanceof rZ))return M();n={verify:nb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let r=t.transform;if(r instanceof rO)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof rN)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof rD)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof rM)return{fieldPath:t.field.canonicalString(),increment:r.Pe};throw M()})(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:np(e,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:M()),n}function nA(e,t){var r;let n=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?rB.updateTime(nm(r.updateTime)):void 0!==r.exists?rB.exists(r.exists):rB.none():rB.none(),i=t.updateTransforms?t.updateTransforms.map(t=>{let r;return r=null,"setToServerValue"in t?("REQUEST_TIME"===t.setToServerValue||M(),r=new rO):"appendMissingElements"in t?r=new rN(t.appendMissingElements.values||[]):"removeAllFromArray"in t?r=new rD(t.removeAllFromArray.values||[]):"increment"in t?r=new rM(e,t.increment):M(),new rV(er.fromServerFormat(t.fieldPath),r)}):[];if(t.update){t.update.name;let r=nI(e,t.update.name),s=new tM({mapValue:{fields:t.update.fields}});return t.updateMask?new rW(r,s,new tn((t.updateMask.fieldPaths||[]).map(e=>er.fromServerFormat(e))),n,i):new rH(r,s,n,i)}return t.delete?new rX(nI(e,t.delete),n):t.verify?new rZ(nI(e,t.verify),n):M()}function nR(e,t){return{documents:[nS(e,t.path)]}}function nO(e,t){var r,n;let i;let s={structuredQuery:{}},o=t.path;null!==t.collectionGroup?(i=o,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=o.popLast(),s.structuredQuery.from=[{collectionId:o.lastSegment()}]),s.parent=nS(e,i);let a=function(e){if(0!==e.length)return function e(t){return t instanceof t$?function(e){if("=="===e.op){if(tC(e.value))return{unaryFilter:{field:nP(e.field),op:"IS_NAN"}};if(tk(e.value))return{unaryFilter:{field:nP(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(tC(e.value))return{unaryFilter:{field:nP(e.field),op:"IS_NOT_NAN"}};if(tk(e.value))return{unaryFilter:{field:nP(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nP(e.field),op:nc[e.op],value:e.value}}}(t):t instanceof tq?function(t){let r=t.getFilters().map(t=>e(t));return 1===r.length?r[0]:{compositeFilter:{op:nh[t.op],filters:r}}}(t):M()}(tq.create(e,"and"))}(t.filters);a&&(s.structuredQuery.where=a);let l=function(e){if(0!==e.length)return e.map(e=>({field:nP(e.field),direction:nu[e.dir]}))}(t.orderBy);l&&(s.structuredQuery.orderBy=l);let u=nd(e,t.limit);return null!==u&&(s.structuredQuery.limit=u),t.startAt&&(s.structuredQuery.startAt={before:(r=t.startAt).inclusive,values:r.position}),t.endAt&&(s.structuredQuery.endAt={before:!(n=t.endAt).inclusive,values:n.position}),{_t:s,parent:i}}function nN(e){var t;let r,n=n_(e.parent),i=e.structuredQuery,s=i.from?i.from.length:0,o=null;if(s>0){1===s||M();let e=i.from[0];e.allDescendants?o=e.collectionId:n=n.child(e.collectionId)}let a=[];i.where&&(a=function(e){let t=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=nD(e.unaryFilter.field);return t$.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=nD(e.unaryFilter.field);return t$.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=nD(e.unaryFilter.field);return t$.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=nD(e.unaryFilter.field);return t$.create(i,"!=",{nullValue:"NULL_VALUE"});default:return M()}}(t):void 0!==t.fieldFilter?t$.create(nD(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return M()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?tq.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return M()}}(t.compositeFilter.op)):M()}(e);return t instanceof tq&&tH(t)?t.getFilters():[t]}(i.where));let l=[];i.orderBy&&(l=i.orderBy.map(e=>new tB(nD(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let u=null;i.limit&&(u=null==(r="object"==typeof(t=i.limit)?t.value:t)?null:r);let c=null;i.startAt&&(c=function(e){let t=!!e.before;return new tF(e.values||[],t)}(i.startAt));let h=null;return i.endAt&&(h=function(e){let t=!e.before;return new tF(e.values||[],t)}(i.endAt)),new rr(n,o,l,a,u,"F",c,h)}function nP(e){return{fieldPath:e.canonicalString()}}function nD(e){return er.fromServerFormat(e.fieldPath)}function nL(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class nM{constructor(e,t,r,n,i=X.min(),s=X.min(),o=ts.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new nM(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nM(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nM(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nM(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nj{constructor(e){this.ct=e}}function nF(e,t){let r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:nV(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument()){var i;n.document={name:nb(i=e.ct,t.key),fields:t.data.value.mapValue.fields,updateTime:np(i,t.version.toTimestamp()),createTime:np(i,t.createTime.toTimestamp())}}else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:nU(t.version)};else{if(!t.isUnknownDocument())return M();n.unknownDocument={path:r.path.toArray(),version:nU(t.version)}}return n}function nV(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function nU(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function nB(e){let t=new Y(e.seconds,e.nanoseconds);return X.fromTimestamp(t)}function nz(e,t){let r=(t.baseMutations||[]).map(t=>nA(e.ct,t));for(let e=0;e<t.mutations.length-1;++e){let r=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){let n=t.mutations[e+1];r.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}let n=t.mutations.map(t=>nA(e.ct,t)),i=Y.fromMillis(t.localWriteTimeMs);return new r0(t.batchId,i,r,n)}function n$(e){var t;let r=nB(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?nB(e.lastLimboFreeSnapshotVersion):X.min();return new nM(void 0!==e.query.documents?(1===(t=e.query).documents.length||M(),ra(rn(n_(t.documents[0])))):ra(nN(e.query)),e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,n,ts.fromBase64String(e.resumeToken))}function nq(e,t){let r;let n=nU(t.snapshotVersion),i=nU(t.lastLimboFreeSnapshotVersion);r=t7(t.target)?nR(e.ct,t.target):nO(e.ct,t.target)._t;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:t4(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function nK(e){let t=nN({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ru(t,t.limit,"L"):t}function nG(e,t){return new r2(t.largestBatchId,nA(e.ct,t.overlayMutation))}function nH(e,t){let r=t.path.lastSegment();return[e,eP(t.path.popLast()),r]}function nW(e,t,r,n){return{indexId:e,uid:t,sequenceNumber:r,readTime:nU(n.readTime),documentKey:eP(n.documentKey.path),largestBatchId:n.largestBatchId}}class nQ{getBundleMetadata(e,t){return nJ(e).get(t).next(e=>{if(e)return{id:e.bundleId,createTime:nB(e.createTime),version:e.version}})}saveBundleMetadata(e,t){return nJ(e).put({bundleId:t.id,createTime:nU(nm(t.createTime)),version:t.version})}getNamedQuery(e,t){return nY(e).get(t).next(e=>{if(e)return{name:e.name,query:nK(e.bundledQuery),readTime:nB(e.readTime)}})}saveNamedQuery(e,t){return nY(e).put({name:t.name,readTime:nU(nm(t.readTime)),bundledQuery:t.bundledQuery})}}function nJ(e){return e5(e,"bundles")}function nY(e){return e5(e,"namedQueries")}class nX{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new nX(e,t.uid||"")}getOverlay(e,t){return nZ(e).get(nH(this.userId,t)).next(e=>e?nG(this.serializer,e):null)}getOverlays(e,t){let r=rI();return em.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){let n=[];return r.forEach((r,i)=>{let s=new r2(t,i);n.push(this.ht(e,s))}),em.waitFor(n)}removeOverlaysForBatchId(e,t,r){let n=new Set;t.forEach(e=>n.add(eP(e.getCollectionPath())));let i=[];return n.forEach(t=>{let n=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);i.push(nZ(e).j("collectionPathOverlayIndex",n))}),em.waitFor(i)}getOverlaysForCollection(e,t,r){let n=rI(),i=eP(t),s=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return nZ(e).U("collectionPathOverlayIndex",s).next(e=>{for(let t of e){let e=nG(this.serializer,t);n.set(e.getKey(),e)}return n})}getOverlaysForCollectionGroup(e,t,r,n){let i;let s=rI(),o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nZ(e).J({index:"collectionGroupOverlayIndex",range:o},(e,t,r)=>{let o=nG(this.serializer,t);s.size()<n||o.largestBatchId===i?(s.set(o.getKey(),o),i=o.largestBatchId):r.done()}).next(()=>s)}ht(e,t){return nZ(e).put(function(e,t,r){let[n,i,s]=nH(t,r.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:nC(e.ct,r.mutation)}}(this.serializer,this.userId,t))}}function nZ(e){return e5(e,"documentOverlays")}class n0{Pt(e){return e5(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(e=>{let t=null==e?void 0:e.value;return t?ts.fromUint8Array(t):ts.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class n1{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(tl(e.integerValue));else if("doubleValue"in e){let r=tl(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),eO(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=ta(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(tu(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?tN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):tR(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):M()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};for(let e of(this.dt(t,55),Object.keys(r)))this.Vt(e,t),this.Tt(r[e],t)}wt(e,t){var r,n;let i=e.fields||{};this.dt(t,53);let s="value",o=(null===(n=null===(r=i[s].arrayValue)||void 0===r?void 0:r.values)||void 0===n?void 0:n.length)||0;this.dt(t,15),t.At(tl(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){let r=e.values||[];for(let e of(this.dt(t,50),r))this.Tt(e,t)}yt(e,t){this.dt(t,37),en.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function n2(e){return Math.ceil((64-function(e){let t=0;for(let r=0;r<8;++r){let n=function(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}(255&e[r]);if(t+=n,8!==n)break}return t}(e))/8)}n1.vt=new n1;class n5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{let e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Bt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Ot(e);else if(e<2048)this.Ot(960|e>>>6),this.Ot(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e);else{let e=t.codePointAt(0);this.Ot(240|e>>>18),this.Ot(128|63&e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e)}}this.Nt()}kt(e){let t=this.qt(e),r=n2(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=255&t[e]}Kt(e){let t=this.qt(e),r=n2(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let e=1;e<t.length;++e)t[e]^=r?255:0;return t}Ft(e){let t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class n3{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class n6{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class n4{constructor(){this.jt=new n5,this.Ht=new n3(this.jt),this.Jt=new n6(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class n8{constructor(e,t,r,n){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=n}Zt(){let e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n8(this.indexId,this.documentKey,this.arrayValue,r)}}function n7(e,t){let r=e.indexId-t.indexId;return 0!==r?r:0!==(r=n9(e.arrayValue,t.arrayValue))?r:0!==(r=n9(e.directionalValue,t.directionalValue))?r:en.comparator(e.documentKey,t.documentKey)}function n9(e,t){for(let r=0;r<e.length&&r<t.length;++r){let n=e[r]-t[r];if(0!==n)return n}return e.length-t.length}class ie{constructor(e){for(let t of(this.Xt=new te((e,t)=>er.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[],e.filters))t.isInequality()?this.Xt=this.Xt.add(t):this.tn.push(t)}get nn(){return this.Xt.size>1}rn(e){if(e.collectionGroup===this.collectionId||M(),this.nn)return!1;let t=es(e);if(void 0!==t&&!this.sn(t))return!1;let r=eo(e),n=new Set,i=0,s=0;for(;i<r.length&&this.sn(r[i]);++i)n=n.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){let e=this.Xt.getIterator().getNext();if(!n.has(e.field.canonicalString())){let t=r[i];if(!this.on(e,t)||!this._n(this.en[s++],t))return!1}++i}for(;i<r.length;++i){let e=r[i];if(s>=this.en.length||!this._n(this.en[s++],e))return!1}return!0}an(){if(this.nn)return null;let e=new te(er.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField()){if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new ea(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ea(r.field,0))}}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ea(r.field,"asc"===r.dir?0:1)));return new ei(ei.UNKNOWN_ID,this.collectionId,t,el.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function it(e){return e instanceof t$}function ir(e){return e instanceof tq&&tH(e)}function ii(e){return it(e)||ir(e)||function(e){if(e instanceof tq&&tG(e)){for(let t of e.getFilters())if(!it(t)&&!ir(t))return!1;return!0}return!1}(e)}function is(e,t){return e instanceof t$||e instanceof tq||M(),t instanceof t$||t instanceof tq||M(),ia(e instanceof t$?t instanceof t$?tq.create([e,t],"and"):io(e,t):t instanceof t$?io(t,e):function(e,t){if(e.filters.length>0&&t.filters.length>0||M(),tK(e)&&tK(t))return tQ(e,t.getFilters());let r=tG(e)?e:t,n=tG(e)?t:e,i=r.filters.map(e=>is(e,n));return tq.create(i,"or")}(e,t))}function io(e,t){if(tK(t))return tQ(t,e.getFilters());{let r=t.filters.map(t=>is(e,t));return tq.create(r,"or")}}function ia(e){if(e instanceof t$||e instanceof tq||M(),e instanceof t$)return e;let t=e.getFilters();if(1===t.length)return ia(t[0]);if(tW(e))return e;let r=t.map(e=>ia(e)),n=[];return r.forEach(t=>{t instanceof t$?n.push(t):t instanceof tq&&(t.op===e.op?n.push(...t.filters):n.push(t))}),1===n.length?n[0]:tq.create(n,e.op)}class il{constructor(){this.un=new iu}addToCollectionParentIndex(e,t){return this.un.add(t),em.resolve()}getCollectionParents(e,t){return em.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return em.resolve()}deleteFieldIndex(e,t){return em.resolve()}deleteAllFieldIndexes(e){return em.resolve()}createTargetIndexes(e,t){return em.resolve()}getDocumentsMatchingTarget(e,t){return em.resolve(null)}getIndexType(e,t){return em.resolve(0)}getFieldIndexes(e,t){return em.resolve([])}getNextCollectionGroupToUpdate(e){return em.resolve(null)}getMinOffset(e,t){return em.resolve(eh.min())}getMinOffsetFromCollectionGroup(e,t){return em.resolve(eh.min())}updateCollectionGroup(e,t,r){return em.resolve()}updateIndexEntries(e,t){return em.resolve()}}class iu{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new te(ee.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new te(ee.comparator)).toArray()}}let ic=new Uint8Array(0);class ih{constructor(e,t){this.databaseId=t,this.cn=new iu,this.ln=new rm(e=>t4(e),(e,t)=>t8(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let i={collectionId:r,parent:eP(n)};return id(e).put(i)}return em.resolve()}getCollectionParents(e,t){let r=[],n=IDBKeyRange.bound([t,""],[t+"\0",""],!1,!0);return id(e).U(n).next(e=>{for(let n of e){if(n.collectionId!==t)break;r.push(eD(n.parent))}return r})}addFieldIndex(e,t){let r=ig(e),n={indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])};delete n.indexId;let i=r.add(n);if(t.indexState){let r=im(e);return i.next(e=>{r.put(nW(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){let r=ig(e),n=im(e),i=ip(e);return r.delete(t.indexId).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=ig(e),r=ip(e),n=im(e);return t.j().next(()=>r.j()).next(()=>n.j())}createTargetIndexes(e,t){return em.forEach(this.hn(t),t=>this.getIndexType(e,t).next(r=>{if(0===r||1===r){let r=new ie(t).an();if(null!=r)return this.addFieldIndex(e,r)}}))}getDocumentsMatchingTarget(e,t){let r=ip(e),n=!0,i=new Map;return em.forEach(this.hn(t),t=>this.Pn(e,t).next(e=>{n&&(n=!!e),i.set(t,e)})).next(()=>{if(n){let e=rE(),n=[];return em.forEach(i,(i,s)=>{N("IndexedDbIndexManager",`Using index id=${i.indexId}|cg=${i.collectionGroup}|f=${i.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")} to execute ${t4(t)}`);let o=function(e,t){let r=es(t);if(void 0===r)return null;for(let t of t9(e,r.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),a=function(e,t){let r=new Map;for(let n of eo(t))for(let t of t9(e,n.fieldPath))switch(t.op){case"==":case"in":r.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(n.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}(s,i),l=function(e,t){let r=[],n=!0;for(let i of eo(t)){let t=0===i.kind?re(e,i.fieldPath,e.startAt):rt(e,i.fieldPath,e.startAt);r.push(t.value),n&&(n=t.inclusive)}return new tF(r,n)}(s,i),u=function(e,t){let r=[],n=!0;for(let i of eo(t)){let t=0===i.kind?rt(e,i.fieldPath,e.endAt):re(e,i.fieldPath,e.endAt);r.push(t.value),n&&(n=t.inclusive)}return new tF(r,n)}(s,i),c=this.In(i,s,l),h=this.In(i,s,u),f=this.Tn(i,s,a),d=this.En(i.indexId,o,c,l.inclusive,h,u.inclusive,f);return em.forEach(d,i=>r.G(i,t.limit).next(t=>{t.forEach(t=>{let r=en.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),n.push(r))})}))}).next(()=>n)}return em.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:(function(e){if(0===e.getFilters().length)return[];let t=function e(t){if(t instanceof t$||t instanceof tq||M(),t instanceof t$)return t;if(1===t.filters.length)return e(t.filters[0]);let r=t.filters.map(t=>e(t)),n=tq.create(r,t.op);return ii(n=ia(n))?n:(n instanceof tq||M(),tK(n)||M(),n.filters.length>1||M(),n.filters.reduce((e,t)=>is(e,t)))}(function e(t){var r,n;if(t instanceof t$||t instanceof tq||M(),t instanceof t$){if(t instanceof t1){let e=(null===(n=null===(r=t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===n?void 0:n.map(e=>t$.create(t.field,"==",e)))||[];return tq.create(e,"or")}return t}let i=t.filters.map(t=>e(t));return tq.create(i,t.op)}(e));return ii(t)||M(),it(t)||ir(t)?[t]:t.getFilters()})(tq.create(e.filters,"and")).map(t=>t6(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t)),t}En(e,t,r,n,i,s,o){let a=(null!=t?t.length:1)*Math.max(r.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){let a=t?this.dn(t[c/l]):ic,h=this.An(e,a,r[c%l],n),f=this.Rn(e,a,i[c%l],s),d=o.map(t=>this.An(e,a,t,!0));u.push(...this.createRange(h,f,d))}return u}An(e,t,r,n){let i=new n8(e,en.empty(),t,r);return n?i:i.Zt()}Rn(e,t,r,n){let i=new n8(e,en.empty(),t,r);return n?i.Zt():i}Pn(e,t){let r=new ie(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next(e=>{let t=null;for(let n of e)r.rn(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t})}getIndexType(e,t){let r=2,n=this.hn(t);return em.forEach(n,t=>this.Pn(e,t).next(e=>{e?0!==r&&e.fields.length<function(e){let t=new te(er.comparator),r=!1;for(let n of e.filters)for(let e of n.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(let r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(r?1:0)}(t)&&(r=1):r=0})).next(()=>null!==t.limit&&n.length>1&&2===r?1:r)}Vn(e,t){let r=new n4;for(let n of eo(e)){let e=t.data.field(n.fieldPath);if(null==e)return null;let i=r.Yt(n.kind);n1.vt.It(e,i)}return r.zt()}dn(e){let t=new n4;return n1.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new n4;return n1.vt.It(tE(this.databaseId,t),r.Yt(function(e){let t=eo(e);return 0===t.length?0:t[t.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let n=[];n.push(new n4);let i=0;for(let s of eo(e)){let e=r[i++];for(let r of n)if(this.fn(t,s.fieldPath)&&tx(e))n=this.gn(n,s,e);else{let t=r.Yt(s.kind);n1.vt.It(e,t)}}return this.pn(n)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let n=[...e],i=[];for(let e of r.arrayValue.values||[])for(let r of n){let n=new n4;n.seed(r.zt()),n1.vt.It(e,n.Yt(t.kind)),i.push(n)}return i}fn(e,t){return!!e.filters.find(e=>e instanceof t$&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let r=ig(e),n=im(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(e=>{let t=[];return em.forEach(e,e=>n.get([e.indexId,this.uid]).next(r=>{t.push(function(e,t){let r=t?new el(t.sequenceNumber,new eh(nB(t.readTime),new en(eD(t.documentKey)),t.largestBatchId)):el.empty(),n=e.fields.map(([e,t])=>new ea(er.fromServerFormat(e),t));return new ei(e.indexId,e.collectionGroup,n,r)}(e,r))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:Q(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,r){let n=ig(e),i=im(e);return this.yn(e).next(e=>n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>em.forEach(t,t=>i.put(nW(t.indexId,this.uid,e,r)))))}updateIndexEntries(e,t){let r=new Map;return em.forEach(t,(t,n)=>{let i=r.get(t.collectionGroup);return(i?em.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(r.set(t.collectionGroup,i),em.forEach(i,r=>this.wn(e,t,r).next(t=>{let i=this.Sn(n,r);return t.isEqual(i)?em.resolve():this.bn(e,n,r,t,i)}))))})}Dn(e,t,r,n){return ip(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,n){return ip(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let n=ip(e),i=new te(n7);return n.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(e,n)=>{i=i.add(new n8(r.indexId,t,n.arrayValue,n.directionalValue))}).next(()=>i)}Sn(e,t){let r=new te(n7),n=this.Vn(t,e);if(null==n)return r;let i=es(t);if(null!=i){let s=e.data.field(i.fieldPath);if(tx(s))for(let i of s.arrayValue.values||[])r=r.add(new n8(t.indexId,e.key,this.dn(i),n))}else r=r.add(new n8(t.indexId,e.key,ic,n));return r}bn(e,t,r,n,i){N("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(e,t,r,n,i){let s=e.getIterator(),o=t.getIterator(),a=tr(s),l=tr(o);for(;a||l;){let e=!1,t=!1;if(a&&l){let n=r(a,l);n<0?t=!0:n>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(n(l),l=tr(o)):t?(i(a),a=tr(s)):(a=tr(s),l=tr(o))}}(n,i,n7,n=>{s.push(this.Dn(e,t,r,n))},n=>{s.push(this.vn(e,t,r,n))}),em.waitFor(s)}yn(e){let t=1;return im(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,r,n)=>{n.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((e,t)=>n7(e,t)).filter((e,t,r)=>!t||0!==n7(e,r[t-1]));let n=[];for(let i of(n.push(e),r)){let r=n7(i,e),s=n7(i,t);if(0===r)n[0]=e.Zt();else if(r>0&&s<0)n.push(i),n.push(i.Zt());else if(s>0)break}n.push(t);let i=[];for(let e=0;e<n.length;e+=2){if(this.Cn(n[e],n[e+1]))return[];let t=[n[e].indexId,this.uid,n[e].arrayValue,n[e].directionalValue,ic,[]],r=[n[e+1].indexId,this.uid,n[e+1].arrayValue,n[e+1].directionalValue,ic,[]];i.push(IDBKeyRange.bound(t,r))}return i}Cn(e,t){return n7(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(iy)}getMinOffset(e,t){return em.mapArray(this.hn(t),t=>this.Pn(e,t).next(e=>e||M())).next(iy)}}function id(e){return e5(e,"collectionParents")}function ip(e){return e5(e,"indexEntries")}function ig(e){return e5(e,"indexConfiguration")}function im(e){return e5(e,"indexState")}function iy(e){0!==e.length||M();let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){let i=e[n].indexState.offset;0>ef(i,t)&&(t=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new eh(t.readTime,t.documentKey,r)}let iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class iw{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new iw(e,iw.DEFAULT_COLLECTION_PERCENTILE,iw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ib(e,t,r){let n=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(r.batchId),a=0,l=n.J({range:o},(e,t,r)=>(a++,r.delete()));s.push(l.next(()=>{1===a||M()}));let u=[];for(let e of r.mutations){var c,h;let n=(c=e.key.path,h=r.batchId,[t,eP(c),h]);s.push(i.delete(n)),u.push(e.key)}return em.waitFor(s).next(()=>u)}function iI(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw M();t=e.noDocument}return JSON.stringify(t).length}iw.DEFAULT_COLLECTION_PERCENTILE=10,iw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,iw.DEFAULT=new iw(0x2800000,iw.DEFAULT_COLLECTION_PERCENTILE,iw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),iw.DISABLED=new iw(-1,0,0);class iS{constructor(e,t,r,n){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=n,this.Fn={}}static lt(e,t,r,n){return""!==e.uid||M(),new iS(e.isAuthenticated()?e.uid:"",t,r,n)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return iE(e).J({index:"userMutationsIndex",range:r},(e,r,n)=>{t=!1,n.done()}).next(()=>t)}addMutationBatch(e,t,r,n){let i=iT(e),s=iE(e);return s.add({}).next(o=>{"number"==typeof o||M();let a=new r0(o,t,r,n),l=function(e,t,r){let n=r.baseMutations.map(t=>nC(e.ct,t)),i=r.mutations.map(t=>nC(e.ct,t));return{userId:t,batchId:r.batchId,localWriteTimeMs:r.localWriteTime.toMillis(),baseMutations:n,mutations:i}}(this.serializer,this.userId,a),u=[],c=new te((e,t)=>Q(e.canonicalString(),t.canonicalString()));for(let e of n){let t=[this.userId,eP(e.key.path),o];c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,eM))}return c.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),em.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return iE(e).get(t).next(e=>e?(e.userId===this.userId||M(),nz(this.serializer,e)):null)}Mn(e,t){return this.Fn[t]?em.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){let r=e.keys();return this.Fn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]),i=null;return iE(e).J({index:"userMutationsIndex",range:n},(e,t,n)=>{t.userId===this.userId&&(t.batchId>=r||M(),i=nz(this.serializer,t)),n.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return iE(e).J({index:"userMutationsIndex",range:t,reverse:!0},(e,t,n)=>{r=t.batchId,n.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return iE(e).U("userMutationsIndex",t).next(e=>e.map(e=>nz(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=[this.userId,eP(t.path)],n=IDBKeyRange.lowerBound(r),i=[];return iT(e).J({range:n},(r,n,s)=>{let[o,a,l]=r,u=eD(a);if(o===this.userId&&t.path.isEqual(u))return iE(e).get(l).next(e=>{if(!e)throw M();e.userId===this.userId||M(),i.push(nz(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new te(Q),n=[];return t.forEach(t=>{let i=[this.userId,eP(t.path)],s=IDBKeyRange.lowerBound(i),o=iT(e).J({range:s},(e,n,i)=>{let[s,o,a]=e,l=eD(o);s===this.userId&&t.path.isEqual(l)?r=r.add(a):i.done()});n.push(o)}),em.waitFor(n).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=[this.userId,eP(r)],s=IDBKeyRange.lowerBound(i),o=new te(Q);return iT(e).J({range:s},(e,t,i)=>{let[s,a,l]=e,u=eD(a);s===this.userId&&r.isPrefixOf(u)?u.length===n&&(o=o.add(l)):i.done()}).next(()=>this.xn(e,o))}xn(e,t){let r=[],n=[];return t.forEach(t=>{n.push(iE(e).get(t).next(e=>{if(null===e)throw M();e.userId===this.userId||M(),r.push(nz(this.serializer,e))}))}),em.waitFor(n).next(()=>r)}removeMutationBatch(e,t){return ib(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),em.forEach(r,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return em.resolve();let r=IDBKeyRange.lowerBound([this.userId]),n=[];return iT(e).J({range:r},(e,t,r)=>{if(e[0]===this.userId){let t=eD(e[1]);n.push(t)}else r.done()}).next(()=>{0===n.length||M()})})}containsKey(e,t){return i_(e,this.userId,t)}Nn(e){return ix(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function i_(e,t,r){let n=[t,eP(r.path)],i=n[1],s=IDBKeyRange.lowerBound(n),o=!1;return iT(e).J({range:s,H:!0},(e,r,n)=>{let[s,a,l]=e;s===t&&a===i&&(o=!0),n.done()}).next(()=>o)}function iE(e){return e5(e,"mutations")}function iT(e){return e5(e,"documentMutations")}function ix(e){return e5(e,"mutationQueues")}class ik{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ik(0)}static kn(){return new ik(-1)}}class iC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ik(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(e=>X.fromTimestamp(new Y(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.Qn(e,n)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>iA(e).delete(t.targetId)).next(()=>this.qn(e)).next(t=>(t.targetCount>0||M(),t.targetCount-=1,this.Qn(e,t)))}removeTargets(e,t,r){let n=0,i=[];return iA(e).J((s,o)=>{let a=n$(o);a.sequenceNumber<=t&&null===r.get(a.targetId)&&(n++,i.push(this.removeTargetData(e,a)))}).next(()=>em.waitFor(i)).next(()=>n)}forEachTarget(e,t){return iA(e).J((e,r)=>{t(n$(r))})}qn(e){return iR(e).get("targetGlobalKey").next(e=>(null!==e||M(),e))}Qn(e,t){return iR(e).put("targetGlobalKey",t)}Kn(e,t){return iA(e).put(nq(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(e=>e.targetCount)}getTargetData(e,t){let r=t4(t),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return iA(e).J({range:n,index:"queryTargetsIndex"},(e,r,n)=>{let s=n$(r);t8(t,s.target)&&(i=s,n.done())}).next(()=>i)}addMatchingKeys(e,t,r){let n=[],i=iO(e);return t.forEach(t=>{let s=eP(t.path);n.push(i.put({targetId:r,path:s})),n.push(this.referenceDelegate.addReference(e,r,t))}),em.waitFor(n)}removeMatchingKeys(e,t,r){let n=iO(e);return em.forEach(t,t=>{let i=eP(t.path);return em.waitFor([n.delete([r,i]),this.referenceDelegate.removeReference(e,r,t)])})}removeMatchingKeysForTargetId(e,t){let r=iO(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),n=iO(e),i=rE();return n.J({range:r,H:!0},(e,t,r)=>{let n=new en(eD(e[1]));i=i.add(n)}).next(()=>i)}containsKey(e,t){let r=eP(t.path),n=IDBKeyRange.bound([r],[r+"\0"],!1,!0),i=0;return iO(e).J({index:"documentTargetsIndex",H:!0,range:n},([e,t],r,n)=>{0!==e&&(i++,n.done())}).next(()=>i>0)}ot(e,t){return iA(e).get(t).next(e=>e?n$(e):null)}}function iA(e){return e5(e,"targets")}function iR(e){return e5(e,"targetGlobal")}function iO(e){return e5(e,"targetDocuments")}function iN([e,t],[r,n]){let i=Q(e,r);return 0===i?Q(t,n):i}class iP{constructor(e){this.Un=e,this.buffer=new te(iN),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>iN(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){N("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){eS(e)?N("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await eg(e)}await this.Hn(3e5)})}}class iL{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return em.resolve(eA.oe);let r=new iP(t);return this.Jn.forEachTarget(e,e=>r.zn(e.sequenceNumber)).next(()=>this.Jn.Zn(e,e=>r.zn(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return -1===this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector","Garbage collection skipped; disabled"),em.resolve(iv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iv):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,n,i,s,o,a,l;let u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(N("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,s=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,o=Date.now(),this.removeTargets(e,r,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(l=Date.now(),O()<=w.in.DEBUG&&N("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${n} in `+(o-s)+"ms\n"+`	Removed ${i} targets in `+(a-o)+"ms\n"+`	Removed ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),em.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e})))}}class iM{constructor(e,t){this.db=e,this.garbageCollector=new iL(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}er(e){let t=0;return this.Zn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(e,r)=>t(r))}addReference(e,t,r){return ij(e,r)}removeReference(e,t,r){return ij(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ij(e,t)}nr(e,t){let r;return r=!1,ix(e).Y(n=>i_(e,n,t).next(e=>(e&&(r=!0),em.resolve(!e)))).next(()=>r)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[],i=0;return this.tr(e,(s,o)=>{if(o<=t){let t=this.nr(e,s).next(t=>{if(!t)return i++,r.getEntry(e,s).next(()=>(r.removeEntry(s,X.min()),iO(e).delete([0,eP(s.path)])))});n.push(t)}}).next(()=>em.waitFor(n)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ij(e,t)}tr(e,t){let r=iO(e),n,i=eA.oe;return r.J({index:"documentTargetsIndex"},([e,r],{path:s,sequenceNumber:o})=>{0===e?(i!==eA.oe&&t(new en(eD(n)),i),i=o,n=s):i=eA.oe}).next(()=>{i!==eA.oe&&t(new en(eD(n)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ij(e,t){var r;return iO(e).put((r=e.currentSequenceNumber,{targetId:0,path:eP(t.path),sequenceNumber:r}))}class iF{constructor(){this.changes=new rm(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tj.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?em.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return iz(e).put(r)}removeEntry(e,t,r){return iz(e).delete(function(e,t){let r=e.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],nV(t),r[r.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tj.newInvalidDocument(t);return iz(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(i$(t))},(e,n)=>{r=this.ir(t,n)}).next(()=>r)}sr(e,t){let r={size:0,document:tj.newInvalidDocument(t)};return iz(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(i$(t))},(e,n)=>{r={document:this.ir(t,n),size:iI(n)}}).next(()=>r)}getEntries(e,t){let r=ry;return this._r(e,t,(e,t)=>{let n=this.ir(e,t);r=r.insert(e,n)}).next(()=>r)}ar(e,t){let r=ry,n=new e8(en.comparator);return this._r(e,t,(e,t)=>{let i=this.ir(e,t);r=r.insert(e,i),n=n.insert(e,iI(t))}).next(()=>({documents:r,ur:n}))}_r(e,t,r){if(t.isEmpty())return em.resolve();let n=new te(iK);t.forEach(e=>n=n.add(e));let i=IDBKeyRange.bound(i$(n.first()),i$(n.last())),s=n.getIterator(),o=s.getNext();return iz(e).J({index:"documentKeyIndex",range:i},(e,t,n)=>{let i=en.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&0>iK(o,i);)r(o,null),o=s.getNext();o&&o.isEqual(i)&&(r(o,t),o=s.hasNext()?s.getNext():null),o?n.$(i$(o)):n.done()}).next(()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,n,i){let s=t.path,o=[s.popLast().toArray(),s.lastSegment(),nV(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return iz(e).U(IDBKeyRange.bound(o,a,!0)).next(e=>{null==i||i.incrementDocumentReadCount(e.length);let r=ry;for(let i of e){let e=this.ir(en.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(rd(t,e)||n.has(e.key))&&(r=r.insert(e.key,e))}return r})}getAllFromCollectionGroup(e,t,r,n){let i=ry,s=iq(t,r),o=iq(t,eh.max());return iz(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(e,t,r)=>{let s=this.ir(en.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(s.key,s)).size===n&&r.done()}).next(()=>i)}newChangeBuffer(e){return new iU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return iB(e).get("remoteDocumentGlobalKey").next(e=>(e||M(),e))}rr(e,t){return iB(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let e=function(e,t){let r;if(t.document)r=nk(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=en.fromSegments(t.noDocument.path),n=nB(t.noDocument.readTime);r=tj.newNoDocument(e,n),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return M();{let e=en.fromSegments(t.unknownDocument.path),n=nB(t.unknownDocument.version);r=tj.newUnknownDocument(e,n)}}return t.readTime&&r.setReadTime(function(e){let t=new Y(e[0],e[1]);return X.fromTimestamp(t)}(t.readTime)),r}(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(X.min())))return e}return tj.newInvalidDocument(e)}}class iU extends iF{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new rm(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],r=0,n=new te((e,t)=>Q(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{let o=this.lr.get(i);if(t.push(this.cr.removeEntry(e,i,o.readTime)),s.isValidDocument()){let a=nF(this.cr.serializer,s);n=n.add(i.path.popLast());let l=iI(a);r+=l-o.size,t.push(this.cr.addEntry(e,i,a))}else if(r-=o.size,this.trackRemovals){let r=nF(this.cr.serializer,s.convertToNoDocument(X.min()));t.push(this.cr.addEntry(e,i,r))}}),n.forEach(r=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.cr.updateMetadata(e,r)),em.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(e=>(this.lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:e,ur:t})=>(t.forEach((t,r)=>{this.lr.set(t,{size:r,readTime:e.get(t).readTime})}),e))}}function iB(e){return e5(e,"remoteDocumentGlobal")}function iz(e){return e5(e,"remoteDocumentsV14")}function i$(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function iq(e,t){let r=t.documentKey.path.toArray();return[e,nV(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function iK(e,t){let r=e.path.toArray(),n=t.path.toArray(),i=0;for(let e=0;e<r.length-2&&e<n.length-2;++e)if(i=Q(r[e],n[e]))return i;return(i=Q(r.length,n.length))||(i=Q(r[r.length-2],n[n.length-2]))||Q(r[r.length-1],n[n.length-1])}class iG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iH{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&rK(r.mutation,e,tn.empty(),Y.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,rE()).next(()=>t))}getLocalViewOfDocuments(e,t,r=rE()){let n=rI();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=rw();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=rI();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,rE()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=ry,s=rI(),o=rI();return t.forEach((e,t)=>{let o=r.get(t.key);n.has(t.key)&&(void 0===o||o.mutation instanceof rW)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),rK(o.mutation,t,o.mutation.getFieldMask(),Y.now())):s.set(t.key,tn.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return o.set(e,new iG(t,null!==(r=s.get(e))&&void 0!==r?r:null))}),o))}recalculateAndSaveOverlays(e,t){let r=rI(),n=new e8((e,t)=>e-t),i=rE();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let o=r.get(e)||tn.empty();o=i.applyToLocalView(s,o),r.set(e,o);let a=(n.get(i.batchId)||rE()).add(e);n=n.insert(i.batchId,a)})}).next(()=>{let s=[],o=n.getReverseIterator();for(;o.hasNext();){let n=o.getNext(),a=n.key,l=n.value,u=rI();l.forEach(e=>{if(!i.has(e)){let n=rq(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return em.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return en.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):rs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):em.resolve(rI()),o=-1,a=i;return s.next(t=>em.forEach(t,(t,r)=>(o<r.largestBatchId&&(o=r.largestBatchId),i.get(t)?em.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,rE())).next(e=>({batchId:o,changes:rb(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new en(t)).next(e=>{let t=rw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){let i=t.collectionGroup,s=rw();return this.indexManager.getCollectionParents(e,i).next(o=>em.forEach(o,o=>{let a=new rr(o.child(i),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,a,r,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n))).next(e=>{i.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,tj.newInvalidDocument(n)))});let r=rw();return e.forEach((e,n)=>{let s=i.get(e);void 0!==s&&rK(s.mutation,n,tn.empty(),Y.now()),rd(t,n)&&(r=r.insert(e,n))}),r})}}class iW{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return em.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:t.id,version:t.version,createTime:nm(t.createTime)}),em.resolve()}getNamedQuery(e,t){return em.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:t.name,query:nK(t.bundledQuery),readTime:nm(t.readTime)}),em.resolve()}}class iQ{constructor(){this.overlays=new e8(en.comparator),this.Ir=new Map}getOverlay(e,t){return em.resolve(this.overlays.get(t))}getOverlays(e,t){let r=rI();return em.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.ht(e,t,n)}),em.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.Ir.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(r)),em.resolve()}getOverlaysForCollection(e,t,r){let n=rI(),i=t.length+1,s=new en(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){let e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return em.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new e8((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=rI(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=rI(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=n)););return em.resolve(o)}ht(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.Ir.get(n.largestBatchId).delete(r.key);this.Ir.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new r2(t,r));let i=this.Ir.get(t);void 0===i&&(i=rE(),this.Ir.set(t,i)),this.Ir.set(t,i.add(r.key))}}class iJ{constructor(){this.sessionToken=ts.EMPTY_BYTE_STRING}getSessionToken(e){return em.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,em.resolve()}}class iY{constructor(){this.Tr=new te(iX.Er),this.dr=new te(iX.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new iX(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new iX(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){let t=new en(new ee([])),r=new iX(t,e),n=new iX(t,e+1),i=[];return this.dr.forEachInRange([r,n],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new en(new ee([])),r=new iX(t,e),n=new iX(t,e+1),i=rE();return this.dr.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new iX(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class iX{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return en.comparator(e.key,t.key)||Q(e.wr,t.wr)}static Ar(e,t){return Q(e.wr,t.wr)||en.comparator(e.key,t.key)}}class iZ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new te(iX.Er)}checkEmpty(e){return em.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new r0(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.br=this.br.add(new iX(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return em.resolve(s)}lookupMutationBatch(e,t){return em.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=this.vr(t+1),n=r<0?0:r;return em.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return em.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return em.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new iX(t,0),n=new iX(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,n],e=>{let t=this.Dr(e.wr);i.push(t)}),em.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new te(Q);return t.forEach(e=>{let t=new iX(e,0),n=new iX(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,n],e=>{r=r.add(e.wr)})}),em.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;en.isDocumentKey(i)||(i=i.child(""));let s=new iX(new en(i),0),o=new te(Q);return this.br.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(o=o.add(e.wr)),!0)},s),em.resolve(this.Cr(o))}Cr(e){let t=[];return e.forEach(e=>{let r=this.Dr(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){0===this.Fr(t.batchId,"removed")||M(),this.mutationQueue.shift();let r=this.br;return em.forEach(t.mutations,n=>{let i=new iX(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new iX(t,0),n=this.br.firstAfterOrEqual(r);return em.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,em.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class i0{constructor(e){this.Mr=e,this.docs=new e8(en.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return em.resolve(r?r.document.mutableCopy():tj.newInvalidDocument(t))}getEntries(e,t){let r=ry;return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():tj.newInvalidDocument(e))}),em.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=ry,s=t.path,o=new en(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){let{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=ef(ec(o),r)||(n.has(o.key)||rd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return em.resolve(i)}getAllFromCollectionGroup(e,t,r,n){M()}Or(e,t){return em.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new i1(this)}getSize(e){return em.resolve(this.size)}}class i1 extends iF{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.cr.addEntry(e,n)):this.cr.removeEntry(r)}),em.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class i2{constructor(e){this.persistence=e,this.Nr=new rm(e=>t4(e),t8),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new iY,this.targetCount=0,this.kr=ik.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,r)=>t(r)),em.resolve()}getLastRemoteSnapshotVersion(e){return em.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return em.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),em.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),em.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ik(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,em.resolve()}updateTargetData(e,t){return this.Kn(t),em.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,em.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=t&&null===r.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),em.waitFor(i).next(()=>n)}getTargetCount(e){return em.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return em.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),em.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),em.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),em.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return em.resolve(r)}containsKey(e,t){return em.resolve(this.Br.containsKey(t))}}class i5{constructor(e,t){this.qr={},this.overlays={},this.Qr=new eA(0),this.Kr=!1,this.Kr=!0,this.$r=new iJ,this.referenceDelegate=e(this),this.Ur=new i2(this),this.indexManager=new il,this.remoteDocumentCache=new i0(e=>this.referenceDelegate.Wr(e)),this.serializer=new nj(t),this.Gr=new iW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new iZ(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){N("MemoryPersistence","Starting transaction:",e);let n=new i3(this.Qr.next());return this.referenceDelegate.zr(),r(n).next(e=>this.referenceDelegate.jr(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Hr(e,t){return em.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class i3 extends ep{constructor(e){super(),this.currentSequenceNumber=e}}class i6{constructor(e){this.persistence=e,this.Jr=new iY,this.Yr=null}static Zr(e){return new i6(e)}get Xr(){if(this.Yr)return this.Yr;throw M()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),em.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),em.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),em.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return em.forEach(this.Xr,r=>{let n=en.fromPath(r);return this.ei(e,n).next(e=>{e||t.removeEntry(n,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return em.or([()=>em.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class i4{constructor(e,t){this.persistence=e,this.ti=new rm(e=>eP(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=new iL(this,t)}static Zr(e,t){return new i4(e,t)}zr(){}jr(e){return em.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Yn(e){let t=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}er(e){let t=0;return this.Zn(e,e=>{t++}).next(()=>t)}Zn(e,t){return em.forEach(this.ti,(r,n)=>this.nr(e,r,n).next(e=>e?em.resolve():t(n)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.Or(e,n=>this.nr(e,n,t).next(e=>{e||(r++,i.removeEntry(n,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ti.set(t,e.currentSequenceNumber),em.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ti.set(r,e.currentSequenceNumber),em.resolve()}removeReference(e,t,r){return this.ti.set(r,e.currentSequenceNumber),em.resolve()}updateLimboDocument(e,t){return this.ti.set(t,e.currentSequenceNumber),em.resolve()}Wr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=function e(t){switch(ty(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let r=th(t);return r?16+e(r):16;case 5:return 2*t.stringValue.length;case 6:return tu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((t,r)=>t+e(r),0);case 10:case 11:var n;let i;return n=t.mapValue,i=0,e6(n.fields,(t,r)=>{i+=t.length+e(r)}),i;default:throw M()}}(e.data.value)),t}nr(e,t,r){return em.or([()=>this.persistence.Hr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.ti.get(t);return em.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class i8{constructor(e){this.serializer=e}O(e,t,r,n){let i=new ey("createOrUpgrade",t);r<1&&n>=1&&(!function(e){e.createObjectStore("owner")}(e),e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eL,{unique:!0}),e.createObjectStore("documentMutations"),i7(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=em.resolve();return r<3&&n>=3&&(0!==r&&(e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal"),i7(e)),s=s.next(()=>(function(e){let t=e.store("targetGlobal"),r={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",r)})(i))),r<4&&n>=4&&(0!==r&&(s=s.next(()=>i.store("mutations").U().next(t=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eL,{unique:!0});let r=i.store("mutations"),n=t.map(e=>r.put(e));return em.waitFor(n)}))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&n>=5&&(s=s.next(()=>this.ni(i))),r<6&&n>=6&&(s=s.next(()=>((function(e){e.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i)))),r<7&&n>=7&&(s=s.next(()=>this.ii(i))),r<8&&n>=8&&(s=s.next(()=>this.si(e,i))),r<9&&n>=9&&(s=s.next(()=>{e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})),r<10&&n>=10&&(s=s.next(()=>this.oi(i))),r<11&&n>=11&&(s=s.next(()=>{(function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&n>=12&&(s=s.next(()=>{!function(e){let t=e.createObjectStore("documentOverlays",{keyPath:eW});t.createIndex("collectionPathOverlayIndex",eQ,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",eJ,{unique:!1})}(e)})),r<13&&n>=13&&(s=s.next(()=>(function(e){let t=e.createObjectStore("remoteDocumentsV14",{keyPath:ej});t.createIndex("documentKeyIndex",eF),t.createIndex("collectionGroupIndex",eV)})(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&n>=14&&(s=s.next(()=>this.ai(e,i))),r<15&&n>=15&&(s=s.next(()=>{e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:eq}).createIndex("sequenceNumberIndex",eK,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:eG}).createIndex("documentKeyIndex",eH,{unique:!1})})),r<16&&n>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&n>=17&&(s=s.next(()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((e,r)=>{t+=iI(r)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(t=>em.forEach(t,t=>{let n=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",n).next(r=>em.forEach(r,r=>{r.userId===t.userId||M();let n=nz(this.serializer,r);return ib(e,t.userId,n).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{let n=[];return r.J((r,i)=>{let s=new ee(r),o=[0,eP(s)];n.push(t.get(o).next(r=>r?em.resolve():t.put({targetId:0,path:eP(s),sequenceNumber:e.highestListenSequenceNumber})))}).next(()=>em.waitFor(n))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:e$});let r=t.store("collectionParents"),n=new iu,i=e=>{if(n.add(e)){let t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:eP(n)})}};return t.store("remoteDocuments").J({H:!0},(e,t)=>i(new ee(e).popLast())).next(()=>t.store("documentMutations").J({H:!0},([e,t,r],n)=>i(eD(t).popLast())))}oi(e){let t=e.store("targets");return t.J((e,r)=>{let n=n$(r),i=nq(this.serializer,n);return t.put(i)})}_i(e,t){let r=t.store("remoteDocuments"),n=[];return r.J((e,r)=>{let i=t.store("remoteDocumentsV14"),s=(r.document?new en(ee.fromString(r.document.name).popFirst(5)):r.noDocument?en.fromSegments(r.noDocument.path):r.unknownDocument?en.fromSegments(r.unknownDocument.path):M()).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};n.push(i.put(o))}).next(()=>em.waitFor(n))}ai(e,t){let r=t.store("mutations"),n=new iV(this.serializer),i=new i5(i6.Zr,this.serializer.ct);return r.U().next(e=>{let r=new Map;return e.forEach(e=>{var t;let n=null!==(t=r.get(e.userId))&&void 0!==t?t:rE();nz(this.serializer,e).keys().forEach(e=>n=n.add(e)),r.set(e.userId,n)}),em.forEach(r,(e,r)=>{let s=new C(r),o=nX.lt(this.serializer,s),a=i.getIndexManager(s);return new iH(n,iS.lt(s,this.serializer,a,i.referenceDelegate),o,a).recalculateAndSaveOverlaysForDocumentKeys(new e2(t,eA.oe),e).next()})})}}function i7(e){e.createObjectStore("targetDocuments",{keyPath:eB}).createIndex("documentTargetsIndex",ez,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eU,{unique:!0}),e.createObjectStore("targetGlobal")}let i9="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class se{constructor(e,t,r,n,i,s,o,a,l,u,c=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=i,this.window=s,this.document=o,this.ci=l,this.li=u,this.hi=c,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=e=>Promise.resolve(),!se.D())throw new F(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iM(this,n),this.Ai=t+"main",this.serializer=new nj(a),this.Ri=new ev(this.Ai,this.hi,new i8(this.serializer)),this.$r=new n0,this.Ur=new iC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new iV(this.serializer),this.Gr=new nQ,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===u&&P("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(j.FAILED_PRECONDITION,i9);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new eA(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sr(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(eS(e))return N("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return N("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return st(e).get("owner").next(e=>em.resolve(this.vi(e)))}Ci(e){return sr(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=e5(e,"clientMetadata");return t.U().next(e=>{let r=this.xi(e,18e5),n=e.filter(e=>-1===r.indexOf(e));return em.forEach(n,e=>t.delete(e.clientId)).next(()=>n)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?em.resolve(!0):st(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new F(j.FAILED_PRECONDITION,i9);return!1}}return!(!this.networkEnabled||!this.inForeground)||sr(e).U().next(e=>void 0===this.xi(e,5e3).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||r&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&N("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new e2(e,eA.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(e=>this.Mi(e.updateTimeMs,t)&&!this.Ni(e.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>sr(e).U().next(e=>this.xi(e,18e5).map(e=>e.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return iS.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ih(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return nX.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){var n;let i;N("IndexedDbPersistence","Starting transaction:",e);let s=17===(n=this.hi)?e1:16===n?e0:15===n?e0:14===n?eZ:13===n?eZ:12===n?eX:11===n?eY:void M();return this.Ri.runTransaction(e,"readonly"===t?"readonly":"readwrite",s,n=>(i=new e2(n,this.Qr?this.Qr.next():eA.oe),"readwrite-primary"===t?this.wi(i).next(e=>!!e||this.Si(i)).next(t=>{if(!t)throw P(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new F(j.FAILED_PRECONDITION,ed);return r(i)}).next(e=>this.Di(i).next(()=>e)):this.Ki(i).next(()=>r(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}Ki(e){return st(e).get("owner").next(e=>{if(null!==e&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new F(j.FAILED_PRECONDITION,i9)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return st(e).put("owner",t)}static D(){return ev.D()}bi(e){let t=st(e);return t.get("owner").next(e=>this.vi(e)?(N("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):em.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(P(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();let e=/(?:Version|Mobile)\/1[456]/;(0,b.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return N("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(e){return P("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){P("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch(e){}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function st(e){return e5(e,"owner")}function sr(e){return e5(e,"clientMetadata")}function sn(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}class si{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=n}static Wi(e,t){let r=rE(),n=rE();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new si(e,t.fromCache,r,n)}}class ss{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class so{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,b.G6)()?8:ew((0,b.z$)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,n){let i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,n,r).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let r=new ss;return this.Xi(e,t,r).next(n=>{if(i.result=n,this.zi)return this.es(e,t,r,n.size)})}).next(()=>i.result)}es(e,t,r,n){return r.documentReadCount<this.ji?(O()<=w.in.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",rf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),em.resolve()):(O()<=w.in.DEBUG&&N("QueryEngine","Query:",rf(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.Hi*n?(O()<=w.in.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",rf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ra(t))):em.resolve())}Yi(e,t){if(ri(t))return em.resolve(null);let r=ra(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=ra(t=ru(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=rE(...n);return this.Ji.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.ts(t,n);return this.ns(t,s,i,r.readTime)?this.Yi(e,ru(t,null,"F")):this.rs(e,s,t,r)}))})))}Zi(e,t,r,n){return ri(t)||n.isEqual(X.min())?em.resolve(null):this.Ji.getDocuments(e,r).next(i=>{let s=this.ts(t,i);return this.ns(t,s,r,n)?em.resolve(null):(O()<=w.in.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),rf(t)),this.rs(e,s,t,eu(n,-1)).next(e=>e))})}ts(e,t){let r=new te(rg(e));return t.forEach((t,n)=>{rd(e,n)&&(r=r.add(n))}),r}ns(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Xi(e,t,r){return O()<=w.in.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",rf(t)),this.Ji.getDocumentsMatchingQuery(e,t,eh.min(),r)}rs(e,t,r,n){return this.Ji.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class sa{constructor(e,t,r,n){this.persistence=e,this.ss=t,this.serializer=n,this.os=new e8(Q),this._s=new rm(e=>t4(e),t8),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iH(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}async function sl(e,t){return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,e.ls(t),e.mutationQueue.getAllMutationBatches(r))).next(t=>{let i=[],s=[],o=rE();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))o=o.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))o=o.add(t.key);return e.localDocuments.getDocuments(r,o).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function su(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function sc(e,t,r){let n=rE(),i=rE();return r.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=ry;return r.forEach((r,s)=>{let o=e.get(r);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(r)),s.isNoDocument()&&s.version.isEqual(X.min())?(t.removeEntry(r,s.readTime),n=n.insert(r,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),n=n.insert(r,s)):N("LocalStore","Ignoring outdated watch update for ",r,". Current version:",o.version," Watch version:",s.version)}),{Ps:n,Is:i}})}function sh(e,t){return e.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return e.Ur.getTargetData(r,t).next(i=>i?(n=i,em.resolve(n)):e.Ur.allocateTargetId(r).next(i=>(n=new nM(t,i,"TargetPurposeListen",r.currentSequenceNumber),e.Ur.addTargetData(r,n).next(()=>n))))}).then(r=>{let n=e.os.get(r.targetId);return(null===n||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(e.os=e.os.insert(r.targetId,r),e._s.set(t,r.targetId)),r})}async function sf(e,t,r){let n=e.os.get(t);try{r||await e.persistence.runTransaction("Release target",r?"readwrite":"readwrite-primary",t=>e.persistence.referenceDelegate.removeTarget(t,n))}catch(e){if(!eS(e))throw e;N("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}e.os=e.os.remove(t),e._s.delete(n.target)}function sd(e,t,r){let n=X.min(),i=rE();return e.persistence.runTransaction("Execute query","readwrite",s=>(function(e,t,r){let n=e._s.get(r);return void 0!==n?em.resolve(e.os.get(n)):e.Ur.getTargetData(t,r)})(e,s,ra(t)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,e.Ur.getMatchingKeysForTargetId(s,t.targetId).next(e=>{i=e})}).next(()=>e.ss.getDocumentsMatchingQuery(s,t,r?n:X.min(),r?i:rE())).next(r=>(sm(e,rp(t),r),{documents:r,Ts:i})))}function sp(e,t){let r=e.Ur,n=e.os.get(t);return n?Promise.resolve(n.target):e.persistence.runTransaction("Get target data","readonly",e=>r.ot(e,t).next(e=>e?e.target:null))}function sg(e,t){let r=e.us.get(t)||X.min();return e.persistence.runTransaction("Get new document changes","readonly",n=>e.cs.getAllFromCollectionGroup(n,t,eu(r,-1),Number.MAX_SAFE_INTEGER)).then(r=>(sm(e,t,r),r))}function sm(e,t,r){let n=e.us.get(t)||X.min();r.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.us.set(t,n)}function sy(e,t){return`firestore_clients_${e}_${t}`}function sv(e,t,r){let n=`firestore_mutations_${e}_${r}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}function sw(e,t){return`firestore_targets_${e}_${t}`}class sb{constructor(e,t,r,n){this.user=e,this.batchId=t,this.state=r,this.error=n}static Rs(e,t,r){let n=JSON.parse(r),i,s="object"==typeof n&&-1!==["pending","acknowledged","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new F(n.error.code,n.error.message)),s?new sb(e,t,n.state,i):(P("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),n,i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new F(r.error.code,r.error.message)),i?new sI(e,r.state,n):(P("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),n="object"==typeof r&&r.activeTargetIds instanceof Array,i=rT;for(let e=0;n&&e<r.activeTargetIds.length;++e)n=eN(r.activeTargetIds[e]),i=i.add(r.activeTargetIds[e]);return n?new sS(e,i):(P("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class s_{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new s_(t.clientId,t.onlineState):(P("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sE{constructor(){this.activeTargetIds=rT}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class sT{constructor(e,t,r,n,i){var s,o,a;this.window=e,this.ui=t,this.persistenceKey=r,this.ps=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new e8(Q),this.started=!1,this.bs=[];let l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=sy(this.persistenceKey,this.ps),this.vs=(s=this.persistenceKey,`firestore_sequence_number_${s}`),this.Ss=this.Ss.insert(this.ps,new sE),this.Cs=RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Fs=RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ms=RegExp(`^firestore_targets_${l}_(\\d+)$`),this.xs=(o=this.persistenceKey,`firestore_online_state_${o}`),this.Os=(a=this.persistenceKey,`firestore_bundle_loaded_v2_${a}`),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){for(let e of(await this.syncEngine.Qi())){if(e===this.ps)continue;let t=this.getItem(sy(this.persistenceKey,e));if(t){let r=sS.Rs(e,t);r&&(this.Ss=this.Ss.insert(r.clientId,r))}}this.Ns();let e=this.storage.getItem(this.xs);if(e){let t=this.Ls(e);t&&this.Bs(t)}for(let e of this.bs)this.ws(e);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,n)=>{n.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(sw(this.persistenceKey,e));if(t){let n=sI.Rs(e,t);n&&(r=n.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sw(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(e=>{this.Qs(e)}),this.currentUser=e,r.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return N("SharedClientState","READ",e,t),t}setItem(e,t){N("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){N("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){if(e.storageArea===this.storage){if(N("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Ds)return void P("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(null!==e.key){if(this.Cs.test(e.key)){if(null==e.newValue){let t=this.Gs(e.key);return this.zs(t,null)}{let t=this.js(e.key,e.newValue);if(t)return this.zs(t.clientId,t)}}else if(this.Fs.test(e.key)){if(null!==e.newValue){let t=this.Hs(e.key,e.newValue);if(t)return this.Js(t)}}else if(this.Ms.test(e.key)){if(null!==e.newValue){let t=this.Ys(e.key,e.newValue);if(t)return this.Zs(t)}}else if(e.key===this.xs){if(null!==e.newValue){let t=this.Ls(e.newValue);if(t)return this.Bs(t)}}else if(e.key===this.vs){let t=function(e){let t=eA.oe;if(null!=e)try{let r=JSON.parse(e);"number"==typeof r||M(),t=r}catch(e){P("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(e.newValue);t!==eA.oe&&this.sequenceNumberHandler(t)}else if(e.key===this.Os){let t=this.Xs(e.newValue);await Promise.all(t.map(e=>this.syncEngine.eo(e)))}}}else this.bs.push(e)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let n=new sb(this.currentUser,e,t,r),i=sv(this.persistenceKey,this.currentUser,e);this.setItem(i,n.Vs())}Qs(e){let t=sv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let n=sw(this.persistenceKey,e),i=new sI(e,t,r);this.setItem(n,i.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return sS.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),n=Number(r[1]),i=void 0!==r[2]?r[2]:null;return sb.Rs(new C(i),n,t)}Ys(e,t){let r=Number(this.Ms.exec(e)[1]);return sI.Rs(r,t)}Ls(e){return s_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);N("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),n=this.ks(this.Ss),i=this.ks(r),s=[],o=[];return i.forEach(e=>{n.has(e)||s.push(e)}),n.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.io(s,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=rT;return e.forEach((e,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class sx{constructor(){this.so=new sE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sk{_o(e){}shutdown(){}}class sC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){for(let e of(N("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.ho))e(0)}lo(){for(let e of(N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.ho))e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sA=null;function sR(){return null===sA?sA=0x10000000+Math.round(0x80000000*Math.random()):sA++,"0x"+sA.toString(16)}let sO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}let sP="WebChannelConnection";class sD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${r}/databases/${n}`,this.Co="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${n}`}get Fo(){return!1}Mo(e,t,r,n,i){let s=sR(),o=this.xo(e,t.toUriEncodedString());N("RestConnection",`Sending RPC '${e}' ${s}:`,o,r);let a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,n,i),this.No(e,o,a,r).then(t=>(N("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw D("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",r),t})}Lo(e,t,r,n,i,s){return this.Mo(e,t,r,n,i)}Oo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+A}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}xo(e,t){let r=sO[e];return`${this.Do}/v1/${t}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,n){let i=sR();return new Promise((o,u)=>{let c=new s;c.setWithCredentials(!0),c.listenOnce(a.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case l.NO_ERROR:let t=c.getResponseJson();N(sP,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case l.TIMEOUT:N(sP,`RPC '${e}' ${i} timed out`),u(new F(j.DEADLINE_EXCEEDED,"Request time out"));break;case l.HTTP_ERROR:let r=c.getStatus();if(N(sP,`RPC '${e}' ${i} failed with status:`,r,"response text:",c.getResponseText()),r>0){let e=c.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=null==e?void 0:e.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(t)>=0?t:j.UNKNOWN}(t.status);u(new F(e,t.message))}else u(new F(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new F(j.UNAVAILABLE,"Connection failed."));break;default:M()}}finally{N(sP,`RPC '${e}' ${i} completed.`)}});let h=JSON.stringify(n);N(sP,`RPC '${e}' ${i} sending request:`,n),c.send(t,"POST",h,r,15)})}Bo(e,t,r){let n=sR(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=f(),a=h(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;void 0!==p&&(l.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let g=i.join("");N(sP,`Creating RPC '${e}' stream ${n}: ${g}`,l);let m=s.createWebChannel(g,l),y=!1,v=!1,w=new sN({Io:t=>{v?N(sP,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(y||(N(sP,`Opening RPC '${e}' stream ${n} transport.`),m.open(),y=!0),N(sP,`RPC '${e}' stream ${n} sending:`,t),m.send(t))},To:()=>m.close()}),b=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(m,o.EventType.OPEN,()=>{v||(N(sP,`RPC '${e}' stream ${n} transport opened.`),w.yo())}),b(m,o.EventType.CLOSE,()=>{v||(v=!0,N(sP,`RPC '${e}' stream ${n} transport closed`),w.So())}),b(m,o.EventType.ERROR,t=>{v||(v=!0,D(sP,`RPC '${e}' stream ${n} transport errored:`,t),w.So(new F(j.UNAVAILABLE,"The operation could not be completed")))}),b(m,o.EventType.MESSAGE,t=>{var r;if(!v){let i=t.data[0];i||M();let s=i.error||(null===(r=i[0])||void 0===r?void 0:r.error);if(s){N(sP,`RPC '${e}' stream ${n} received error:`,s);let t=s.status,r=function(e){let t=d[e];if(void 0!==t)return r3(t)}(t),i=s.message;void 0===r&&(r=j.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),v=!0,w.So(new F(r,i)),m.close()}else N(sP,`RPC '${e}' stream ${n} received:`,i),w.bo(i)}}),b(a,c.STAT_EVENT,t=>{t.stat===u.PROXY?N(sP,`RPC '${e}' stream ${n} detected buffering proxy`):t.stat===u.NOPROXY&&N(sP,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function sL(){return"undefined"!=typeof window?window:null}function sM(){return"undefined"!=typeof document?document:null}function sj(e){return new nf(e,!0)}class sF{constructor(e,t,r=1e3,n=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=n,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),n=Math.max(0,t-r);n>0&&N("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,n,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class sV{constructor(e,t,r,n,i,s,o,a){this.ui=e,this.Ho=r,this.Jo=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sF(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(P(t.toString()),P("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===j.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.Yo===t&&this.P_(e,r)},t=>{e(()=>{let e=new F(j.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{r(()=>this.I_(e))}),this.stream.onMessage(e=>{r(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return N("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sU extends sV{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=function(e,t){let r;if("targetChange"in t){var n,i;t.targetChange;let s="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:M(),o=t.targetChange.targetIds||[],a=(i=t.targetChange.resumeToken,e.useProto3Json?(void 0===i||"string"==typeof i||M(),ts.fromBase64String(i||"")):(void 0===i||i instanceof x||i instanceof Uint8Array||M(),ts.fromUint8Array(i||new Uint8Array))),l=t.targetChange.cause;r=new ni(s,o,a,l&&new F(void 0===l.code?j.UNKNOWN:r3(l.code),l.message||"")||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=nI(e,n.document.name),s=nm(n.document.updateTime),o=n.document.createTime?nm(n.document.createTime):X.min(),a=new tM({mapValue:{fields:n.document.fields}}),l=tj.newFoundDocument(i,s,o,a);r=new nr(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=nI(e,n.document),s=n.readTime?nm(n.readTime):X.min(),o=tj.newNoDocument(i,s);r=new nr([],n.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=nI(e,n.document);r=new nr([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return M();{t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,s=new r5(n,i);r=new nn(e.targetId,s)}}return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return X.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?X.min():t.readTime?nm(t.readTime):X.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=nE(this.serializer),t.addTarget=function(e,t){let r;let n=t.target;if((r=t7(n)?{documents:nR(e,n)}:{query:nO(e,n)._t}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=ng(e,t.resumeToken);let n=nd(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(X.min())>0){r.readTime=np(e,t.snapshotVersion.toTimestamp());let n=nd(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}(this.serializer,e);let r=function(e,t){let r=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return M()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=nE(this.serializer),t.removeTarget=e,this.a_(t)}}class sB extends sV{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return e.streamToken||M(),this.lastStreamToken=e.streamToken,e.writeResults&&0!==e.writeResults.length&&M(),this.listener.f_()}onNext(e){var t,r;e.streamToken||M(),this.lastStreamToken=e.streamToken,this.t_.reset();let n=(t=e.writeResults,r=e.commitTime,t&&t.length>0?(void 0!==r||M(),t.map(e=>{let t;return(t=e.updateTime?nm(e.updateTime):nm(r)).isEqual(X.min())&&(t=nm(r)),new rU(t,e.transformResults||[])})):[]),i=nm(e.commitTime);return this.listener.g_(i,n)}p_(){let e={};e.database=nE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>nC(this.serializer,e))};this.a_(t)}}class sz extends class{}{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.y_=!1}w_(){if(this.y_)throw new F(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,n){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Mo(e,nv(t,r),n,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(j.UNKNOWN,e.toString())})}Lo(e,t,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Lo(e,nv(t,r),n,s,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(j.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class s${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(P(t),this.D_=!1):N("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class sq{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{r.enqueueAndForget(async()=>{sZ(this)&&(N("RemoteStore","Restarting streams for network reachability change."),await async function(e){e.L_.add(4),await sG(e),e.q_.set("Unknown"),e.L_.delete(4),await sK(e)}(this))})}),this.q_=new s$(r,n)}}async function sK(e){if(sZ(e))for(let t of e.B_)await t(!0)}async function sG(e){for(let t of e.B_)await t(!1)}function sH(e,t){e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),sX(e)?sY(e):os(e).r_()&&sQ(e,t))}function sW(e,t){let r=os(e);e.N_.delete(t),r.r_()&&sJ(e,t),0===e.N_.size&&(r.r_()?r.o_():sZ(e)&&e.q_.set("Unknown"))}function sQ(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(X.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}os(e).A_(t)}function sJ(e,t){e.Q_.xe(t),os(e).R_(t)}function sY(e){e.Q_=new no({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),os(e).start(),e.q_.v_()}function sX(e){return sZ(e)&&!os(e).n_()&&e.N_.size>0}function sZ(e){return 0===e.L_.size}async function s0(e){e.q_.set("Online")}async function s1(e){e.N_.forEach((t,r)=>{sQ(e,t)})}async function s2(e,t){e.Q_=void 0,sX(e)?(e.q_.M_(t),sY(e)):e.q_.set("Unknown")}async function s5(e,t,r){if(e.q_.set("Online"),t instanceof ni&&2===t.state&&t.cause)try{await async function(e,t){let r=t.cause;for(let n of t.targetIds)e.N_.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.N_.delete(n),e.Q_.removeTarget(n))}(e,t)}catch(r){N("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await s3(e,r)}else if(t instanceof nr?e.Q_.Ke(t):t instanceof nn?e.Q_.He(t):e.Q_.We(t),!r.isEqual(X.min()))try{let t=await su(e.localStore);r.compareTo(t)>=0&&await function(e,t){let r=e.Q_.rt(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.N_.get(n);i&&e.N_.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let n=e.N_.get(t);if(!n)return;e.N_.set(t,n.withResumeToken(ts.EMPTY_BYTE_STRING,n.snapshotVersion)),sJ(e,t);let i=new nM(n.target,t,r,n.sequenceNumber);sQ(e,i)}),e.remoteSyncer.applyRemoteEvent(r)}(e,r)}catch(t){N("RemoteStore","Failed to raise snapshot:",t),await s3(e,t)}}async function s3(e,t,r){if(!eS(t))throw t;e.L_.add(1),await sG(e),e.q_.set("Offline"),r||(r=()=>su(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{N("RemoteStore","Retrying IndexedDB access"),await r(),e.L_.delete(1),await sK(e)})}function s6(e,t){return t().catch(r=>s3(e,r,t))}async function s4(e){let t=oo(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sZ(e)&&e.O_.length<10;)try{let n=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}(e.localStore,r);if(null===n){0===e.O_.length&&t.o_();break}r=n.batchId,function(e,t){e.O_.push(t);let r=oo(e);r.r_()&&r.V_&&r.m_(t.mutations)}(e,n)}catch(t){await s3(e,t)}s8(e)&&s7(e)}function s8(e){return sZ(e)&&!oo(e).n_()&&e.O_.length>0}function s7(e){oo(e).start()}async function s9(e){oo(e).p_()}async function oe(e){let t=oo(e);for(let r of e.O_)t.m_(r.mutations)}async function ot(e,t,r){let n=e.O_.shift(),i=r1.from(n,t,r);await s6(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await s4(e)}async function or(e,t){t&&oo(e).V_&&await async function(e,t){var r;if(function(e){switch(e){default:return M();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}(r=t.code)&&r!==j.ABORTED){let r=e.O_.shift();oo(e).s_(),await s6(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await s4(e)}}(e,t),s8(e)&&s7(e)}async function on(e,t){e.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");let r=sZ(e);e.L_.add(3),await sG(e),r&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await sK(e)}async function oi(e,t){t?(e.L_.delete(2),await sK(e)):t||(e.L_.add(2),await sG(e),e.q_.set("Unknown"))}function os(e){var t,r,n;return e.K_||(e.K_=(t=e.datastore,r=e.asyncQueue,n={Eo:s0.bind(null,e),Ro:s1.bind(null,e),mo:s2.bind(null,e),d_:s5.bind(null,e)},t.w_(),new sU(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n)),e.B_.push(async t=>{t?(e.K_.s_(),sX(e)?sY(e):e.q_.set("Unknown")):(await e.K_.stop(),e.Q_=void 0)})),e.K_}function oo(e){var t,r,n;return e.U_||(e.U_=(t=e.datastore,r=e.asyncQueue,n={Eo:()=>Promise.resolve(),Ro:s9.bind(null,e),mo:or.bind(null,e),f_:oe.bind(null,e),g_:ot.bind(null,e)},t.w_(),new sB(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n)),e.B_.push(async t=>{t?(e.U_.s_(),await s4(e)):(await e.U_.stop(),e.O_.length>0&&(N("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class oa{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new V,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){let s=new oa(e,t,Date.now()+r,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new F(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ol(e,t){if(P("AsyncQueue",`${t}: ${e}`),eS(e))return new F(j.UNAVAILABLE,`${t}: ${e}`);throw e}class ou{constructor(e){this.comparator=e?(t,r)=>e(t,r)||en.comparator(t.key,r.key):(e,t)=>en.comparator(e.key,t.key),this.keyedMap=rw(),this.sortedSet=new e8(this.comparator)}static emptySet(e){return new ou(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ou)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new ou;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class oc{constructor(){this.W_=new e8(en.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):M():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class oh{constructor(e,t,r,n,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new oh(e,t,ou.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class of{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class od{constructor(){this.queries=op(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){let r=e.queries;e.queries=op(),r.forEach((e,r)=>{for(let e of r.j_)e.onError(t)})}(this,new F(j.ABORTED,"Firestore shutting down"))}}function op(){return new rm(e=>rh(e),rc)}function og(e,t){let r=!1;for(let n of t){let t=n.query,i=e.queries.get(t);if(i){for(let e of i.j_)e.X_(n)&&(r=!0);i.z_=n}}r&&oy(e)}function om(e,t,r){let n=e.queries.get(t);if(n)for(let e of n.j_)e.onError(r);e.queries.delete(t)}function oy(e){e.Y_.forEach(e=>{e.next()})}(m=g||(g={})).ea="default",m.Cache="cache";class ov{constructor(e){this.key=e}}class ow{constructor(e){this.key=e}}class ob{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=rE(),this.mutatedKeys=rE(),this.Aa=rg(e),this.Ra=new ou(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new oc,n=t?t.Ra:this.Ra,i=t?t.mutatedKeys:this.mutatedKeys,s=n,o=!1,a="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=rd(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),f=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),d=!1;u&&c?u.data.isEqual(c.data)?h!==f&&(r.track({type:3,doc:c}),d=!0):this.ga(u,c)||(r.track({type:2,doc:c}),d=!0,(a&&this.Aa(c,a)>0||l&&0>this.Aa(c,l))&&(o=!0)):!u&&c?(r.track({type:0,doc:c}),d=!0):u&&!c&&(r.track({type:1,doc:u}),d=!0,(a||l)&&(o=!0)),d&&(c?(s=s.add(c),i=f?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{Ra:s,fa:r,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){let i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((e,t)=>(function(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M()}};return r(e)-r(t)})(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(r),n=null!=n&&n;let o=t&&!n?this.ya():[],a=0===this.da.size&&this.current&&!n?1:0,l=a!==this.Ea;return(this.Ea=a,0!==s.length||l)?{snapshot:new oh(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new oc,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=rE(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});let t=[];return e.forEach(e=>{this.da.has(e)||t.push(new ow(e))}),this.da.forEach(r=>{e.has(r)||t.push(new ov(r))}),t}ba(e){this.Ta=e.Ts,this.da=rE();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return oh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class oI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oS{constructor(e){this.key=e,this.va=!1}}class o_{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new rm(e=>rh(e),rc),this.Ma=new Map,this.xa=new Set,this.Oa=new e8(en.comparator),this.Na=new Map,this.La=new iY,this.Ba={},this.ka=new Map,this.qa=ik.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function oE(e,t,r=!0){let n;let i=o0(e),s=i.Fa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.Da()):n=await ox(i,t,r,!0),n}async function oT(e,t){let r=o0(e);await ox(r,t,!0,!1)}async function ox(e,t,r,n){let i;let s=await sh(e.localStore,ra(t)),o=s.targetId,a=e.sharedClientState.addLocalQueryTarget(o,r);return n&&(i=await ok(e,t,o,"current"===a,s.resumeToken)),e.isPrimaryClient&&r&&sH(e.remoteStore,s),i}async function ok(e,t,r,n,i){e.Ka=(t,r,n)=>(async function(e,t,r,n){let i=t.view.ma(r);i.ns&&(i=await sd(e.localStore,t.query,!1).then(({documents:e})=>t.view.ma(e,i)));let s=n&&n.targetChanges.get(t.targetId),o=n&&null!=n.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return oU(e,t.targetId,a.wa),a.snapshot})(e,t,r,n);let s=await sd(e.localStore,t,!0),o=new ob(t,s.Ts),a=o.ma(s.documents),l=nt.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);oU(e,r,u.wa);let c=new oI(t,r,o);return e.Fa.set(t,c),e.Ma.has(r)?e.Ma.get(r).push(t):e.Ma.set(r,[t]),u.snapshot}async function oC(e,t,r){let n=e.Fa.get(t),i=e.Ma.get(n.targetId);if(i.length>1)return e.Ma.set(n.targetId,i.filter(e=>!rc(e,t))),void e.Fa.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)||await sf(e.localStore,n.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(n.targetId),r&&sW(e.remoteStore,n.targetId),oF(e,n.targetId)}).catch(eg)):(oF(e,n.targetId),await sf(e.localStore,n.targetId,!0))}async function oA(e,t){let r=e.Fa.get(t),n=e.Ma.get(r.targetId);e.isPrimaryClient&&1===n.length&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),sW(e.remoteStore,r.targetId))}async function oR(e,t,r){let n=o1(e);try{var i;let e;let s=await function(e,t){let r,n;let i=Y.now(),s=t.reduce((e,t)=>e.add(t.key),rE());return e.persistence.runTransaction("Locally write mutations","readwrite",o=>{let a=ry,l=rE();return e.cs.getEntries(o,s).next(e=>{(a=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>e.localDocuments.getOverlayedDocuments(o,a)).next(n=>{r=n;let s=[];for(let e of t){let t=function(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=rR(n.transform,e||null);null!=i&&(null===r&&(r=tM.empty()),r.set(n.field,i))}return r||null}(e,r.get(e.key).overlayedDocument);null!=t&&s.push(new rW(e.key,t,function e(t){let r=[];return e6(t.fields,(t,n)=>{let i=new er([t]);if(tA(n)){let t=e(n.mapValue).fields;if(0===t.length)r.push(i);else for(let e of t)r.push(i.child(e))}else r.push(i)}),new tn(r)}(t.value.mapValue),rB.exists(!0)))}return e.mutationQueue.addMutationBatch(o,i,s,t)}).next(t=>{n=t;let i=t.applyToLocalDocumentSet(r,l);return e.documentOverlayCache.saveOverlays(o,t.batchId,i)})}).then(()=>({batchId:n.batchId,changes:rb(r)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(s.batchId),i=s.batchId,(e=n.Ba[n.currentUser.toKey()])||(e=new e8(Q)),e=e.insert(i,r),n.Ba[n.currentUser.toKey()]=e,await oz(n,s.changes),await s4(n.remoteStore)}catch(t){let e=ol(t,"Failed to persist write");r.reject(e)}}async function oO(e,t){try{let r=await function(e,t){let r=t.snapshotVersion,n=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{let s=e.cs.newChangeBuffer({trackRemovals:!0});n=e.os;let o=[];t.targetChanges.forEach((s,a)=>{var l;let u=n.get(a);if(!u)return;o.push(e.Ur.removeMatchingKeys(i,s.removedDocuments,a).next(()=>e.Ur.addMatchingKeys(i,s.addedDocuments,a)));let c=u.withSequenceNumber(i.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ts.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),n=n.insert(a,c),l=c,(0===u.resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0)&&o.push(e.Ur.updateTargetData(i,c))});let a=ry,l=rE();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(i,r))}),o.push(sc(i,s,t.documentUpdates).next(e=>{a=e.Ps,l=e.Is})),!r.isEqual(X.min())){let t=e.Ur.getLastRemoteSnapshotVersion(i).next(t=>e.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(t)}return em.waitFor(o).next(()=>s.apply(i)).next(()=>e.localDocuments.getLocalViewOfDocuments(i,a,l)).next(()=>a)}).then(t=>(e.os=n,t))}(e.localStore,t);t.targetChanges.forEach((t,r)=>{let n=e.Na.get(r);n&&(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1||M(),t.addedDocuments.size>0?n.va=!0:t.modifiedDocuments.size>0?n.va||M():t.removedDocuments.size>0&&(n.va||M(),n.va=!1))}),await oz(e,r,t)}catch(e){await eg(e)}}function oN(e,t,r){var n;if(e.isPrimaryClient&&0===r||!e.isPrimaryClient&&1===r){let r;let i=[];e.Fa.forEach((e,r)=>{let n=r.view.Z_(t);n.snapshot&&i.push(n.snapshot)}),(n=e.eventManager).onlineState=t,r=!1,n.queries.forEach((e,n)=>{for(let e of n.j_)e.Z_(t)&&(r=!0)}),r&&oy(n),i.length&&e.Ca.d_(i),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function oP(e,t,r){e.sharedClientState.updateQueryState(t,"rejected",r);let n=e.Na.get(t),i=n&&n.key;if(i){let r=new e8(en.comparator);r=r.insert(i,tj.newNoDocument(i,X.min()));let n=rE().add(i),s=new ne(X.min(),new Map,new e8(Q),r,n);await oO(e,s),e.Oa=e.Oa.remove(i),e.Na.delete(t),oB(e)}else await sf(e.localStore,t,!1).then(()=>oF(e,t,r)).catch(eg)}async function oD(e,t){var r;let n=t.batch.batchId;try{let i=await (r=e.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(e,t,r,n){let i=r.batch,s=i.keys(),o=em.resolve();return s.forEach(e=>{o=o.next(()=>n.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);null!==s||M(),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))})(r,e,t,i).next(()=>i.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rE();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t))).next(()=>r.localDocuments.getDocuments(e,n))});oj(e,n,null),oM(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await oz(e,i)}catch(e){await eg(e)}}async function oL(e,t,r){var n;try{let i=await (n=e.localStore).persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(null!==t||M(),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))});oj(e,t,r),oM(e,t),e.sharedClientState.updateMutationState(t,"rejected",r),await oz(e,i)}catch(e){await eg(e)}}function oM(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function oj(e,t,r){let n=e.Ba[e.currentUser.toKey()];if(n){let i=n.get(t);i&&(r?i.reject(r):i.resolve(),n=n.remove(t)),e.Ba[e.currentUser.toKey()]=n}}function oF(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.Ma.get(t)))e.Fa.delete(n),r&&e.Ca.$a(n,r);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||oV(e,t)})}function oV(e,t){e.xa.delete(t.path.canonicalString());let r=e.Oa.get(t);null!==r&&(sW(e.remoteStore,r),e.Oa=e.Oa.remove(t),e.Na.delete(r),oB(e))}function oU(e,t,r){for(let n of r)n instanceof ov?(e.La.addReference(n.key,t),function(e,t){let r=t.key,n=r.path.canonicalString();e.Oa.get(r)||e.xa.has(n)||(N("SyncEngine","New document in limbo: "+r),e.xa.add(n),oB(e))}(e,n)):n instanceof ow?(N("SyncEngine","Document no longer in limbo: "+n.key),e.La.removeReference(n.key,t),e.La.containsKey(n.key)||oV(e,n.key)):M()}function oB(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){let t=e.xa.values().next().value;e.xa.delete(t);let r=new en(ee.fromString(t)),n=e.qa.next();e.Na.set(n,new oS(r)),e.Oa=e.Oa.insert(r,n),sH(e.remoteStore,new nM(ra(rn(r.path)),n,"TargetPurposeLimboResolution",eA.oe))}}async function oz(e,t,r){let n=[],i=[],s=[];e.Fa.isEmpty()||(e.Fa.forEach((o,a)=>{s.push(e.Ka(a,t,r).then(t=>{var s;if((t||r)&&e.isPrimaryClient){let n=t?!t.fromCache:null===(s=null==r?void 0:r.targetChanges.get(a.targetId))||void 0===s?void 0:s.current;e.sharedClientState.updateQueryState(a.targetId,n?"current":"not-current")}if(t){n.push(t);let e=si.Wi(a.targetId,t);i.push(e)}}))}),await Promise.all(s),e.Ca.d_(n),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>em.forEach(t,t=>em.forEach(t.$i,n=>e.persistence.referenceDelegate.addReference(r,t.targetId,n)).next(()=>em.forEach(t.Ui,n=>e.persistence.referenceDelegate.removeReference(r,t.targetId,n)))))}catch(e){if(!eS(e))throw e;N("LocalStore","Failed to update sequence numbers: "+e)}for(let r of t){let t=r.targetId;if(!r.fromCache){let r=e.os.get(t),n=r.snapshotVersion,i=r.withLastLimboFreeSnapshotVersion(n);e.os=e.os.insert(t,i)}}}(e.localStore,i))}async function o$(e,t){var r;if(!e.currentUser.isEqual(t)){N("SyncEngine","User change. New user:",t.toKey());let n=await sl(e.localStore,t);e.currentUser=t,r="'waitForPendingWrites' promise is rejected due to a user change.",e.ka.forEach(e=>{e.forEach(e=>{e.reject(new F(j.CANCELLED,r))})}),e.ka.clear(),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await oz(e,n.hs)}}function oq(e,t){let r=e.Na.get(t);if(r&&r.va)return rE().add(r.key);{let r=rE(),n=e.Ma.get(t);if(!n)return r;for(let t of n){let n=e.Fa.get(t);r=r.unionWith(n.view.Va)}return r}}async function oK(e,t){let r=await sd(e.localStore,t.query,!0),n=t.view.ba(r);return e.isPrimaryClient&&oU(e,t.targetId,n.wa),n}async function oG(e,t){return sg(e.localStore,t).then(t=>oz(e,t))}async function oH(e,t,r,n){let i=await function(e,t){let r=e.mutationQueue;return e.persistence.runTransaction("Lookup mutation documents","readonly",n=>r.Mn(n,t).next(t=>t?e.localDocuments.getDocuments(n,t):em.resolve(null)))}(e.localStore,t);null!==i?("pending"===r?await s4(e.remoteStore):"acknowledged"===r||"rejected"===r?(oj(e,t,n||null),oM(e,t),function(e,t){e.mutationQueue.On(t)}(e.localStore,t)):M(),await oz(e,i)):N("SyncEngine","Cannot apply mutation batch with id: "+t)}async function oW(e,t){if(o0(e),o1(e),!0===t&&!0!==e.Qa){let t=e.sharedClientState.getAllActiveQueryTargets(),r=await oQ(e,t.toArray());for(let t of(e.Qa=!0,await oi(e.remoteStore,!0),r))sH(e.remoteStore,t)}else if(!1===t&&!1!==e.Qa){let t=[],r=Promise.resolve();e.Ma.forEach((n,i)=>{e.sharedClientState.isLocalQueryTarget(i)?t.push(i):r=r.then(()=>(oF(e,i),sf(e.localStore,i,!0))),sW(e.remoteStore,i)}),await r,await oQ(e,t),e.Na.forEach((t,r)=>{sW(e.remoteStore,r)}),e.La.pr(),e.Na=new Map,e.Oa=new e8(en.comparator),e.Qa=!1,await oi(e.remoteStore,!1)}}async function oQ(e,t,r){let n=[],i=[];for(let r of t){let t;let s=e.Ma.get(r);if(s&&0!==s.length)for(let r of(t=await sh(e.localStore,ra(s[0])),s)){let t=e.Fa.get(r),n=await oK(e,t);n.snapshot&&i.push(n.snapshot)}else{let n=await sp(e.localStore,r);t=await sh(e.localStore,n),await ok(e,oJ(n),r,!1,t.resumeToken)}n.push(t)}return e.Ca.d_(i),n}function oJ(e){var t,r,n,i;return t=e.path,r=e.collectionGroup,n=e.orderBy,i=e.filters,new rr(t,r,n,i,e.limit,"F",e.startAt,e.endAt)}function oY(e){return e.localStore.persistence.Qi()}async function oX(e,t,r,n){if(e.Qa)return void N("SyncEngine","Ignoring unexpected query state notification.");let i=e.Ma.get(t);if(i&&i.length>0)switch(r){case"current":case"not-current":{let n=await sg(e.localStore,rp(i[0])),s=ne.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,ts.EMPTY_BYTE_STRING);await oz(e,n,s);break}case"rejected":await sf(e.localStore,t,!0),oF(e,t,n);break;default:M()}}async function oZ(e,t,r){let n=o0(e);if(n.Qa){for(let e of t){if(n.Ma.has(e)&&n.sharedClientState.isActiveQueryTarget(e)){N("SyncEngine","Adding an already active target "+e);continue}let t=await sp(n.localStore,e),r=await sh(n.localStore,t);await ok(n,oJ(t),r.targetId,!1,r.resumeToken),sH(n.remoteStore,r)}for(let e of r)n.Ma.has(e)&&await sf(n.localStore,e,!1).then(()=>{sW(n.remoteStore,e),oF(n,e)}).catch(eg)}}function o0(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=oO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oP.bind(null,e),e.Ca.d_=og.bind(null,e.eventManager),e.Ca.$a=om.bind(null,e.eventManager),e}function o1(e){return e.remoteStore.remoteSyncer.applySuccessfulWrite=oD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oL.bind(null,e),e}class o2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sj(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){var t;return t=this.persistence,new sa(t,new so,e.initialUser,this.serializer)}Ga(e){return new i5(i6.Zr,this.serializer)}Wa(e){return new sx}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}o2.provider={build:()=>new o2};class o5 extends o2{constructor(e){super(),this.cacheSizeBytes=e}ja(e,t){return this.persistence.referenceDelegate instanceof i4||M(),new iD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ga(e){let t=void 0!==this.cacheSizeBytes?iw.withCacheSize(this.cacheSizeBytes):iw.DEFAULT;return new i5(e=>i4.Zr(e,t),this.serializer)}}class o3 extends o2{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await o1(this.Ja.syncEngine),await s4(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){var t;return t=this.persistence,new sa(t,new so,e.initialUser,this.serializer)}ja(e,t){return new iD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){let r=new eC(t,this.persistence);return new ek(e.asyncQueue,r)}Ga(e){let t=sn(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?iw.withCacheSize(this.cacheSizeBytes):iw.DEFAULT;return new se(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sL(),sM(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new sx}}class o6{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>oN(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=o$.bind(null,this.syncEngine),await oi(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new od}createDatastore(e){let t=sj(e.databaseInfo.databaseId),r=new sD(e.databaseInfo);return new sz(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){var t;return t=this.localStore,new sq(t,this.datastore,e.asyncQueue,e=>oN(this.syncEngine,e,0),sC.D()?new sC:new sk)}createSyncEngine(e,t){return function(e,t,r,n,i,s,o){let a=new o_(e,t,r,n,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){N("RemoteStore","RemoteStore shutting down."),e.L_.add(5),await sG(e),e.k_.shutdown(),e.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}o6.provider={build:()=>new o6};class o4{constructor(e,t,r,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=C.UNAUTHENTICATED,this.clientId=W.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async e=>{N("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(N("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new V;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=ol(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function o8(e,t){e.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await sl(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function o7(e,t){e.asyncQueue.verifyOperationInProgress();let r=await o9(e);N("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>on(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>on(t.remoteStore,r)),e._onlineComponents=t}async function o9(e){if(!e._offlineComponents){if(e._uninitializedComponentsProvider){N("FirestoreClient","Using user provided OfflineComponentProvider");try{await o8(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;D("Error using user provided cache. Falling back to memory cache: "+t),await o8(e,new o2)}}else N("FirestoreClient","Using default OfflineComponentProvider"),await o8(e,new o5(void 0))}return e._offlineComponents}async function ae(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N("FirestoreClient","Using user provided OnlineComponentProvider"),await o7(e,e._uninitializedComponentsProvider._online)):(N("FirestoreClient","Using default OnlineComponentProvider"),await o7(e,new o6))),e._onlineComponents}function at(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let ar=new Map;function an(e,t,r){if(!r)throw new F(j.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ai(e){if(!en.isDocumentKey(e))throw new F(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function as(e){if(en.isDocumentKey(e))throw new F(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ao(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return"function"==typeof e?"a function":M()}function aa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=ao(e);throw new F(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}class al{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new F(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new F(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new F(j.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=at(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new F(j.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new F(j.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new F(j.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,r;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,t.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class au{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new al({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new F(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new al(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new B;switch(e.type){case"firstParty":return new K(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new F(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=ar.get(e);t&&(N("ComponentProvider","Removing Datastore"),ar.delete(e),t.terminate())}(this),Promise.resolve()}}class ac{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ac(this.firestore,e,this._query)}}class ah{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new af(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ah(this.firestore,e,this._key)}}class af extends ac{constructor(e,t,r){super(e,t,rn(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ah(this.firestore,null,new en(e))}withConverter(e){return new af(this.firestore,e,this._path)}}function ad(e,t,...r){if(e=(0,b.m9)(e),an("collection","path",t),e instanceof au){let n=ee.fromString(t,...r);return as(n),new af(e,null,n)}{if(!(e instanceof ah||e instanceof af))throw new F(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(ee.fromString(t,...r));return as(n),new af(e.firestore,null,n)}}class ap{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sF(this,"async_queue_retry"),this.Vu=()=>{let e=sM();e&&N("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;let t=sM();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=sM();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new V;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!eS(e))throw e;N("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(e=>{let t;throw this.Eu=e,this.du=!1,P("INTERNAL UNHANDLED ERROR: ",(t=e.message||"",e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t)),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let n=oa.createAndSchedule(this,e,t,r,e=>this.yu(e));return this.Tu.push(n),n}fu(){this.Eu&&M()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{for(let t of(this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.Tu))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class ag extends au{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new ap,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ap(e),this._firestoreClient=void 0,await e}}}function am(e,t){let r="object"==typeof e?e:(0,y.Mq)(),n=(0,y.qX)(r,"firestore").getImmediate({identifier:"string"==typeof e?e:t||"(default)"});if(!n._initialized){let e=(0,b.P0)("firestore");e&&function(e,t,r,n={}){var i;let s=(e=aa(e,au))._getSettings(),o=`${t}:${r}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&D("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=C.MOCK_USER;else{t=(0,b.Sg)(n.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new F(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new C(s)}e._authCredentials=new z(new U(t,r))}}(n,...e)}return n}class ay{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ay(ts.fromBase64String(e))}catch(e){throw new F(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ay(ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class av{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new F(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class aw{constructor(e){this._methodName=e}}class ab{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}}class aI{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}(this._values,e._values)}}let aS=/^__.*__$/;class a_{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new rW(e,this.data,this.fieldMask,t,this.fieldTransforms):new rH(e,this.data,t,this.fieldTransforms)}}class aE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rW(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M()}}class ax{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ax(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.Fu({path:r,xu:!1});return n.Ou(e),n}Nu(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.Fu({path:r,xu:!1});return n.vu(),n}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return a$(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(aT(this.Cu)&&aS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ak{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sj(e)}Qu(e,t,r,n=!1){return new ax({Cu:e,methodName:t,qu:r,path:er.emptyPath(),xu:!1,ku:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aC(e){let t=e._freezeSettings(),r=sj(e._databaseId);return new ak(e._databaseId,!!t.ignoreUndefinedProperties,r)}class aA extends aw{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aA}}function aR(e,t,r){return new ax({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class aO extends null{_toFieldTransform(e){return new rV(e.path,new rO)}isEqual(e){return e instanceof aO}}class aN extends aw{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=aR(this,e,!0),r=new rN(this.Ku.map(e=>aM(e,t)));return new rV(e.path,r)}isEqual(e){return e instanceof aN&&(0,b.vZ)(this.Ku,e.Ku)}}class aP extends aw{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=aR(this,e,!0),r=new rD(this.Ku.map(e=>aM(e,t)));return new rV(e.path,r)}isEqual(e){return e instanceof aP&&(0,b.vZ)(this.Ku,e.Ku)}}class aD extends aw{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new rM(e.serializer,rC(e.serializer,this.$u));return new rV(e.path,t)}isEqual(e){return e instanceof aD&&this.$u===e.$u}}function aL(e,t,r,n=!1){return aM(r,e.Qu(n?4:3,t))}function aM(e,t){if(aF(e=(0,b.m9)(e)))return aV("Unsupported field value:",t,e),aj(e,t);if(e instanceof aw)return function(e,t){if(!aT(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){let r=[],n=0;for(let i of e){let e=aM(i,t.Lu(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,b.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rC(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=Y.fromDate(e);return{timestampValue:np(t.serializer,r)}}if(e instanceof Y){let r=new Y(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:np(t.serializer,r)}}if(e instanceof ab)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ay)return{bytesValue:ng(t.serializer,e._byteString)};if(e instanceof ah){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.Bu(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ny(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof aI)return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return rx(t.serializer,e)})}}}}};throw t.Bu(`Unsupported field value: ${ao(e)}`)}(e,t)}function aj(e,t){let r={};return e4(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):e6(e,(e,n)=>{let i=aM(n,t.Mu(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function aF(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Y||e instanceof ab||e instanceof ay||e instanceof ah||e instanceof aw||e instanceof aI)}function aV(e,t,r){if(!aF(r)||!("object"==typeof r&&null!==r&&(Object.getPrototypeOf(r)===Object.prototype||null===Object.getPrototypeOf(r)))){let n=ao(r);throw"an object"===n?t.Bu(e+" a custom object"):t.Bu(e+" "+n)}}function aU(e,t,r){if((t=(0,b.m9)(t))instanceof av)return t._internalPath;if("string"==typeof t)return az(e,t);throw a$("Field path arguments must be of type string or ",e,!1,void 0,r)}let aB=RegExp("[~\\*/\\[\\]]");function az(e,t,r){if(t.search(aB)>=0)throw a$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new av(...t.split("."))._internalPath}catch(n){throw a$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function a$(e,t,r,n,i){let s=n&&!n.isEmpty(),o=void 0!==i,a=`Function ${t}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new F(j.INVALID_ARGUMENT,a+e+l)}function aq(e,t){return e.some(e=>e.isEqual(t))}class aK{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ah(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new aG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(aH("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aG extends aK{data(){return super.data()}}function aH(e,t){return"string"==typeof t?az(e,t):t instanceof av?t._internalPath:t._delegate._internalPath}class aW{}class aQ extends aW{}class aJ extends aQ{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new aJ(e,t,r)}_apply(e){let t=this._parse(e);return a6(e._query,t),new ac(e.firestore,e.converter,rl(e._query,t))}_parse(e){let t=aC(e.firestore);return function(e,t,r,n,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new F(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){a3(o,s);let t=[];for(let r of o)t.push(a5(n,e,r));a={arrayValue:{values:t}}}else a=a5(n,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||a3(o,s),a=aL(r,t,o,"in"===s||"not-in"===s);return t$.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class aY extends aW{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new aY(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:tq.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e;for(let e of t.getFlattenedFilters())a6(r,e),r=rl(r,e)}(e._query,t),new ac(e.firestore,e.converter,rl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aX extends aQ{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new aX(e,t)}_apply(e){let t=function(e,t,r){if(null!==e.startAt)throw new F(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new F(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tB(t,r)}(e._query,this._field,this._direction);return new ac(e.firestore,e.converter,function(e,t){let r=e.explicitOrderBy.concat([t]);return new rr(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class aZ extends aQ{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new aZ(e,t,r)}_apply(e){return new ac(e.firestore,e.converter,ru(e._query,this._limit,this._limitType))}}class a0 extends aQ{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new a0(e,t,r)}_apply(e){var t;let r=a2(e,this.type,this._docOrFields,this._inclusive);return new ac(e.firestore,e.converter,new rr((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,r,t.endAt))}}class a1 extends aQ{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new a1(e,t,r)}_apply(e){var t;let r=a2(e,this.type,this._docOrFields,this._inclusive);return new ac(e.firestore,e.converter,new rr((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,r))}}function a2(e,t,r,n){if(r[0]=(0,b.m9)(r[0]),r[0]instanceof aK)return function(e,t,r,n,i){if(!n)throw new F(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${r}().`);let s=[];for(let r of ro(e))if(r.field.isKeyField())s.push(tE(t,n.key));else{let e=n.data.field(r.field);if(tc(e))throw new F(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+r.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){let e=r.field.canonicalString();throw new F(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new tF(s,i)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{let i=aC(e.firestore);return function(e,t,r,n,i,s){let o=e.explicitOrderBy;if(i.length>o.length)throw new F(j.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let a=[];for(let s=0;s<i.length;s++){let l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new F(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof l}`);if(!rs(e)&&-1!==l.indexOf("/"))throw new F(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${l}' contains a slash.`);let r=e.path.child(ee.fromString(l));if(!en.isDocumentKey(r))throw new F(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${r}' is not because it contains an odd number of segments.`);let i=new en(r);a.push(tE(t,i))}else{let e=aL(r,n,l);a.push(e)}}return new tF(a,s)}(e._query,e.firestore._databaseId,i,t,r,n)}}function a5(e,t,r){if("string"==typeof(r=(0,b.m9)(r))){if(""===r)throw new F(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rs(t)&&-1!==r.indexOf("/"))throw new F(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(ee.fromString(r));if(!en.isDocumentKey(n))throw new F(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return tE(e,new en(n))}if(r instanceof ah)return tE(e,r._key);throw new F(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ao(r)}.`)}function a3(e,t){if(!Array.isArray(e)||0===e.length)throw new F(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function a6(e,t){let r=function(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new F(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new F(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class a4{convertValue(e,t="none"){switch(ty(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw M()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return e6(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){var t,r,n;return new aI(null===(n=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===n?void 0:n.map(e=>tl(e.doubleValue)))}convertGeoPoint(e){return new ab(tl(e.latitude),tl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=th(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tf(e));default:return null}}convertTimestamp(e){let t=ta(e);return new Y(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ee.fromString(e);nL(r)||M();let n=new tp(r.get(1),r.get(3)),i=new en(r.popFirst(5));return n.isEqual(t)||P(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class a8 extends aK{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new a7(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(aH("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a7 extends a8{data(e={}){return super.data(e)}}function a9(e,t){var r,n,i,s,o;let a=aa(e.firestore,ag),l=function(e,t,...r){if(e=(0,b.m9)(e),1==arguments.length&&(t=W.newId()),an("doc","path",t),e instanceof au){let n=ee.fromString(t,...r);return ai(n),new ah(e,null,new en(n))}{if(!(e instanceof ah||e instanceof af))throw new F(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(ee.fromString(t,...r));return ai(n),new ah(e.firestore,e instanceof af?e.converter:null,new en(n))}}(e),u=(r=e.converter,n=t,r?r.toFirestore(n):n);return(s=a,o=[(function(e,t,r,n,i,s={}){let o,a;let l=e.Qu(s.merge||s.mergeFields?2:0,t,r,i);aV("Data must be an object, but it was:",l,n);let u=aj(n,l);if(s.merge)o=new tn(l.fieldMask),a=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=aU(t,n,r);if(!l.contains(i))throw new F(j.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);aq(e,i)||e.push(i)}o=new tn(e),a=l.fieldTransforms.filter(e=>o.covers(e.field))}else o=null,a=l.fieldTransforms;return new a_(new tM(u),o,a)})(aC(e.firestore),"addDoc",l._key,u,null!==e.converter,{}).toMutation(l._key,rB.exists(!1))],function(e,t){let r=new V;return e.asyncQueue.enqueueAndForget(async()=>oR(await ae(e).then(e=>e.syncEngine),t,r)),r.promise}(function(e){if(e._terminated)throw new F(j.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,r,n,i;let s=e._freezeSettings(),o=(i=e._databaseId,new td(i,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,at(s.experimentalLongPollingOptions),s.useFetchStreams));e._componentsProvider||(null===(r=s.localCache)||void 0===r?void 0:r._offlineComponentProvider)&&(null===(n=s.localCache)||void 0===n?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new o4(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}(s),o)).then(()=>l)}new WeakMap,function(e=!0){A=y.Jn,(0,y.Xd)(new v.wA("firestore",(t,{instanceIdentifier:r,options:n})=>{let i=t.getProvider("app").getImmediate(),s=new ag(new $(t.getProvider("auth-internal")),new H(t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new F(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tp(e.options.projectId,t)}(i,r),i);return n=Object.assign({useFetchStreams:e},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),(0,y.KN)(k,"4.7.4",void 0),(0,y.KN)(k,"4.7.4","esm2017")}()},6611:(e,t,r)=>{"use strict";r.d(t,{I:()=>a,R:()=>l});var n=r(5816);(0,n.KN)("firebase","11.0.1","app");var i=r(4055),s=r(109);let o=(0,n.ZF)({apiKey:"AIzaSyB6bn41Opev-r5Q4KKZ7Y1m21tqibzjr-U",authDomain:"wisely-7a582.firebaseapp.com",projectId:"wisely-7a582",storageBucket:"wisely-7a582.appspot.com",messagingSenderId:"262635468926",appId:"1:262635468926:web:3b6c1721d7f0c1e4b4802f"}),a=(0,i.v0)(o),l=(0,s.ad)(o)},6224:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o,k:()=>s});var n=r(5893),i=r(7294);let s=(0,i.createContext)({isLoading:!1,headerVisible:!0,headerType:!0,headerIndex:0,headerTitle:"",footerVisible:!0,footerIndex:0,beforeUrl:"/"});function o(e){let{children:t}=e,[r,o]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!0),[u,c]=(0,i.useState)(!0),[h,f]=(0,i.useState)(0),[d,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(!0),[y,v]=(0,i.useState)(0),[w,b]=(0,i.useState)("/");return(0,n.jsx)(s.Provider,{value:{isLoading:[r,o],headerVisible:[a,l],headerType:[u,c],headerIndex:[h,f],headerTitle:[d,p],footerVisible:[g,m],footerIndex:[y,v],beforeUrl:[w,b]},children:t})}},6250:(e,t,r)=>{"use strict";r.d(t,{FJ3:()=>s,uFR:()=>o,zrF:()=>i});var n=r(7796);function i(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"176",height:"176",x:"48",y:"48",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]},{tag:"rect",attr:{width:"176",height:"176",x:"288",y:"48",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]},{tag:"rect",attr:{width:"176",height:"176",x:"48",y:"288",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]},{tag:"rect",attr:{width:"176",height:"176",x:"288",y:"288",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]}]})(e)}function s(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z"},child:[]},{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z"},child:[]}]})(e)}function o(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29 448 448"},child:[]}]})(e)}},303:(e,t,r)=>{"use strict";r.d(t,{AWH:()=>o,QAE:()=>s,u1R:()=>i});var n=r(7796);function i(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(e)}function s(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(e)}function o(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.6 64c-36.4 0-70.7 16.7-93.6 43.9C233.1 80.7 198.8 64 162.4 64 97.9 64 48 114.2 48 179.1c0 79.5 70.7 143.3 177.8 241.7L256 448l30.2-27.2C393.3 322.4 464 258.6 464 179.1 464 114.2 414.1 64 349.6 64zm-80.8 329.3l-4.2 3.9-8.6 7.8-8.6-7.8-4.2-3.9c-50.4-46.3-94-86.3-122.7-122-28-34.7-40.4-63.1-40.4-92.2 0-22.9 8.4-43.9 23.7-59.3 15.2-15.4 36-23.8 58.6-23.8 26.1 0 52 12.2 69.1 32.5l24.5 29.1 24.5-29.1c17.1-20.4 43-32.5 69.1-32.5 22.6 0 43.4 8.4 58.7 23.8 15.3 15.4 23.7 36.5 23.7 59.3 0 29-12.5 57.5-40.4 92.2-28.8 35.7-72.3 75.7-122.8 122z"},child:[]}]})(e)}},7796:(e,t,r)=>{"use strict";r.d(t,{w_:()=>c});var n=r(7294),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(i),o=["attr","size","title"];function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e){return t=>n.createElement(h,a({attr:u({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,u({key:r},t.attr),e(t.child)))}(e.child))}function h(e){var t=t=>{var r,{attr:i,size:s,title:l}=e,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,o),h=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:r,style:u(u({color:e.color||t.color},t.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&n.createElement("title",null,l),e.children)};return void 0!==s?n.createElement(s.Consumer,null,e=>t(e)):t(i)}},540:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>rx});var n,i,s=r(5893);r(5060);var o=r(7796);function a(e){return(0,o.w_)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M222,128a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,128ZM40,70H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12ZM216,186H40a6,6,0,0,0,0,12H216a6,6,0,0,0,0-12Z"},child:[]}]})(e)}var l=r(6250);function u(e){return(0,o.w_)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.36 1.37l6.36 5.8-.71.71L13 6.964v6.526l-.5.5h-3l-.5-.5v-3.5H7v3.5l-.5.5h-3l-.5-.5V6.972L2 7.88l-.71-.71 6.35-5.8h.72zM4 6.063v6.927h2v-3.5l.5-.5h3l.5.5v3.5h2V6.057L8 2.43 4 6.063z"},child:[]}]})(e)}var c=r(303),h=r(7294),f=r(6224),d=r(1664),p=r(1686),g=r(6611),m=r(4055);let y=p.zo.div.withConfig({componentId:"sc-306e7686-0"})(["display:flex;height:100%;justify-content:center;align-items:center;"]);function v(){let[e,t]=(0,h.useContext)(f.k).footerVisible,[r,n]=(0,h.useContext)(f.k).footerIndex,[i,o]=(0,h.useContext)(f.k).beforeUrl,[p,v]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{(0,m.Aj)(g.I,e=>{e?v(!0):v(!1)})},[g.I]),(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)("div",{className:"pageFooter",children:[(0,s.jsx)("div",{className:0===r?"pageFooterItemSelect":"pageFooterItem",children:(0,s.jsx)(d,{href:"/category",style:{width:"100%"},children:(0,s.jsx)(y,{children:(0,s.jsx)(a,{})})})}),(0,s.jsx)("div",{className:1===r?"pageFooterItemSelect":"pageFooterItem",children:(0,s.jsx)(d,{href:"/search",style:{width:"100%"},children:(0,s.jsx)(y,{children:(0,s.jsx)(l.uFR,{})})})}),(0,s.jsx)("div",{className:2===r?"pageFooterItemSelect":"pageFooterItem",children:(0,s.jsx)(d,{href:"/",style:{width:"100%"},children:(0,s.jsx)(y,{children:(0,s.jsx)(u,{})})})}),(0,s.jsx)("div",{className:3===r?"pageFooterItemSelect":"pageFooterItem",children:(0,s.jsx)(d,{href:p?"/like":"/login",style:{width:"100%"},children:(0,s.jsx)(y,{children:(0,s.jsx)(c.AWH,{})})})}),(0,s.jsx)("div",{className:4===r?"pageFooterItemSelect":"pageFooterItem",children:(0,s.jsx)(d,{href:p?"/my":"/login",style:{width:"100%"},onClick:e=>{o("/my")},children:(0,s.jsx)(y,{children:(0,s.jsx)(l.FJ3,{})})})})]}):null})}function w(){let[e,t]=(0,h.useContext)(f.k).headerVisible;return(0,h.useEffect)(()=>{(0,m.Aj)(g.I,e=>{e?t(!1):t(!0)})},[g.I]),(0,s.jsx)(s.Fragment,{children:e?(0,s.jsx)("div",{style:{fontSize:"1.6rem",cursor:"pointer"},className:"pageHeader",children:(0,s.jsxs)("p",{children:[(0,s.jsx)("a",{children:"\uD83E\uDE99 "}),(0,s.jsx)("b",{children:"100  "}),"   "]})}):null})}function b(e){return(0,o.w_)({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},child:[]}]})(e)}var I=r(1163);function S(){let[e,t]=(0,h.useContext)(f.k).headerType,[r,n]=(0,h.useContext)(f.k).headerTitle,[i,o]=(0,h.useContext)(f.k).footerVisible,a=(0,I.useRouter)(),l=e=>{a.push("/")};return(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)("div",{className:"pageHeaderMain",children:[(0,s.jsx)(d,{href:"/",onClick:l,children:(0,s.jsx)("img",{src:"https://wisely.store/custom/img/logo_wt.svg"})}),(0,s.jsx)("p",{style:{fontSize:"1.6rem"},children:""===r?(0,s.jsx)("b",{children:r}):"    ."}),(0,s.jsx)("div",{onClick:l,style:{cursor:"pointer"},children:(0,s.jsx)(b,{style:{fontSize:"2.7rem",margin:"20px"}})})]}):(0,s.jsx)("div",{style:{position:"sticky",top:"0"},children:(0,s.jsxs)("div",{className:"pageHeaderMainLogin",children:[(0,s.jsx)("div",{onClick:e=>{a.back()},style:{cursor:"pointer"},children:(0,s.jsx)(c.u1R,{style:{fontSize:"2.5rem",margin:"15px"}})}),(0,s.jsx)("p",{style:{fontSize:"1.6rem"},children:(0,s.jsx)("b",{children:r})}),(0,s.jsx)("div",{onClick:l,style:{cursor:"pointer"},children:(0,s.jsx)(u,{style:{fontSize:"2.7rem",margin:"20px"}})})]})})})}function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function E(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function T(e,t){if(null==e)return{};var r,n,i=E(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.includes(r)||({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}let x=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n);else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(n&&(n+=" "),n+=t);return n};var k=r(8679),C=r.n(k),A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R=("undefined"==typeof window?"undefined":A(window))==="object"&&("undefined"==typeof document?"undefined":A(document))==="object"&&9===document.nodeType;function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function D(e,t,r){return t&&P(e.prototype,t),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,L(e,t)}function j(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var F={}.constructor;function V(e,t,r){void 0===e&&(e="unnamed");var n=r.jss,i=function e(t){if(null==t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);if(t.constructor!==F)return t;var r={};for(var n in t)r[n]=e(t[n]);return r}(t);return n.plugins.onCreateRule(e,i,r)||(e[0],null)}var U=function(e,t){for(var r="",n=0;n<e.length&&"!important"!==e[n];n++)r&&(r+=t),r+=e[n];return r},B=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)t&&(t+=", "),t+=U(e[r]," ");else t=U(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function z(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function $(e,t){for(var r="",n=0;n<t;n++)r+="  ";return r+e}function q(e,t,r){void 0===r&&(r={});var n="";if(!t)return n;var i=r.indent,s=void 0===i?0:i,o=t.fallbacks;!1===r.format&&(s=-1/0);var a=z(r),l=a.linebreak,u=a.space;if(e&&s++,o){if(Array.isArray(o))for(var c=0;c<o.length;c++){var h=o[c];for(var f in h){var d=h[f];null!=d&&(n&&(n+=l),n+=$(f+":"+u+B(d)+";",s))}}else for(var p in o){var g=o[p];null!=g&&(n&&(n+=l),n+=$(p+":"+u+B(g)+";",s))}}for(var m in t){var y=t[m];null!=y&&"fallbacks"!==m&&(n&&(n+=l),n+=$(m+":"+u+B(y)+";",s))}return(n||r.allowEmpty)&&e?(s--,n&&(n=""+l+n+l),$(""+e+u+"{"+n,s)+$("}",s)):n}var K=/([[\].#*$><+~=|^:(),"'`\s])/g,G="undefined"!=typeof CSS&&CSS.escape,H=function(e){return G?G(e):e.replace(K,"\\$1")},W=function(){function e(e,t,r){this.type="style",this.isProcessed=!1;var n=r.sheet,i=r.Renderer;this.key=e,this.options=r,this.style=t,n?this.renderer=n.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,r){if(void 0===t)return this.style[e];var n=!!r&&r.force;if(!n&&this.style[e]===t)return this;var i=t;r&&!1===r.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var s=null==i||!1===i,o=e in this.style;if(s&&!o&&!n)return this;var a=s&&o;if(a?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return a?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var l=this.options.sheet;return l&&l.attached,this},e}(),Q=function(e){function t(t,r,n){i=e.call(this,t,r,n)||this;var i,s=n.selector,o=n.scoped,a=n.sheet,l=n.generateId;return s?i.selectorText=s:!1!==o&&(i.id=l(j(j(i)),a),i.selectorText="."+H(i.id)),i}M(t,e);var r=t.prototype;return r.applyTo=function(e){var t=this.renderer;if(t){var r=this.toJSON();for(var n in r)t.setProperty(e,n,r[n])}return this},r.toJSON=function(){var e={};for(var t in this.style){var r=this.style[t];"object"!=typeof r?e[t]=r:Array.isArray(r)&&(e[t]=B(r))}return e},r.toString=function(e){var t=this.options.sheet,r=t&&t.options.link?_({},e,{allowEmpty:!0}):e;return q(this.selectorText,this.style,r)},D(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,r=this.renderable;r&&t&&!t.setSelector(r,e)&&t.replaceRule(r,this)}},get:function(){return this.selectorText}}]),t}(W),J={indent:1,children:!0},Y=/@([\w-]+)/,X=function(){function e(e,t,r){this.type="conditional",this.isProcessed=!1,this.key=e;var n=e.match(Y);for(var i in this.at=n?n[1]:"unknown",this.query=r.name||"@"+this.at,this.options=r,this.rules=new em(_({},r,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,r){var n=this.rules.add(e,t,r);return n?(this.options.jss.plugins.onProcessRule(n),n):null},t.replaceRule=function(e,t,r){var n=this.rules.replace(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.toString=function(e){void 0===e&&(e=J);var t=z(e).linebreak;if(null==e.indent&&(e.indent=J.indent),null==e.children&&(e.children=J.children),!1===e.children)return this.query+" {}";var r=this.rules.toString(e);return r?this.query+" {"+t+r+t+"}":""},e}(),Z=/@container|@media|@supports\s+/,ee={indent:1,children:!0},et=/@keyframes\s+([\w-]+)/,er=function(){function e(e,t,r){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var n=e.match(et);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=r;var i=r.scoped,s=r.sheet,o=r.generateId;for(var a in this.id=!1===i?this.name:H(o(this,s)),this.rules=new em(_({},r,{parent:this})),t)this.rules.add(a,t[a],_({},r,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=ee);var t=z(e).linebreak;if(null==e.indent&&(e.indent=ee.indent),null==e.children&&(e.children=ee.children),!1===e.children)return this.at+" "+this.id+" {}";var r=this.rules.toString(e);return r&&(r=""+t+r+t),this.at+" "+this.id+" {"+r+"}"},e}(),en=/@keyframes\s+/,ei=/\$([\w-]+)/g,es=function(e,t){return"string"==typeof e?e.replace(ei,function(e,r){return r in t?t[r]:e}):e},eo=function(e,t,r){var n=e[t],i=es(n,r);i!==n&&(e[t]=i)},ea=function(e){function t(){return e.apply(this,arguments)||this}return M(t,e),t.prototype.toString=function(e){var t=this.options.sheet,r=t&&t.options.link?_({},e,{allowEmpty:!0}):e;return q(this.key,this.style,r)},t}(W),el=function(){function e(e,t,r){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=r}return e.prototype.toString=function(e){var t=z(e).linebreak;if(Array.isArray(this.style)){for(var r="",n=0;n<this.style.length;n++)r+=q(this.at,this.style[n]),this.style[n+1]&&(r+=t);return r}return q(this.at,this.style,e)},e}(),eu=/@font-face/,ec=function(){function e(e,t,r){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=r}return e.prototype.toString=function(e){return q(this.key,this.style,e)},e}(),eh=function(){function e(e,t,r){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=r}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",r=0;r<this.value.length;r++)t+=this.key+" "+this.value[r]+";",this.value[r+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),ef={"@charset":!0,"@import":!0,"@namespace":!0},ed=[{onCreateRule:function(e,t,r){return"@"===e[0]||r.parent&&"keyframes"===r.parent.type?null:new Q(e,t,r)}},{onCreateRule:function(e,t,r){return Z.test(e)?new X(e,t,r):null}},{onCreateRule:function(e,t,r){return"string"==typeof e&&en.test(e)?new er(e,t,r):null},onProcessStyle:function(e,t,r){return"style"===t.type&&r&&("animation-name"in e&&eo(e,"animation-name",r.keyframes),"animation"in e&&eo(e,"animation",r.keyframes)),e},onChangeValue:function(e,t,r){var n=r.options.sheet;if(!n)return e;switch(t){case"animation":case"animation-name":return es(e,n.keyframes);default:return e}}},{onCreateRule:function(e,t,r){return r.parent&&"keyframes"===r.parent.type?new ea(e,t,r):null}},{onCreateRule:function(e,t,r){return eu.test(e)?new el(e,t,r):null}},{onCreateRule:function(e,t,r){return"@viewport"===e||"@-ms-viewport"===e?new ec(e,t,r):null}},{onCreateRule:function(e,t,r){return e in ef?new eh(e,t,r):null}}],ep={process:!0},eg={force:!0,process:!0},em=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,r){var n=this.options,i=n.parent,s=n.sheet,o=n.jss,a=n.Renderer,l=n.generateId,u=n.scoped,c=_({classes:this.classes,parent:i,sheet:s,jss:o,Renderer:a,generateId:l,scoped:u,name:e,keyframes:this.keyframes,selector:void 0},r),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(c.selector="."+H(this.classes[h]));var f=V(h,t,c);if(!f)return null;this.register(f);var d=void 0===c.index?this.index.length:c.index;return this.index.splice(d,0,f),f},t.replace=function(e,t,r){var n=this.get(e),i=this.index.indexOf(n);n&&this.remove(n);var s=r;return -1!==i&&(s=_({},r,{index:i})),this.add(e,t,s)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Q?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof er&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Q?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof er&&delete this.keyframes[e.name]},t.update=function(){if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,r);else for(var e,t,r,n=0;n<this.index.length;n++)this.updateOne(this.index[n],t,r)},t.updateOne=function(t,r,n){void 0===n&&(n=ep);var i=this.options,s=i.jss.plugins,o=i.sheet;if(t.rules instanceof e){t.rules.update(r,n);return}var a=t.style;if(s.onUpdate(r,t,o,n),n.process&&a&&a!==t.style){for(var l in s.onProcessStyle(t.style,t,o),t.style){var u=t.style[l];u!==a[l]&&t.prop(l,u,eg)}for(var c in a){var h=t.style[c],f=a[c];null==h&&h!==f&&t.prop(c,null,eg)}}},t.toString=function(e){for(var t="",r=this.options.sheet,n=!!r&&r.options.link,i=z(e).linebreak,s=0;s<this.index.length;s++){var o=this.index[s].toString(e);(o||n)&&(t&&(t+=i),t+=o)}return t},e}(),ey=function(){function e(e,t){for(var r in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=_({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new em(this.options),e)this.rules.add(r,e[r]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached&&(this.renderer&&this.renderer.detach(),this.attached=!1),this},t.addRule=function(e,t,r){var n=this.queue;this.attached&&!n&&(this.queue=[]);var i=this.rules.add(e,t,r);return i?((this.options.jss.plugins.onProcessRule(i),this.attached)?this.deployed&&(n?n.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))):this.deployed=!1,i):null},t.replaceRule=function(e,t,r){var n=this.rules.get(e);if(!n)return this.addRule(e,t,r);var i=this.rules.replace(e,t,r);return(i&&this.options.jss.plugins.onProcessRule(i),this.attached)?this.deployed&&this.renderer&&(i?n.renderable&&this.renderer.replaceRule(n.renderable,i):this.renderer.deleteRule(n)):this.deployed=!1,i},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var r=[];for(var n in e){var i=this.addRule(n,e[n],t);i&&r.push(i)}return r},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!!t&&(!this.attached||!!t.renderable)&&(this.rules.remove(t),!this.attached||!t.renderable||!this.renderer||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,r){return this.rules.updateOne(e,t,r),this},t.toString=function(e){return this.rules.toString(e)},e}(),ev=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,r){for(var n=0;n<this.registry.onCreateRule.length;n++){var i=this.registry.onCreateRule[n](e,t,r);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,r=0;r<this.registry.onProcessRule.length;r++)this.registry.onProcessRule[r](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,r){for(var n=0;n<this.registry.onProcessStyle.length;n++)t.style=this.registry.onProcessStyle[n](t.style,t,r)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,r,n){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,r,n)},t.onChangeValue=function(e,t,r){for(var n=e,i=0;i<this.registry.onChangeValue.length;i++)n=this.registry.onChangeValue[i](n,t,r);return n},t.use=function(e,t){void 0===t&&(t={queue:"external"});var r=this.plugins[t.queue];-1===r.indexOf(e)&&(r.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(e,t){for(var r in t)r in e&&e[r].push(t[r]);return e},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ew=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,r=e.options.index;if(-1===t.indexOf(e)){if(0===t.length||r>=this.index){t.push(e);return}for(var n=0;n<t.length;n++)if(t[n].options.index>r){t.splice(n,0,e);return}}},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,r=t.attached,n=E(t,["attached"]),i=z(n).linebreak,s="",o=0;o<this.registry.length;o++){var a=this.registry[o];(null==r||a.attached===r)&&(s&&(s+=i),s+=a.toString(n))}return s},D(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),eb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),eI="2f1acc6c3a606b082e5eef5e54414ffb";null==eb[eI]&&(eb[eI]=0);var eS=eb[eI]++,e_=function(e){void 0===e&&(e={});var t=0;return function(r,n){t+=1;var i="",s="";return(n&&(n.options.classNamePrefix&&(s=n.options.classNamePrefix),null!=n.options.jss.id&&(i=String(n.options.jss.id))),e.minify)?""+(s||"c")+eS+i+t:s+r.key+"-"+eS+(i?"-"+i:"")+"-"+t}},eE=function(e){var t;return function(){return t||(t=e()),t}},eT=function(e,t){try{if(e.attributeStyleMap)return e.attributeStyleMap.get(t);return e.style.getPropertyValue(t)}catch(e){return""}},ex=function(e,t,r){try{var n=r;if(Array.isArray(r)&&(n=B(r)),e.attributeStyleMap)e.attributeStyleMap.set(t,n);else{var i=n?n.indexOf("!important"):-1,s=i>-1?n.substr(0,i-1):n;e.style.setProperty(t,s,i>-1?"important":"")}}catch(e){return!1}return!0},ek=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(e){}},eC=function(e,t){return e.selectorText=t,e.selectorText===t},eA=eE(function(){return document.querySelector("head")}),eR=eE(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),eO=function(e,t,r){try{"insertRule"in e?e.insertRule(t,r):"appendRule"in e&&e.appendRule(t)}catch(e){return!1}return e.cssRules[r]},eN=function(e,t){var r=e.cssRules.length;return void 0===t||t>r?r:t},eP=function(){var e=document.createElement("style");return e.textContent="\n",e},eD=function(){function e(e){this.getPropertyValue=eT,this.setProperty=ex,this.removeProperty=ek,this.setSelector=eC,this.hasInsertedRules=!1,this.cssRules=[],e&&ew.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},r=t.media,n=t.meta,i=t.element;this.element=i||eP(),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),n&&this.element.setAttribute("data-meta",n);var s=eR();s&&this.element.setAttribute("nonce",s)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var r=t.insertionPoint,n=function(e){var t=ew.registry;if(t.length>0){var r=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e);if(r&&r.renderer)return{parent:r.renderer.element.parentNode,node:r.renderer.element};if((r=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e))&&r.renderer)return{parent:r.renderer.element.parentNode,node:r.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&"string"==typeof n){var i=function(e){for(var t=eA(),r=0;r<t.childNodes.length;r++){var n=t.childNodes[r];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}(n);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}(t);if(!1!==n&&n.parent){n.parent.insertBefore(e,n.node);return}if(r&&"number"==typeof r.nodeType){var i=r.parentNode;i&&i.insertBefore(e,r.nextSibling);return}eA().appendChild(e)}(this.element,this.sheet.options);var e=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;if(e){if(e.options.link){this.insertRules(e.rules);return}this.element.textContent="\n"+e.toString()+"\n"}},t.insertRules=function(e,t){for(var r=0;r<e.index.length;r++)this.insertRule(e.index[r],r,t)},t.insertRule=function(e,t,r){if(void 0===r&&(r=this.element.sheet),e.rules){var n=r;if("conditional"===e.type||"keyframes"===e.type){var i=eN(r,t);if(!1===(n=eO(r,e.toString({children:!1}),i)))return!1;this.refCssRule(e,i,n)}return this.insertRules(e.rules,n),n}var s=e.toString();if(!s)return!1;var o=eN(r,t),a=eO(r,s,o);return!1!==a&&(this.hasInsertedRules=!0,this.refCssRule(e,o,a),a)},t.refCssRule=function(e,t,r){e.renderable=r,e.options.parent instanceof ey&&this.cssRules.splice(t,0,r)},t.deleteRule=function(e){var t=this.element.sheet,r=this.indexOf(e);return -1!==r&&(t.deleteRule(r),this.cssRules.splice(r,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var r=this.indexOf(e);return -1!==r&&(this.element.sheet.deleteRule(r),this.cssRules.splice(r,1),this.insertRule(t,r))},t.getRules=function(){return this.element.sheet.cssRules},e}(),eL=0,eM=function(){function e(e){this.id=eL++,this.version="10.10.0",this.plugins=new ev,this.options={id:{minify:!1},createGenerateId:e_,Renderer:R?eD:null,plugins:[]},this.generateId=e_({minify:!1});for(var t=0;t<ed.length;t++)this.plugins.use(ed[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=_({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var r=t.index;"number"!=typeof r&&(r=0===ew.index?0:ew.index+1);var n=new ey(e,_({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:r}));return this.plugins.onProcessSheet(n),n},t.removeStyleSheet=function(e){return e.detach(),ew.remove(e),this},t.createRule=function(e,t,r){if(void 0===t&&(t={}),void 0===r&&(r={}),"object"==typeof e)return this.createRule(void 0,e,t);var n=_({},r,{name:e,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var i=V(e,t,n);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){e.plugins.use(t)}),this},e}(),ej=function(e){return new eM(e)},eF="object"==typeof CSS&&null!=CSS&&"number"in CSS;function eV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,r=e.newClasses;if(e.Component,!r)return t;var n=_({},t);return Object.keys(r).forEach(function(e){r[e]&&(n[e]="".concat(t[e]," ").concat(r[e]))}),n}ej();let eU={set:function(e,t,r,n){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(r,n)},get:function(e,t,r){var n=e.get(t);return n?n.get(r):void 0},delete:function(e,t,r){e.get(t).delete(r)}};var eB=h.createContext(null);function ez(){return h.useContext(eB)}let e$="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var eq=["checked","disabled","error","focused","focusVisible","required","expanded","selected"],eK=Date.now(),eG="fnValues"+eK,eH="fnStyle"+ ++eK,eW="@global",eQ="@global ",eJ=function(){function e(e,t,r){for(var n in this.type="global",this.at=eW,this.isProcessed=!1,this.key=e,this.options=r,this.rules=new em(_({},r,{parent:this})),t)this.rules.add(n,t[n]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,r){var n=this.rules.add(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.replaceRule=function(e,t,r){var n=this.rules.replace(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),eY=function(){function e(e,t,r){this.type="global",this.at=eW,this.isProcessed=!1,this.key=e,this.options=r;var n=e.substr(eQ.length);this.rule=r.jss.createRule(n,t,_({},r,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),eX=/\s*,\s*/g;function eZ(e,t){for(var r=e.split(eX),n="",i=0;i<r.length;i++)n+=t+" "+r[i].trim(),r[i+1]&&(n+=", ");return n}var e0=/\s*,\s*/g,e1=/&/g,e2=/\$([\w-]+)/g,e5=r(5477);function e3(e){var t={};for(var r in e)t[0===r.indexOf("--")?r:(0,e5.Z)(r)]=e[r];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(e3):t.fallbacks=e3(e.fallbacks)),t}var e6=eF&&CSS?CSS.px:"px",e4=eF&&CSS?CSS.ms:"ms",e8=eF&&CSS?CSS.percent:"%";function e7(e){var t=/(-[a-z])/g,r=function(e){return e[1].toUpperCase()},n={};for(var i in e)n[i]=e[i],n[i.replace(t,r)]=e[i];return n}var e9=e7({"animation-delay":e4,"animation-duration":e4,"background-position":e6,"background-position-x":e6,"background-position-y":e6,"background-size":e6,border:e6,"border-bottom":e6,"border-bottom-left-radius":e6,"border-bottom-right-radius":e6,"border-bottom-width":e6,"border-left":e6,"border-left-width":e6,"border-radius":e6,"border-right":e6,"border-right-width":e6,"border-top":e6,"border-top-left-radius":e6,"border-top-right-radius":e6,"border-top-width":e6,"border-width":e6,"border-block":e6,"border-block-end":e6,"border-block-end-width":e6,"border-block-start":e6,"border-block-start-width":e6,"border-block-width":e6,"border-inline":e6,"border-inline-end":e6,"border-inline-end-width":e6,"border-inline-start":e6,"border-inline-start-width":e6,"border-inline-width":e6,"border-start-start-radius":e6,"border-start-end-radius":e6,"border-end-start-radius":e6,"border-end-end-radius":e6,margin:e6,"margin-bottom":e6,"margin-left":e6,"margin-right":e6,"margin-top":e6,"margin-block":e6,"margin-block-end":e6,"margin-block-start":e6,"margin-inline":e6,"margin-inline-end":e6,"margin-inline-start":e6,padding:e6,"padding-bottom":e6,"padding-left":e6,"padding-right":e6,"padding-top":e6,"padding-block":e6,"padding-block-end":e6,"padding-block-start":e6,"padding-inline":e6,"padding-inline-end":e6,"padding-inline-start":e6,"mask-position-x":e6,"mask-position-y":e6,"mask-size":e6,height:e6,width:e6,"min-height":e6,"max-height":e6,"min-width":e6,"max-width":e6,bottom:e6,left:e6,top:e6,right:e6,inset:e6,"inset-block":e6,"inset-block-end":e6,"inset-block-start":e6,"inset-inline":e6,"inset-inline-end":e6,"inset-inline-start":e6,"box-shadow":e6,"text-shadow":e6,"column-gap":e6,"column-rule":e6,"column-rule-width":e6,"column-width":e6,"font-size":e6,"font-size-delta":e6,"letter-spacing":e6,"text-decoration-thickness":e6,"text-indent":e6,"text-stroke":e6,"text-stroke-width":e6,"word-spacing":e6,motion:e6,"motion-offset":e6,outline:e6,"outline-offset":e6,"outline-width":e6,perspective:e6,"perspective-origin-x":e8,"perspective-origin-y":e8,"transform-origin":e8,"transform-origin-x":e8,"transform-origin-y":e8,"transform-origin-z":e8,"transition-delay":e4,"transition-duration":e4,"vertical-align":e6,"flex-basis":e6,"shape-margin":e6,size:e6,gap:e6,grid:e6,"grid-gap":e6,"row-gap":e6,"grid-row-gap":e6,"grid-column-gap":e6,"grid-template-rows":e6,"grid-template-columns":e6,"grid-auto-rows":e6,"grid-auto-columns":e6,"box-shadow-x":e6,"box-shadow-y":e6,"box-shadow-blur":e6,"box-shadow-spread":e6,"font-line-height":e6,"text-shadow-x":e6,"text-shadow-y":e6,"text-shadow-blur":e6});function te(e,t,r){if(null==t)return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=te(e,t[n],r);else if("object"==typeof t){if("fallbacks"===e)for(var i in t)t[i]=te(i,t[i],r);else for(var s in t)t[s]=te(e+"-"+s,t[s],r)}else if("number"==typeof t&&!1===isNaN(t)){var o=r[e]||e9[e];return o&&!(0===t&&o===e6)?"function"==typeof o?o(t).toString():""+t+o:t.toString()}return t}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tr(e,t){if(e){if("string"==typeof e)return tt(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(e,t):void 0}}var tn="",ti="",ts="",to="",ta=R&&"ontouchstart"in document.documentElement;if(R){var tl={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},tu=document.createElement("p").style;for(var tc in tl)if(tc+"Transform" in tu){tn=tc,ti=tl[tc];break}"Webkit"===tn&&"msHyphens"in tu&&(tn="ms",ti=tl.ms,to="edge"),"Webkit"===tn&&"-apple-trailing-word"in tu&&(ts="apple")}var th={js:tn,css:ti,vendor:ts,browser:to,isTouch:ta},tf=/[-\s]+(.)?/g;function td(e,t){return t?t.toUpperCase():""}function tp(e){return e.replace(tf,td)}function tg(e){return tp("-"+e)}var tm={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ty={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},tv=Object.keys(ty),tw=function(e){return th.css+e},tb=[{noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===th.js?"-webkit-"+e:th.css+e)}},{noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===th.js?th.css+"print-"+e:e)}},{noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===th.js){var r="mask-image";if(tp(r) in t)return e;if(th.js+tg(r) in t)return th.css+e}return e}},{noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==th.vendor||th.isTouch?e:th.css+e)}},{noPrefill:["transform"],supportedProperty:function(e,t,r){return"transform"===e&&(r.transform?e:th.css+e)}},{noPrefill:["transition"],supportedProperty:function(e,t,r){return"transition"===e&&(r.transition?e:th.css+e)}},{noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===th.js||"ms"===th.js&&"edge"!==th.browser?th.css+e:e)}},{noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===th.js||"ms"===th.js||"apple"===th.vendor?th.css+e:e)}},{supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===th.js?"WebkitColumn"+tg(e) in t&&th.css+"column-"+e:"Moz"===th.js&&"page"+tg(e) in t&&"page-"+e)}},{supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===th.js)return e;var r=e.replace("-inline","");return th.js+tg(r) in t&&th.css+r}},{supportedProperty:function(e,t){return tp(e) in t&&e}},{supportedProperty:function(e,t){var r=tg(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:th.js+r in t?th.css+e:"Webkit"!==th.js&&"Webkit"+r in t&&"-webkit-"+e}},{supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===th.js?""+th.css+e:e)}},{supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===th.js?th.css+"scroll-chaining":e)}},{supportedProperty:function(e,t){var r=tm[e];return!!r&&th.js+tg(r) in t&&th.css+r}},{supportedProperty:function(e,t,r){var n=r.multiple;if(tv.indexOf(e)>-1){var i=ty[e];if(!Array.isArray(i))return th.js+tg(i) in t&&th.css+i;if(!n)return!1;for(var s=0;s<i.length;s++)if(!(th.js+tg(i[0]) in t))return!1;return i.map(tw)}return!1}}],tI=tb.filter(function(e){return e.supportedProperty}).map(function(e){return e.supportedProperty}),tS=tb.filter(function(e){return e.noPrefill}).reduce(function(e,t){var r;return e.push.apply(e,function(e){if(Array.isArray(e))return tt(e)}(r=t.noPrefill)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||tr(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e},[]),t_={};if(R){n=document.createElement("p");var tE=window.getComputedStyle(document.documentElement,"");for(var tT in tE)isNaN(tT)||(t_[tE[tT]]=tE[tT]);tS.forEach(function(e){return delete t_[e]})}function tx(e,t){if(void 0===t&&(t={}),!n)return e;if(null!=t_[e])return t_[e];("transition"===e||"transform"===e)&&(t[e]=e in n.style);for(var r=0;r<tI.length&&(t_[e]=tI[r](e,n.style,t),!t_[e]);r++);try{n.style[e]=""}catch(e){return!1}return t_[e]}var tk={},tC={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},tA=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function tR(e,t,r){return"var"===t?"var":"all"===t?"all":"all"===r?", all":(t?tx(t):", "+tx(r))||t||r}function tO(e,t){var r=t;if(!i||"content"===e)return t;if("string"!=typeof r||!isNaN(parseInt(r,10)))return r;var n=e+r;if(null!=tk[n])return tk[n];try{i.style[e]=r}catch(e){return tk[n]=!1,!1}if(tC[e])r=r.replace(tA,tR);else if(""===i.style[e]&&("-ms-flex"===(r=th.css+r)&&(i.style[e]="-ms-flexbox"),i.style[e]=r,""===i.style[e]))return tk[n]=!1,!1;return i.style[e]="",tk[n]=r,tk[n]}R&&(i=document.createElement("p"));var tN=ej({plugins:[{onCreateRule:function(e,t,r){if("function"!=typeof t)return null;var n=V(e,{},r);return n[eH]=t,n},onProcessStyle:function(e,t){if(eG in t||eH in t)return e;var r={};for(var n in e){var i=e[n];"function"==typeof i&&(delete e[n],r[n]=i)}return t[eG]=r,e},onUpdate:function(e,t,r,n){var i=t[eH];i&&(t.style=i(e)||{});var s=t[eG];if(s)for(var o in s)t.prop(o,s[o](e),n)}},{onCreateRule:function(e,t,r){if(!e)return null;if(e===eW)return new eJ(e,t,r);if("@"===e[0]&&e.substr(0,eQ.length)===eQ)return new eY(e,t,r);var n=r.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(r.scoped=!1),r.selector||!1!==r.scoped||(r.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(!function(e,t){var r=e.options,n=e.style,i=n?n[eW]:null;if(i){for(var s in i)t.addRule(s,i[s],_({},r,{selector:eZ(s,e.selector)}));delete n[eW]}}(e,t),function(e,t){var r=e.options,n=e.style;for(var i in n)if("@"===i[0]&&i.substr(0,eW.length)===eW){var s=eZ(i.substr(eW.length),e.selector);t.addRule(s,n[i],_({},r,{selector:s})),delete n[i]}}(e,t))}},{onProcessStyle:function(e,t,r){if("style"!==t.type)return e;var n,i,s=t.options.parent;for(var o in e){var a=-1!==o.indexOf("&"),l="@"===o[0];if(a||l){if(n=function(e,t,r){if(r)return _({},r,{index:r.index+1});var n=e.options.nestingLevel;n=void 0===n?1:n+1;var i=_({},e.options,{nestingLevel:n,index:t.indexOf(e)+1});return delete i.name,i}(t,s,n),a){var u=function(e,t){for(var r=t.split(e0),n=e.split(e0),i="",s=0;s<r.length;s++)for(var o=r[s],a=0;a<n.length;a++){var l=n[a];i&&(i+=", "),i+=-1!==l.indexOf("&")?l.replace(e1,o):o+" "+l}return i}(o,t.selector);i||(i=function(e,t){return function(r,n){var i=e.getRule(n)||t&&t.getRule(n);return i?i.selector:n}}(s,r)),u=u.replace(e2,i);var c=t.key+"-"+o;"replaceRule"in s?s.replaceRule(c,e[o],_({},n,{selector:u})):s.addRule(c,e[o],_({},n,{selector:u}))}else l&&s.addRule(o,{},n).addRule(t.key,e[o],{selector:t.selector});delete e[o]}}return e}},{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=e3(e[t]);return e}return e3(e)},onChangeValue:function(e,t,r){if(0===t.indexOf("--"))return e;var n=(0,e5.Z)(t);return t===n?e:(r.prop(n,e),null)}},function(e){void 0===e&&(e={});var t=e7(e);return{onProcessStyle:function(e,r){if("style"!==r.type)return e;for(var n in e)e[n]=te(n,e[n],t);return e},onChangeValue:function(e,r){return te(r,e,t)}}}(),{onProcessRule:function(e){if("keyframes"===e.type){var t;e.at="-"===(t=e.at)[1]||"ms"===th.js?t:"@"+th.css+"keyframes"+t.substr(10)}},onProcessStyle:function(e,t){return"style"!==t.type?e:function e(t){for(var r in t){var n=t[r];if("fallbacks"===r&&Array.isArray(n)){t[r]=n.map(e);continue}var i=!1,s=tx(r);s&&s!==r&&(i=!0);var o=!1,a=tO(s,B(n));a&&a!==n&&(o=!0),(i||o)&&(i&&delete t[r],t[s||r]=a||n)}return t}(e)},onChangeValue:function(e,t){return tO(t,B(e))||e}},function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,r){if("style"!==r.type)return t;for(var n={},i=Object.keys(t).sort(e),s=0;s<i.length;s++)n[i[s]]=t[i[s]];return n}}}()]}),tP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,r=void 0!==t&&t,n=e.productionPrefix,i=void 0===n?"jss":n,s=e.seed,o=void 0===s?"":s,a=""===o?"":"".concat(o,"-"),l=0,u=function(){return l+=1};return function(e,t){var n=t.options.name;if(n&&0===n.indexOf("Mui")&&!t.options.link&&!r){if(-1!==eq.indexOf(e.key))return"Mui-".concat(e.key);var s="".concat(a).concat(n,"-").concat(e.key);return t.options.theme[e$]&&""===o?"".concat(s,"-").concat(u()):s}return"".concat(a).concat(i).concat(u())}}(),tD=new Map,tL=h.createContext({disableGeneration:!1,generateClassName:tP,jss:tN,sheetsCache:null,sheetsManager:tD,sheetsRegistry:null}),tM=-1e9;function tj(e){return e&&"object"===O(e)&&e.constructor===Object}function tF(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},n=r.clone?_({},e):e;return tj(e)&&tj(t)&&Object.keys(t).forEach(function(i){"__proto__"!==i&&(tj(t[i])&&i in e?n[i]=tF(e[i],t[i],r):n[i]=t[i])}),n}let tV={};var tU=["xs","sm","md","lg","xl"];function tB(e,t,r){return(t=N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tz(e){for(var t="https://mui.com/production-error/?code="+e,r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}let t$={black:"#000",white:"#fff"},tq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},tK={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},tG={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},tH={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},tW={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},tQ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},tJ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function tY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),r)}function tX(e){if(e.type)return e;if("#"===e.charAt(0)){var t,r,n;return tX((t=(t=e).substr(1),r=RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),(n=t.match(r))&&1===n[0].length&&(n=n.map(function(e){return e+e})),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3}).join(", "),")"):""))}var i=e.indexOf("("),s=e.substring(0,i);if(-1===["rgb","rgba","hsl","hsla"].indexOf(s))throw Error(tz(3,e));var o=e.substring(i+1,e.length-1).split(",");return{type:s,values:o=o.map(function(e){return parseFloat(e)})}}function tZ(e){var t=e.type,r=e.values;return -1!==t.indexOf("rgb")?r=r.map(function(e,t){return t<3?parseInt(e,10):e}):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),"".concat(t,"(").concat(r.join(", "),")")}function t0(e){var t,r,n,i,s,o,a,l,u="hsl"===(e=tX(e)).type?tX((n=(r=(t=tX(t=e)).values)[0],s=r[1]/100*Math.min(i=r[2]/100,1-i),a="rgb",l=[Math.round(255*(o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)})(0)),Math.round(255*o(8)),Math.round(255*o(4))],"hsla"===t.type&&(a+="a",l.push(r[3])),tZ({type:a,values:l}))).values:e.values;return Number((.2126*(u=u.map(function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}))[0]+.7152*u[1]+.0722*u[2]).toFixed(3))}var t1={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:t$.white,default:tq[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},t2={text:{primary:t$.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:tq[800],default:"#303030"},action:{active:t$.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function t5(e,t,r,n){var i=n.light||n,s=n.dark||1.5*n;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:"light"===t?e.light=function(e,t){if(e=tX(e),t=tY(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;return tZ(e)}(e.main,i):"dark"===t&&(e.dark=function(e,t){if(e=tX(e),t=tY(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var r=0;r<3;r+=1)e.values[r]*=1-t;return tZ(e)}(e.main,s)))}function t3(e){return Math.round(1e5*e)/1e5}function t6(e){return t3(e)}var t4={textTransform:"uppercase"},t8='"Roboto", "Helvetica", "Arial", sans-serif';function t7(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var t9=["none",t7(0,2,1,-1,0,1,1,0,0,1,3,0),t7(0,3,1,-2,0,2,2,0,0,1,5,0),t7(0,3,3,-2,0,3,4,0,0,1,8,0),t7(0,2,4,-1,0,4,5,0,0,1,10,0),t7(0,3,5,-1,0,5,8,0,0,1,14,0),t7(0,3,5,-1,0,6,10,0,0,1,18,0),t7(0,4,5,-2,0,7,10,1,0,2,16,1),t7(0,5,5,-3,0,8,10,1,0,3,14,2),t7(0,5,6,-3,0,9,12,1,0,3,16,2),t7(0,6,6,-3,0,10,14,1,0,4,18,3),t7(0,6,7,-4,0,11,15,1,0,4,20,3),t7(0,7,8,-4,0,12,17,2,0,5,22,4),t7(0,7,8,-4,0,13,19,2,0,5,24,4),t7(0,7,9,-4,0,14,21,2,0,5,26,4),t7(0,8,9,-5,0,15,22,2,0,6,28,5),t7(0,8,10,-5,0,16,24,2,0,6,30,5),t7(0,8,11,-5,0,17,26,2,0,6,32,5),t7(0,9,11,-5,0,18,28,2,0,7,34,6),t7(0,9,12,-6,0,19,29,2,0,7,36,6),t7(0,10,13,-6,0,20,31,3,0,8,38,7),t7(0,10,13,-6,0,21,33,3,0,8,40,7),t7(0,10,14,-6,0,22,35,3,0,8,42,7),t7(0,11,14,-7,0,23,36,3,0,9,44,8),t7(0,11,15,-7,0,24,38,3,0,9,46,8)];let re={borderRadius:4};var rt={xs:0,sm:600,md:960,lg:1280,xl:1920},rr={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(rt[e],"px)")}};let rn=function(e,t){return t?tF(e,t,{clone:!1}):e};var ri={m:"margin",p:"padding"},rs={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ro={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ra=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}(function(e){if(e.length>2){if(!ro[e])return[e];e=ro[e]}var t,r=function(e){if(Array.isArray(e))return e}(t=e.split(""))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,o,a=[],l=!0,u=!1;try{for(s=(r=r.call(e)).next;!(l=(n=s.call(r)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}(t,2)||tr(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1],s=ri[n],o=rs[i]||"";return Array.isArray(o)?o.map(function(e){return s+e}):[s+o]}),rl=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function ru(e){var t=e.spacing||8;return"number"==typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"==typeof t?t:function(){}}function rc(e){var t=ru(e.theme);return Object.keys(e).map(function(r){if(-1===rl.indexOf(r))return null;var n,i=(n=ra(r),function(e){return n.reduce(function(r,n){return r[n]=function(e,t){if("string"==typeof t||null==t)return t;var r=e(Math.abs(t));return t>=0?r:"number"==typeof r?-r:"-".concat(r)}(t,e),r},{})}),s=e[r];return function(e,t,r){if(Array.isArray(t)){var n=e.theme.breakpoints||rr;return t.reduce(function(e,i,s){return e[n.up(n.keys[s])]=r(t[s]),e},{})}if("object"===O(t)){var i=e.theme.breakpoints||rr;return Object.keys(t).reduce(function(e,n){return e[i.up(n)]=r(t[n]),e},{})}return r(t)}(e,s,i)}).reduce(rn,{})}rc.propTypes={},rc.filterProps=rl;var rh={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},rf={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function rd(e){return"".concat(Math.round(e),"ms")}let rp={easing:rh,duration:rf,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.duration,n=void 0===r?rf.standard:r,i=t.easing,s=void 0===i?rh.easeInOut:i,o=t.delay,a=void 0===o?0:o;return T(t,["duration","easing","delay"]),(Array.isArray(e)?e:[e]).map(function(e){return"".concat(e," ").concat("string"==typeof n?n:rd(n)," ").concat(s," ").concat("string"==typeof a?a:rd(a))}).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round((4+15*Math.pow(t,.25)+t/5)*10)}},rg={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var rm=function(){for(var e,t,r,n,i,s,o,a,l,u,c,h,f,d,p,g,m,y,v,w,b,I,S,E,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=x.breakpoints,C=x.mixins,A=x.palette,R=x.spacing,O=x.typography,N=T(x,["breakpoints","mixins","palette","spacing","typography"]),P=function(e){var t=e.primary,r=void 0===t?{light:tK[300],main:tK[500],dark:tK[700]}:t,n=e.secondary,i=void 0===n?{light:tG.A200,main:tG.A400,dark:tG.A700}:n,s=e.error,o=void 0===s?{light:tH[300],main:tH[500],dark:tH[700]}:s,a=e.warning,l=void 0===a?{light:tW[300],main:tW[500],dark:tW[700]}:a,u=e.info,c=void 0===u?{light:tQ[300],main:tQ[500],dark:tQ[700]}:u,h=e.success,f=void 0===h?{light:tJ[300],main:tJ[500],dark:tJ[700]}:h,d=e.type,p=void 0===d?"light":d,g=e.contrastThreshold,m=void 0===g?3:g,y=e.tonalOffset,v=void 0===y?.2:y,w=T(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function b(e){var t,r,n;return(t=t2.text.primary,(Math.max(r=t0(e),n=t0(t))+.05)/(Math.min(r,n)+.05)>=m)?t2.text.primary:t1.text.primary}var I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=_({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw Error(tz(4,t));if("string"!=typeof e.main)throw Error(tz(5,JSON.stringify(e.main)));return t5(e,"light",r,v),t5(e,"dark",n,v),e.contrastText||(e.contrastText=b(e.main)),e};return tF(_({common:t$,type:p,primary:I(r),secondary:I(i,"A400","A200","A700"),error:I(o),warning:I(l),info:I(c),success:I(f),grey:tq,contrastThreshold:m,getContrastText:b,augmentColor:I,tonalOffset:v},{dark:t2,light:t1}[p]),w)}(void 0===A?{}:A),D=function(e){var t=e.values,r=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,n=e.unit,i=void 0===n?"px":n,s=e.step,o=void 0===s?5:s,a=T(e,["values","unit","step"]);function l(e){var t="number"==typeof r[e]?r[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function u(e,t){var n=tU.indexOf(t);return n===tU.length-1?l(e):"@media (min-width:".concat("number"==typeof r[e]?r[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==n&&"number"==typeof r[tU[n+1]]?r[tU[n+1]]:t)-o/100).concat(i,")")}return _({keys:tU,values:r,up:l,down:function(e){var t=tU.indexOf(e)+1,n=r[tU[t]];if(t===tU.length)return l("xs");var s="number"==typeof n&&t>0?n:e;return"@media (max-width:".concat(s-o/100).concat(i,")")},between:u,only:function(e){return u(e,e)},width:function(e){return r[e]}},a)}(void 0===k?{}:k),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=ru({spacing:e}),r=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return 0===r.length?t(1):1===r.length?t(r[0]):r.map(function(e){if("string"==typeof e)return e;var r=t(e);return"number"==typeof r?"".concat(r,"px"):r}).join(" ")};return Object.defineProperty(r,"unit",{get:function(){return e}}),r.mui=!0,r}(R),M=tF({breakpoints:D,direction:"ltr",mixins:(e=void 0===C?{}:C,_({gutters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn("Material-UI: theme.mixins.gutters() is deprecated.\nYou can use the source of the mixin directly:\n\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "),_({paddingLeft:L(2),paddingRight:L(2)},e,tB({},D.up("sm"),_({paddingLeft:L(3),paddingRight:L(3)},e[D.up("sm")])))},toolbar:(tB(t={minHeight:56},"".concat(D.up("xs")," and (orientation: landscape)"),{minHeight:48}),tB(t,D.up("sm"),{minHeight:64}),t)},e)),overrides:{},palette:P,props:{},shadows:t9,typography:(s=void 0===(i=(n="function"==typeof(r=void 0===O?{}:O)?r(P):r).fontFamily)?t8:i,a=void 0===(o=n.fontSize)?14:o,u=void 0===(l=n.fontWeightLight)?300:l,h=void 0===(c=n.fontWeightRegular)?400:c,d=void 0===(f=n.fontWeightMedium)?500:f,p=n.fontWeightBold,m=void 0===(g=n.htmlFontSize)?16:g,y=n.allVariants,v=n.pxToRem,w=T(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),b=a/14,I=v||function(e){return"".concat(e/m*b,"rem")},E={h1:(S=function(e,t,r,n,i){return _({fontFamily:s,fontWeight:e,fontSize:I(t),lineHeight:r},s===t8?{letterSpacing:"".concat(t3(n/t),"em")}:{},i,y)})(u,96,1.167,-1.5),h2:S(u,60,1.2,-.5),h3:S(h,48,1.167,0),h4:S(h,34,1.235,.25),h5:S(h,24,1.334,0),h6:S(d,20,1.6,.15),subtitle1:S(h,16,1.75,.15),subtitle2:S(d,14,1.57,.1),body1:S(h,16,1.5,.15),body2:S(h,14,1.43,.15),button:S(d,14,1.75,.4,t4),caption:S(h,12,1.66,.4),overline:S(h,12,2.66,1,t4)},tF(_({htmlFontSize:m,pxToRem:I,round:t6,fontFamily:s,fontSize:a,fontWeightLight:u,fontWeightRegular:h,fontWeightMedium:d,fontWeightBold:void 0===p?700:p},E),w,{clone:!1})),spacing:L,shape:re,transitions:rp,zIndex:rg},N),j=arguments.length,F=Array(j>1?j-1:0),V=1;V<j;V++)F[V-1]=arguments[V];return F.reduce(function(e,t){return tF(e,t)},M)}(),ry=h.forwardRef(function(e,t){var r=e.classes,n=e.className,i=e.color,s=void 0===i?"primary":i,o=e.disableShrink,a=e.size,l=void 0===a?40:a,u=e.style,c=e.thickness,f=void 0===c?3.6:c,d=e.value,p=void 0===d?0:d,g=e.variant,m=void 0===g?"indeterminate":g,y=T(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),v={},w={},b={};if("determinate"===m||"static"===m){var I=2*Math.PI*((44-f)/2);v.strokeDasharray=I.toFixed(3),b["aria-valuenow"]=Math.round(p),v.strokeDashoffset="".concat(((100-p)/100*I).toFixed(3),"px"),w.transform="rotate(-90deg)"}return h.createElement("div",_({className:x(r.root,n,"inherit"!==s&&r["color".concat(function(e){if("string"!=typeof e)throw Error(tz(7));return e.charAt(0).toUpperCase()+e.slice(1)}(s))],{determinate:r.determinate,indeterminate:r.indeterminate,static:r.static}[m]),style:_({width:l,height:l},w,u),ref:t,role:"progressbar"},b,y),h.createElement("svg",{className:r.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},h.createElement("circle",{className:x(r.circle,void 0!==o&&o&&r.circleDisableShrink,{determinate:r.circleDeterminate,indeterminate:r.circleIndeterminate,static:r.circleStatic}[m]),style:v,cx:44,cy:44,r:(44-f)/2,fill:"none",strokeWidth:f})))});let rv=(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.defaultTheme,i=t.withTheme,s=void 0!==i&&i,o=t.name,a=T(t,["defaultTheme","withTheme","name"]),l=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.name,i=r.classNamePrefix,s=r.Component,o=r.defaultTheme,a=void 0===o?tV:o,l=T(r,["name","classNamePrefix","Component","defaultTheme"]),u=(t="function"==typeof e,{create:function(r,n){try{i=t?e(r):e}catch(e){throw e}if(!n||!r.overrides||!r.overrides[n])return i;var i,s=r.overrides[n],o=_({},i);return Object.keys(s).forEach(function(e){o[e]=tF(o[e],s[e])}),o},options:{}}),c=n||i||"makeStyles";return u.options={index:tM+=1,name:n,meta:c,classNamePrefix:c},function(){var e,t,r,i,o,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=ez()||a,d=_({},h.useContext(tL),l),p=h.useRef(),g=h.useRef();return e=function(){var e={name:n,state:{},stylesCreator:u,stylesOptions:d,theme:f};return function(e,t){var r=e.state,n=e.theme,i=e.stylesOptions,s=e.stylesCreator,o=e.name;if(!i.disableGeneration){var a=eU.get(i.sheetsManager,s,n);a||(a={refs:0,staticSheet:null,dynamicStyles:null},eU.set(i.sheetsManager,s,n,a));var l=_({},s.options,i,{theme:n,flip:"boolean"==typeof i.flip?i.flip:"rtl"===n.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;var u=i.sheetsRegistry;if(0===a.refs){i.sheetsCache&&(c=eU.get(i.sheetsCache,s,n));var c,h=s.create(n,o);!c&&((c=i.jss.createStyleSheet(h,_({link:!1},l))).attach(),i.sheetsCache&&eU.set(i.sheetsCache,s,n,c)),u&&u.add(c),a.staticSheet=c,a.dynamicStyles=function e(t){var r=null;for(var n in t){var i=t[n],s=typeof i;if("function"===s)r||(r={}),r[n]=i;else if("object"===s&&null!==i&&!Array.isArray(i)){var o=e(i);o&&(r||(r={}),r[n]=o)}}return r}(h)}if(a.dynamicStyles){var f=i.jss.createStyleSheet(a.dynamicStyles,_({link:!0},l));f.update(t),f.attach(),r.dynamicSheet=f,r.classes=eV({baseClasses:a.staticSheet.classes,newClasses:f.classes}),u&&u.add(f)}else r.classes=a.staticSheet.classes;a.refs+=1}}(e,c),g.current=!1,p.current=e,function(){!function(e){var t=e.state,r=e.theme,n=e.stylesOptions,i=e.stylesCreator;if(!n.disableGeneration){var s=eU.get(n.sheetsManager,i,r);s.refs-=1;var o=n.sheetsRegistry;0===s.refs&&(eU.delete(n.sheetsManager,i,r),n.jss.removeStyleSheet(s.staticSheet),o&&o.remove(s.staticSheet)),t.dynamicSheet&&(n.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}(e)}},t=[f,u],i=h.useRef([]),o=h.useMemo(function(){return{}},t),i.current!==o&&(i.current=o,r=e()),h.useEffect(function(){return function(){r&&r()}},[o]),h.useEffect(function(){if(g.current){var e;(e=p.current.state).dynamicSheet&&e.dynamicSheet.update(c)}g.current=!0}),function(e,t,r){var n=e.state;if(e.stylesOptions.disableGeneration)return t||{};n.cacheClasses||(n.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return n.classes!==n.cacheClasses.lastJSS&&(n.cacheClasses.lastJSS=n.classes,i=!0),t!==n.cacheClasses.lastProp&&(n.cacheClasses.lastProp=t,i=!0),i&&(n.cacheClasses.value=eV({baseClasses:n.cacheClasses.lastJSS,newClasses:t,Component:r})),n.cacheClasses.value}(p.current,c.classes,s)}}(e,_({defaultTheme:n,Component:r,name:o||r.displayName,classNamePrefix:o},a)),u=h.forwardRef(function(e,t){e.classes;var i,a=e.innerRef,u=T(e,["classes","innerRef"]),c=l(_({},r.defaultProps,e)),f=u;return("string"==typeof o||s)&&(i=ez()||n,o&&(f=function(e){var t,r=e.theme,n=e.name,i=e.props;if(!r||!r.props||!r.props[n])return i;var s=r.props[n];for(t in s)void 0===i[t]&&(i[t]=s[t]);return i}({theme:i,name:o,props:u})),s&&!f.theme&&(f.theme=i)),h.createElement(r,_({ref:a||t,classes:c},f))});return C()(u,r),u}})(function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}},_({defaultTheme:rm},{name:"MuiCircularProgress",flip:!1}))(ry),rw=p.zo.div.withConfig({componentId:"sc-fb8ae361-0"})(["display:flex;justify-content:center;align-items:center;"]),rb=p.zo.div.withConfig({componentId:"sc-fb8ae361-1"})(["width:512px;margin-right:90px;position:fixed;margin-right:648px;"]),rI=p.zo.div.withConfig({componentId:"sc-fb8ae361-2"})(["width:560px;height:100%;position:fixed;margin-left:602px;box-shadow:0px 0px 40px -2px #bebebe;background-color:#bebebe;z-index:0;@media (max-width:1160px){margin-left:0px;}@media (max-width:560px){width:100vw;}"]),rS=p.zo.div.withConfig({componentId:"sc-fb8ae361-3"})(["z-index:1;margin-left:602px;display:flex;flex-direction:column;height:100%;width:560px;@media (max-width:1160px){margin-left:0px;}@media (max-width:560px){width:100vw;}"]),r_=p.zo.main.withConfig({componentId:"sc-fb8ae361-4"})(["flex-grow:1;"]);function rE(e){let{children:t}=e,r=(0,I.useRouter)(),[n,i]=(0,h.useContext)(f.k).isLoading,[o,a]=(0,h.useContext)(f.k).headerType,[l,u]=(0,h.useContext)(f.k).headerIndex,[c,p]=(0,h.useContext)(f.k).headerTitle,[g,m]=(0,h.useContext)(f.k).footerIndex,[y,b]=(0,h.useContext)(f.k).footerVisible;return(0,h.useEffect)(()=>{switch(p(""),a(!0),b(!0),r.route){case"/category":m(0);break;case"/search":m(1);break;case"/":u(0),m(2);break;case"/best":u(1),m(2);break;case"/new":u(2),m(2);break;case"/estimate":u(3),m(2);break;case"/like":a(!1),m(3);break;case"/my":p(""),m(4);break;case"/login":p(""),a(!1);break;case"/signin":p(""),a(!1),b(!1)}}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(rw,{children:[(0,s.jsxs)(rb,{id:"pageLeftBanner",children:[(0,s.jsx)(d,{href:"/",children:(0,s.jsx)("img",{src:"https://wisely.store/custom/img/pc_logo.svg"})}),(0,s.jsx)("p",{style:{marginTop:18,fontSize:"2.05rem",color:"black"},children:"    "}),(0,s.jsx)("img",{style:{marginTop:38},src:"https://wisely.store/web/upload/appfiles/ZaReJam3QiELznoZeGGkMG/c7dd520bbc905ce87525499765d0a8ef.jpg"}),(0,s.jsx)("div",{style:{marginTop:36},className:"mainUlButton",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)(d,{href:"/best",children:(0,s.jsx)("li",{children:(0,s.jsxs)("div",{className:"mainUlButtonDiv",children:[(0,s.jsx)("p",{children:""}),(0,s.jsx)("p",{className:"mainUlButtonP",children:">"})]})})}),(0,s.jsx)(d,{href:"/new",children:(0,s.jsx)("li",{children:(0,s.jsxs)("div",{className:"mainUlButtonDiv",children:[(0,s.jsx)("p",{children:""}),(0,s.jsx)("p",{className:"mainUlButtonP",children:">"})]})})}),(0,s.jsx)(d,{href:"/estimate",children:(0,s.jsx)("li",{children:(0,s.jsxs)("div",{className:"mainUlButtonDiv",children:[(0,s.jsx)("p",{children:""}),(0,s.jsx)("p",{className:"mainUlButtonP",children:">"})]})})})]})}),(0,s.jsx)(d,{href:"/",children:(0,s.jsx)("img",{style:{marginTop:81},src:"https://wisely.store/web/upload/appfiles/ZaReJam3QiELznoZeGGkMG/7cc7243f81a9b0eb17b2b6babbe01677.png"})})]}),(0,s.jsxs)(rS,{children:[(0,s.jsx)(w,{}),(0,s.jsx)(S,{}),(0,s.jsx)(r_,{children:t}),(0,s.jsx)(v,{})]}),(0,s.jsx)(rI,{})]}),n?(0,s.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"black",position:"fixed",top:"0",zIndex:"2",opacity:"0.5",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)(rv,{size:"55px",style:{color:"#0077ed",zIndex:"3"}})}):null]})}var rT=r(9008);function rx(e){let{Component:t,pageProps:r}=e,n=t.getLayout||(e=>e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rT,{children:(0,s.jsx)("meta",{name:"viewport",content:"initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width"})}),n((0,s.jsx)(f.Z,{children:(0,s.jsx)(rE,{children:(0,s.jsx)(t,{...r})})}))]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[774,179],()=>(t(1118),t(3079))),_N_E=e.O()}]);